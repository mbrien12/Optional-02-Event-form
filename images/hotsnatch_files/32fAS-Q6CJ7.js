if (self.CavalryLogger) { CavalryLogger.start_js(["6yVuo"]); }

__d("XUISidebar",["csx","DirectionalDockingElement","DOMDimensions","DOMQuery","Event","SubscriptionsHandler","Run","ViewportBounds","getElementPosition","getViewportDimensions","throttle"],(function a(b,c,d,e,f,g,h){var i="._2yaa";function j(k){"use strict";this.$XUISidebar1=new(c("DirectionalDockingElement"))(k);this.$XUISidebar3=k;this.$XUISidebar4();var l=c("throttle")(this.$XUISidebar4.bind(this));this.$XUISidebar2=new(c("SubscriptionsHandler"))();this.$XUISidebar2.addSubscriptions(c("Event").listen(window,"resize",l),c("Event").listen(this.$XUISidebar3,"resize",l),c("Run").onLeave(this.$XUISidebar5.bind(this)))}j.prototype.$XUISidebar5=function(){"use strict";if(this.$XUISidebar2)this.$XUISidebar2.release();this.$XUISidebar2=null};j.prototype.$XUISidebar4=function(){var k,l=this;"use strict";var m=c("DOMDimensions").getElementDimensions(this.$XUISidebar3).height,n=c("getElementPosition")(this.$XUISidebar3).y,o=c("ViewportBounds").getTop(),p=c("getViewportDimensions")().height-o,q=p-m;if(m<p)q=o;else(function(){var r=[];c("DOMQuery").scry(l.$XUISidebar3,i).forEach(function(v){r.push(c("getElementPosition")(v).y)});r.sort(function(v,w){return v-w});for(var s=0,t=r.length;s<t;s++){var u=r[s]-n;if(m-u<p){q=o-u;break}}})();this.$XUISidebar1.setOffset(q)};f.exports=j}),null);
__d("LeftNavScrollable",["Event","LeftNavFitToHeight","Parent","Run","XUISidebar"],(function a(b,c,d,e,f,g){var h=void 0,i=void 0,j={init:function l(m){if(h){c("Event").fire(window,"resize");return}i=c("Parent").bySelector(m,"#leftCol");if(!(i instanceof HTMLElement))return;h=i.appendChild(document.createElement("div"));while(h!==i.firstChild&&i.firstChild)h.appendChild(i.firstChild);h.style.paddingTop="12px";i.style.marginTop="-12px";new(c("XUISidebar"))(h);c("LeftNavFitToHeight").destroy();c("Event").fire(window,"resize");c("Run").onLeave(k)}};function k(){i=null;h=null}f.exports=j}),null);
__d("WorkFilePickerEventsTypedLogger",["Banzai","GeneratedLoggerUtils","nullthrows"],(function a(b,c,d,e,f,g){"use strict";function h(){this.clear()}h.prototype.log=function(){c("GeneratedLoggerUtils").log("logger:WorkFilePickerEventsLoggerConfig",this.$WorkFilePickerEventsTypedLogger1,c("Banzai").BASIC)};h.prototype.logVital=function(){c("GeneratedLoggerUtils").log("logger:WorkFilePickerEventsLoggerConfig",this.$WorkFilePickerEventsTypedLogger1,c("Banzai").VITAL)};h.prototype.clear=function(){this.$WorkFilePickerEventsTypedLogger1={};return this};h.prototype.updateData=function(j){this.$WorkFilePickerEventsTypedLogger1=babelHelpers["extends"]({},this.$WorkFilePickerEventsTypedLogger1,j);return this};h.prototype.setAppType=function(j){this.$WorkFilePickerEventsTypedLogger1.app_type=j;return this};h.prototype.setEvent=function(j){this.$WorkFilePickerEventsTypedLogger1.event=j;return this};h.prototype.setFileURL=function(j){this.$WorkFilePickerEventsTypedLogger1.file_url=j;return this};h.prototype.setVC=function(j){this.$WorkFilePickerEventsTypedLogger1.vc=j;return this};var i={app_type:true,event:true,file_url:true,vc:true};f.exports=h}),null);
__d("ReactComposerWorkFileActionsImpl",["ReactComposerDispatcher","ReactComposerWorkFileActionType"],(function a(b,c,d,e,f,g){h.prototype.reset=function(i){"use strict";c("ReactComposerDispatcher").dispatch({composerID:i,type:c("ReactComposerWorkFileActionType").RESET})};h.prototype.saveAppFile=function(i,j,k,l){"use strict";c("ReactComposerDispatcher").dispatch({composerID:i,type:c("ReactComposerWorkFileActionType").SAVE_APP_FILE,id:j,name:k,url:l})};h.prototype.removeAppFile=function(i,j){"use strict";c("ReactComposerDispatcher").dispatch({composerID:i,type:c("ReactComposerWorkFileActionType").REMOVE_APP_FILE,id:j})};h.prototype.saveFile=function(i,j){"use strict";c("ReactComposerDispatcher").dispatch({composerID:i,type:c("ReactComposerWorkFileActionType").SAVE_FILE,name:j.name,file:j.file})};h.prototype.setConfig=function(i,j){"use strict";c("ReactComposerDispatcher").dispatch({composerID:i,type:c("ReactComposerWorkFileActionType").SET_FILE_CONFIG,config:j})};h.prototype.oAuthUser=function(i,j,k){"use strict";c("ReactComposerDispatcher").dispatch({composerID:i,type:c("ReactComposerWorkFileActionType").OAUTH,app:j,accessToken:k})};function h(){"use strict"}f.exports=new h()}),null);
__d("ReactComposerWorkFileAttachmentAppUploadIframe.react",["React"],(function a(b,c,d,e,f,g){"use strict";var h,i,j=c("React").PropTypes;h=babelHelpers.inherits(k,c("React").Component);i=h&&h.prototype;function k(l){i.constructor.call(this,l);this.state={onPostMessage:null}}k.prototype.shouldComponentUpdate=function(l){return this.props.url.toString()!==l.url.toString()};k.prototype.$ReactComposerWorkFileAttachmentAppUploadIframe1=function(l){if(!this.state.onPostMessage)this.setState({onPostMessage:function(event){var m=event.source===l.contentWindow,n=event.origin.startsWith("https://work-sdk.")&&event.origin.endsWith(".fbsbx.com");if(m&&n)this.props.onAppFilesSelected(event.data)}.bind(this)},function(){return window.addEventListener("message",this.state.onPostMessage)}.bind(this));else window.removeEventListener("message",this.state.onPostMessage)};k.prototype.render=function(){return c("React").createElement("iframe",{src:this.props.url,ref:function(l){if(l!==null)this.$ReactComposerWorkFileAttachmentAppUploadIframe1(l)}.bind(this),frameBorder:"0",width:"100%",height:"25px"})};k.propTypes={url:j.object.isRequired,onAppFilesSelected:j.func.isRequired};f.exports=k}),null);
__d("AppIntegrationType",[],(function a(b,c,d,e,f,g){f.exports=Object.freeze({ASANA:"ASANA",AZURE:"AZURE",AZURE_USER_INVITES:"AZURE_USER_INVITES",BOX:"BOX",BOX_OAUTH:"BOX_OAUTH",DROPBOX:"DROPBOX",GDRIVE:"GDRIVE",GENERIC:"GENERIC",GOOGLE_CALENDAR:"GOOGLE_CALENDAR",GSUITE:"GSUITE",GSUITE_USER_INVITES:"GSUITE_USER_INVITES",ONEDRIVE:"ONEDRIVE",OUTLOOK_CALENDAR:"OUTLOOK_CALENDAR",QUIP:"QUIP",SALESFORCE:"SALESFORCE"})}),null);
__d("XWorkInstallContentAppOnUserController",["XController"],(function a(b,c,d,e,f,g){f.exports=c("XController").create("/work/content_apps/",{shared_url:{type:"String"}})}),null);
__d("ContentAppUserOAuth",["AsyncRequest","AsyncResponse","Popup","XWorkInstallContentAppOnUserController","emptyFunction"],(function a(b,c,d,e,f,g){"use strict";f.exports={init:function h(i,j){i.onclick=function(){this.openOauthDialog(j)}.bind(this)},openOauthDialog:function h(i){var j=arguments.length<=1||arguments[1]===undefined?c("emptyFunction"):arguments[1],k=arguments.length<=2||arguments[2]===undefined?c("emptyFunction"):arguments[2];window.workContentAppsOAuthCallback=function(l){var m=c("XWorkInstallContentAppOnUserController").getURIBuilder().getURI();new(c("AsyncRequest"))().setURI(m).setMethod("POST").setData({code:l,type:i.contentAppType,shared_url:i.sharedURL}).setHandler(j).setErrorHandler(k).send()};c("Popup").open(i.loginURL,700,700)}}}),null);
__d("XWorkSDKSbxBoxFilePickerController",["XController"],(function a(b,c,d,e,f,g){f.exports=c("XController").create("/box/file_picker/",{access_token:{type:"String",required:true}})}),null);
__d("XWorkSDKSbxDropboxFilePickerController",["XController"],(function a(b,c,d,e,f,g){f.exports=c("XController").create("/dropbox/file_picker/",{})}),null);
__d("XWorkSDKSbxGoogleDriveFilePickerController",["XController"],(function a(b,c,d,e,f,g){f.exports=c("XController").create("/googledrive/file_picker/",{})}),null);
__d("XWorkSDKSbxOneDriveFilePickerController",["XController"],(function a(b,c,d,e,f,g){f.exports=c("XController").create("/onedrive/file_picker/",{})}),null);
__d("ReactComposerWorkFileAttachmentUpload.react",["cx","fbt","AppIntegrationType","ReactComposerWorkFileAttachmentAppUploadIframe.react","ContentAppUserOAuth","FileInput.react","Image.react","InlineBlock.react","Layout.react","React","XUIButton.react","XUICloseButton.react","XUIText.react","XWorkSDKSbxBoxFilePickerController","XWorkSDKSbxDropboxFilePickerController","XWorkSDKSbxGoogleDriveFilePickerController","XWorkSDKSbxOneDriveFilePickerController"],(function a(b,c,d,e,f,g,h,i){var j,k,l=c("Layout.react").Column,m=c("React").PropTypes;j=babelHelpers.inherits(n,c("React").Component);k=j&&j.prototype;n.prototype.render=function(){"use strict";if(!this.props.canViewerUploadFiles&&this.props.installedApps.size===0)return null;return c("React").createElement(c("Layout.react"),{className:"_1wu3"},this.getFileUploadArea(),this.getAppsUploadArea())};n.prototype.getFileUploadArea=function(){"use strict";if(!this.props.canViewerUploadFiles)return null;var o=this.props.hasFileSelected?c("React").createElement(c("XUICloseButton.react"),{onClick:this.props.onFileRemove,className:"_1wu6",size:"small",type:"button"}):null,p=this.props.installedApps.size>0?i._("From your computer"):i._("Select a file on your computer");return c("React").createElement(l,{className:"_1wu4"+(this.$ReactComposerWorkFileAttachmentUpload1()?" _1wu5":"")},c("React").createElement("div",{className:"_1wu7"},c("React").createElement(c("XUIText.react"),{className:"_1wu8",weight:"bold",display:"block"},p),c("React").createElement(c("FileInput.react"),{onChange:this.props.onFileSelected,name:"file1"},c("React").createElement(c("XUIButton.react"),{disabled:this.$ReactComposerWorkFileAttachmentUpload1(),className:"_1wu9",label:i._("Choose File"),href:"#"})),c("React").createElement(c("InlineBlock.react"),{className:"_1wua _3-9a",alignv:"middle"},this.props.selectedFileName),o,c("React").createElement(c("XUIText.react"),{className:"_1wub",display:"block",size:"small"},i._("(Max. size {size})",[i.param("size",this.props.maxFileUploadString)]))))};n.prototype.$ReactComposerWorkFileAttachmentUpload2=function(o){"use strict";var p=void 0;switch(o.type){case c("AppIntegrationType").BOX:if(!o.access_token&&o.login_url){var q=c("React").createElement(c("Image.react"),{src:o.image_small,height:16,width:16,className:"_3-8_ _2stq"});return c("React").createElement("div",{key:o.type,className:"_3-95"},c("React").createElement(c("XUIButton.react"),{className:"_2str",onClick:function(){return this.$ReactComposerWorkFileAttachmentUpload3(o)}.bind(this),type:"button",image:q,label:i._("Log In to {appName}",[i.param("appName",o.name)])}))}p=c("XWorkSDKSbxBoxFilePickerController").getURIBuilder().setString("access_token",o.access_token).getURI();break;case c("AppIntegrationType").DROPBOX:p=c("XWorkSDKSbxDropboxFilePickerController").getURIBuilder().getURI();break;case c("AppIntegrationType").GDRIVE:p=c("XWorkSDKSbxGoogleDriveFilePickerController").getURIBuilder().getURI();break;case c("AppIntegrationType").ONEDRIVE:p=c("XWorkSDKSbxOneDriveFilePickerController").getURIBuilder().getURI();break}if(!p)return null;p=p.setDomain("www.fbsbx.com").setSubdomain("work-sdk").setProtocol("https");return c("React").createElement("div",{key:o.type,className:"_3-94"},c("React").createElement(c("ReactComposerWorkFileAttachmentAppUploadIframe.react"),{url:p,onAppFilesSelected:this.props.onAppFilesSelected}))};n.prototype.$ReactComposerWorkFileAttachmentUpload3=function(o){"use strict";c("ContentAppUserOAuth").openOauthDialog({contentAppType:c("AppIntegrationType").BOX_OAUTH,loginURL:o.login_url},function(p){return this.props.onOAuth(o,p)}.bind(this))};n.prototype.$ReactComposerWorkFileAttachmentUpload1=function(){"use strict";return this.props.selectedAppsFiles.size>0};n.prototype.$ReactComposerWorkFileAttachmentUpload4=function(){"use strict";var o=this.props.selectedAppsFiles.map(function(p,q){return this.$ReactComposerWorkFileAttachmentUpload5(q,p)}.bind(this)).toArray();return c("React").createElement("div",null,o)};n.prototype.$ReactComposerWorkFileAttachmentUpload5=function(o,p){"use strict";var q=c("React").createElement(c("XUICloseButton.react"),{onClick:function(){return this.props.onAppFileRemove(o)}.bind(this),className:"_1wu6",size:"small",type:"button"});return c("React").createElement("div",{key:o,className:"_3-94"},c("React").createElement(c("InlineBlock.react"),{className:"_1wua",alignv:"middle"},p),q)};n.prototype.getAppsUploadArea=function(){"use strict";if(this.props.installedApps.size===0)return null;var o=c("React").createElement("div",null,this.props.installedApps.map(function(p){return this.$ReactComposerWorkFileAttachmentUpload2(p)}.bind(this)).toArray());return c("React").createElement(l,{className:"_1wui"+(this.props.hasFileSelected?" _1wu5":"")},c("React").createElement("div",{className:"_1wu7"},c("React").createElement(c("XUIText.react"),{weight:"bold",display:"block",className:"_1wu8"},i._("Share from:")),o))};function n(){"use strict";j.apply(this,arguments)}n.propTypes={canViewerUploadFiles:m.bool.isRequired,hasFileSelected:m.bool.isRequired,installedApps:m.object.isRequired,maxFileUploadString:m.string.isRequired,onAppFileRemove:m.func.isRequired,onAppFilesSelected:m.func.isRequired,onFileRemove:m.func.isRequired,onFileSelected:m.func.isRequired,onOAuth:m.func.isRequired,selectedAppsFiles:m.object.isRequired,selectedFileName:m.string.isRequired};f.exports=n}),null);
__d("ReactComposerWorkFileAttachmentUploadContainerImpl.react",["fbt","invariant","AppIntegrationType","ExceptionDialog","React","ReactComposerFileUtils","ReactComposerLoggingName","ReactComposerPropsAndStoreBasedStateMixin","ReactComposerScrapedAttachmentActions","ReactComposerStatusUtils","ReactComposerWorkFileActions","ReactComposerWorkFileAttachmentUpload.react","ReactComposerWorkFileStore","WorkFilePickerEventsTypedLogger"],(function a(b,c,d,e,f,g,h,i){var j=c("ReactComposerWorkFileActions").module,k=c("ReactComposerWorkFileStore").module;k!==null||i(0);j!==null||i(0);var l=c("React").createClass({displayName:"ReactComposerWorkFileAttachmentUploadContainer",mixins:[c("ReactComposerPropsAndStoreBasedStateMixin")(k)],statics:{calculateState:function m(n,o){return{maxFileUploadSize:k.getMaxFileUploadSize(n),maxFileUploadString:k.getMaxFileUploadString(n),hasFileSelected:k.hasFile(n),selectedFileName:k.getSelectedFileName(n),installedApps:k.getInstalledApps(n),selectedAppsFiles:k.getSelectedAppsFiles(n),canViewerUploadFiles:k.getCanViewerUploadFiles(n)}}},componentDidMount:function m(){c("ReactComposerScrapedAttachmentActions").enabled(this.context.composerID,true);var n=k.getFile(this.context.composerID),o=this.state.maxFileUploadSize;if(n&&c("ReactComposerFileUtils").hasExceededFileSize(n,o))j.reset(this.context.composerID);if(n&&!this.state.canViewerUploadFiles){j.reset(this.context.composerID);c("ExceptionDialog").show(h._("File upload failed").toString(),h._("Uploading files is disabled for this account.").toString())}},render:function m(){return c("React").createElement(c("ReactComposerWorkFileAttachmentUpload.react"),{maxFileUploadString:this.state.maxFileUploadString,onFileRemove:this._onFileRemove,onFileSelected:this._onFilesSelected,hasFileSelected:this.state.hasFileSelected,selectedFileName:this.state.selectedFileName,installedApps:this.state.installedApps,canViewerUploadFiles:this.state.canViewerUploadFiles,selectedAppsFiles:this.state.selectedAppsFiles,onAppFilesSelected:this._onAppFilesSelected,onAppFileRemove:this._onAppFileRemove,onOAuth:this._onOAuth})},_onFilesSelected:function m(event){var n=event.target.files[0];if(c("ReactComposerFileUtils").hasExceededFileSize(n,this.state.maxFileUploadSize))return;j.saveFile(this.context.composerID,{name:event.target.value.split("\\").pop(),file:n});event.target.value=""},_onAppFilesSelected:function m(n){if(n.appType===c("AppIntegrationType").BOX)n.files.forEach(function(o){return this._onBoxSelected(o)}.bind(this));else if(n.appType===c("AppIntegrationType").DROPBOX)n.files.forEach(function(o){return this._onDropboxSelected(o)}.bind(this));else if(n.appType===c("AppIntegrationType").GDRIVE)n.files.forEach(function(o){return this._onGoogleDriveSelected(o)}.bind(this));else if(n.appType===c("AppIntegrationType").ONEDRIVE)n.files.forEach(function(o){return this._onOneDriveSelected(o)}.bind(this))},_onOAuth:function m(n,o){var p=o.getPayload();if(p.access_token)j.oAuthUser(this.context.composerID,n,p.access_token)},_onBoxSelected:function m(n){if(!n.shared_link){c("ExceptionDialog").show(h._("File sharing failed").toString(),h._("The file that you've tried to share does not have the correct permissions.").toString());return}var o=n.shared_link.url;j.saveAppFile(this.context.composerID,n.id,n.name,o);this._logAppFileSelected(c("AppIntegrationType").BOX,o);this._generatePreview(o)},_onDropboxSelected:function m(n){var o=n.link;j.saveAppFile(this.context.composerID,n.id,n.name,o);this._logAppFileSelected(c("AppIntegrationType").DROPBOX,o);this._generatePreview(o)},_onGoogleDriveSelected:function m(n){var o=n.url;j.saveAppFile(this.context.composerID,n.id,n.name,o);this._logAppFileSelected(c("AppIntegrationType").GDRIVE,o);this._generatePreview(o)},_onOneDriveSelected:function m(n){var o=n.permissions[0].link.webUrl;j.saveAppFile(this.context.composerID,n.id,n.name,o);this._logAppFileSelected(c("AppIntegrationType").ONEDRIVE,o);this._generatePreview(o)},_generatePreview:function m(n){c("ReactComposerStatusUtils").scrapeLink(this.context.composerID,this.context.targetID,n,this.context.composerType,this.context.actorID,c("ReactComposerLoggingName").INLINE_COMPOSER)},_onAppFileRemove:function m(n){j.removeAppFile(this.context.composerID,n)},_onFileRemove:function m(){j.reset(this.context.composerID)},_logAppFileSelected:function m(n,o){new(c("WorkFilePickerEventsTypedLogger"))().setEvent("FILE_SELECTED").setAppType(n).setFileURL(o).log()}});f.exports=l}),null);
__d("WorkLoginState",["Cookie"],(function a(b,c,d,e,f,g){var h={hasLoginStateChanged:function i(j){var k=c("Cookie").get("c_user");if(!k)return false;return j!==k}};f.exports=h}),null);
__d("WorkLoginStatePoller",["Cookie","WorkLoginState"],(function a(b,c,d,e,f,g){var h={init:function i(){this._start()},_start:function i(){setInterval(this._checkState(),1e3)},_checkState:function i(){var j=c("Cookie").get("c_user")||"";return function(){if(c("WorkLoginState").hasLoginStateChanged(j))window.location.reload()}}};f.exports=h}),null);