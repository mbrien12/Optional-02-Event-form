if (self.CavalryLogger) { CavalryLogger.start_js(["M1HdW"]); }

__d("VideoPlayerFormatsMap",[],(function a(b,c,d,e,f,g){f.exports={live_map:"inline",live_map_sidebar:"inline",live_map_listview:"inline",live_map_tooltip:"inline",live_map_tooltip_from_listview:"inline",live_map_tooltip_from_map:"inline",video_home_inline:"inline",inline:"inline",chained:"inline",page_live_video_module:"inline",chained_suggestion:"inline",embedded_video:"inline",embedded_video_preview:"inline",embedded_video_from_ufi:"inline",media_collage:"inline",channel:"channel",permalink:"permalink",snowlift:"snowlift",tv:"tv",watch_scroll:"watch_scroll",continue_watching_recommendation:"inline",tahoe:"tahoe",search_live_video_module:"inline",videohub_live:"inline",ads:null,animated_image_share:null,asset:null,broadcast_request_attachment:null,camera_post:null,embedded:null,embedded_page_plugin:null,gameroom_live_video_hero_banner:null,gameroom_live_video_tab:null,gameroom_live_video_thumbnail:null,games_video_home:null,games_video_home_hero:null,games_video_single_game:null,group_live_video_module:null,html5:null,insights:null,issues_module:null,live_beeper:null,live_control_panel:null,live_map_tooltip_from_webgl:null,live_video_broadcast:null,live_video_preview:null,lookback:null,messaging:null,misc:null,mobile:null,offers_detail:null,pages_finch_main_video:null,pages_finch_thumbnail_video:null,pages_finch_trailer:null,pages_video_set:null,profile_video:null,profile_video_hovercard:null,profile_video_thumb:null,report_flow:null,review:null,slideshow:null,srt_review:null,trailer_og_attachment:null,trailer_timeline_collections:null,trailer_timeline_unit:null,user_video_tab:null,video_copyright_preview:null,video_inline_chaining:null,videohub_featured:null,videohub_playlist:null}}),null);
__d("VideoQualityClassInternal",[],(function a(b,c,d,e,f,g){f.exports={orderedValues:["sd","hd","uhd"]}}),null);
__d("VideoViewabilityKeyEvents",[],(function a(b,c,d,e,f,g){f.exports={Events:["entered_fs","exited_fs","finished_playing","paused","player_format_changed","started_playing","unpaused"]}}),null);
__d("VideoPlayerAbrTypedLogger",["Banzai","GeneratedLoggerUtils","nullthrows"],(function a(b,c,d,e,f,g){"use strict";function h(){this.clear()}h.prototype.log=function(){c("GeneratedLoggerUtils").log("vpabr_proxy:VideoPlayerAbrLoggerConfig",this.$VideoPlayerAbrTypedLogger1,c("Banzai").BASIC)};h.prototype.logVital=function(){c("GeneratedLoggerUtils").log("vpabr_proxy:VideoPlayerAbrLoggerConfig",this.$VideoPlayerAbrTypedLogger1,c("Banzai").VITAL)};h.prototype.clear=function(){this.$VideoPlayerAbrTypedLogger1={};return this};h.prototype.updateData=function(j){this.$VideoPlayerAbrTypedLogger1=babelHelpers["extends"]({},this.$VideoPlayerAbrTypedLogger1,j);return this};h.prototype.setBandwidthEstimate=function(j){this.$VideoPlayerAbrTypedLogger1.bandwidth_estimate=j;return this};h.prototype.setBufferedAhead=function(j){this.$VideoPlayerAbrTypedLogger1.buffered_ahead=j;return this};h.prototype.setBytes=function(j){this.$VideoPlayerAbrTypedLogger1.bytes=j;return this};h.prototype.setClientTime=function(j){this.$VideoPlayerAbrTypedLogger1.client_time=j;return this};h.prototype.setClientTimeBegin=function(j){this.$VideoPlayerAbrTypedLogger1.client_time_begin=j;return this};h.prototype.setClientTimeEnd=function(j){this.$VideoPlayerAbrTypedLogger1.client_time_end=j;return this};h.prototype.setDelayMs=function(j){this.$VideoPlayerAbrTypedLogger1.delay_ms=j;return this};h.prototype.setEvent=function(j){this.$VideoPlayerAbrTypedLogger1.event=j;return this};h.prototype.setPlayhead=function(j){this.$VideoPlayerAbrTypedLogger1.playhead=j;return this};h.prototype.setReason=function(j){this.$VideoPlayerAbrTypedLogger1.reason=j;return this};h.prototype.setRepresentationID=function(j){this.$VideoPlayerAbrTypedLogger1.representation_id=j;return this};h.prototype.setSession=function(j){this.$VideoPlayerAbrTypedLogger1.session=j;return this};h.prototype.setUnsampledReason=function(j){this.$VideoPlayerAbrTypedLogger1.unsampled_reason=j;return this};h.prototype.setVC=function(j){this.$VideoPlayerAbrTypedLogger1.vc=j;return this};h.prototype.setVideoID=function(j){this.$VideoPlayerAbrTypedLogger1.video_id=j;return this};h.prototype.updateExtraData=function(j){j=c("nullthrows")(c("GeneratedLoggerUtils").serializeMap(j));c("GeneratedLoggerUtils").checkExtraDataFieldNames(j,i);this.$VideoPlayerAbrTypedLogger1=babelHelpers["extends"]({},this.$VideoPlayerAbrTypedLogger1,j);return this};h.prototype.addToExtraData=function(j,k){var l={};l[j]=k;return this.updateExtraData(l)};var i={bandwidth_estimate:true,buffered_ahead:true,bytes:true,client_time:true,client_time_begin:true,client_time_end:true,delay_ms:true,event:true,playhead:true,reason:true,representation_id:true,session:true,unsampled_reason:true,vc:true,video_id:true};f.exports=h}),null);
__d("VideoPlayerShakaPerformanceTypedLogger",["Banzai","GeneratedLoggerUtils","nullthrows"],(function a(b,c,d,e,f,g){"use strict";function h(){this.clear()}h.prototype.log=function(){c("GeneratedLoggerUtils").log("vpsp_proxy:VideoPlayerShakaPerformanceLoggerConfig",this.$VideoPlayerShakaPerformanceTypedLogger1,c("Banzai").BASIC)};h.prototype.logVital=function(){c("GeneratedLoggerUtils").log("vpsp_proxy:VideoPlayerShakaPerformanceLoggerConfig",this.$VideoPlayerShakaPerformanceTypedLogger1,c("Banzai").VITAL)};h.prototype.clear=function(){this.$VideoPlayerShakaPerformanceTypedLogger1={};return this};h.prototype.updateData=function(j){this.$VideoPlayerShakaPerformanceTypedLogger1=babelHelpers["extends"]({},this.$VideoPlayerShakaPerformanceTypedLogger1,j);return this};h.prototype.setAccessToken=function(j){this.$VideoPlayerShakaPerformanceTypedLogger1.access_token=j;return this};h.prototype.setAdditionalBufferedRanges=function(j){this.$VideoPlayerShakaPerformanceTypedLogger1.additional_buffered_ranges=j;return this};h.prototype.setClientTimeBegin=function(j){this.$VideoPlayerShakaPerformanceTypedLogger1.client_time_begin=j;return this};h.prototype.setClientTimeEnd=function(j){this.$VideoPlayerShakaPerformanceTypedLogger1.client_time_end=j;return this};h.prototype.setCode=function(j){this.$VideoPlayerShakaPerformanceTypedLogger1.code=j;return this};h.prototype.setError=function(j){this.$VideoPlayerShakaPerformanceTypedLogger1.error=j;return this};h.prototype.setEvent=function(j){this.$VideoPlayerShakaPerformanceTypedLogger1.event=j;return this};h.prototype.setExpectedLength=function(j){this.$VideoPlayerShakaPerformanceTypedLogger1.expected_length=j;return this};h.prototype.setInitiator=function(j){this.$VideoPlayerShakaPerformanceTypedLogger1.initiator=j;return this};h.prototype.setIsLive=function(j){this.$VideoPlayerShakaPerformanceTypedLogger1.is_live=j;return this};h.prototype.setLastBufferedEnd=function(j){this.$VideoPlayerShakaPerformanceTypedLogger1.last_buffered_end=j;return this};h.prototype.setLastBufferedStart=function(j){this.$VideoPlayerShakaPerformanceTypedLogger1.last_buffered_start=j;return this};h.prototype.setLastPlayingEventTime=function(j){this.$VideoPlayerShakaPerformanceTypedLogger1.last_playing_event_time=j;return this};h.prototype.setLength=function(j){this.$VideoPlayerShakaPerformanceTypedLogger1.length=j;return this};h.prototype.setLiveheadDelta=function(j){this.$VideoPlayerShakaPerformanceTypedLogger1.livehead_delta=j;return this};h.prototype.setParentID=function(j){this.$VideoPlayerShakaPerformanceTypedLogger1.parent_id=j;return this};h.prototype.setPlayerOriginCallerSpecified=function(j){this.$VideoPlayerShakaPerformanceTypedLogger1.player_origin_caller_specified=j;return this};h.prototype.setPlayerSuborigin=function(j){this.$VideoPlayerShakaPerformanceTypedLogger1.player_suborigin=j;return this};h.prototype.setPlayhead=function(j){this.$VideoPlayerShakaPerformanceTypedLogger1.playhead=j;return this};h.prototype.setPriority=function(j){this.$VideoPlayerShakaPerformanceTypedLogger1.priority=j;return this};h.prototype.setPushed=function(j){this.$VideoPlayerShakaPerformanceTypedLogger1.pushed=j;return this};h.prototype.setReason=function(j){this.$VideoPlayerShakaPerformanceTypedLogger1.reason=j;return this};h.prototype.setRepresentationID=function(j){this.$VideoPlayerShakaPerformanceTypedLogger1.representation_id=j;return this};h.prototype.setRescheduleCount=function(j){this.$VideoPlayerShakaPerformanceTypedLogger1.reschedule_count=j;return this};h.prototype.setResource=function(j){this.$VideoPlayerShakaPerformanceTypedLogger1.resource=j;return this};h.prototype.setResult=function(j){this.$VideoPlayerShakaPerformanceTypedLogger1.result=j;return this};h.prototype.setScriptPath=function(j){this.$VideoPlayerShakaPerformanceTypedLogger1.script_path=j;return this};h.prototype.setSequentialID=function(j){this.$VideoPlayerShakaPerformanceTypedLogger1.sequential_id=j;return this};h.prototype.setSession=function(j){this.$VideoPlayerShakaPerformanceTypedLogger1.session=j;return this};h.prototype.setState=function(j){this.$VideoPlayerShakaPerformanceTypedLogger1.state=j;return this};h.prototype.setStreamSwitchReason=function(j){this.$VideoPlayerShakaPerformanceTypedLogger1.stream_switch_reason=j;return this};h.prototype.setTimeToFirstByte=function(j){this.$VideoPlayerShakaPerformanceTypedLogger1.time_to_first_byte=j;return this};h.prototype.setTimeToLastByte=function(j){this.$VideoPlayerShakaPerformanceTypedLogger1.time_to_last_byte=j;return this};h.prototype.setTimeToRequestSent=function(j){this.$VideoPlayerShakaPerformanceTypedLogger1.time_to_request_sent=j;return this};h.prototype.setTimeToRequestStart=function(j){this.$VideoPlayerShakaPerformanceTypedLogger1.time_to_request_start=j;return this};h.prototype.setType=function(j){this.$VideoPlayerShakaPerformanceTypedLogger1.type=j;return this};h.prototype.setVC=function(j){this.$VideoPlayerShakaPerformanceTypedLogger1.vc=j;return this};h.prototype.setVideoDuration=function(j){this.$VideoPlayerShakaPerformanceTypedLogger1.video_duration=j;return this};h.prototype.setVideoID=function(j){this.$VideoPlayerShakaPerformanceTypedLogger1.video_id=j;return this};h.prototype.setWasDelayed=function(j){this.$VideoPlayerShakaPerformanceTypedLogger1.was_delayed=j;return this};var i={access_token:true,additional_buffered_ranges:true,client_time_begin:true,client_time_end:true,code:true,error:true,event:true,expected_length:true,initiator:true,is_live:true,last_buffered_end:true,last_buffered_start:true,last_playing_event_time:true,length:true,livehead_delta:true,parent_id:true,player_origin_caller_specified:true,player_suborigin:true,playhead:true,priority:true,pushed:true,reason:true,representation_id:true,reschedule_count:true,resource:true,result:true,script_path:true,sequential_id:true,session:true,state:true,stream_switch_reason:true,time_to_first_byte:true,time_to_last_byte:true,time_to_request_sent:true,time_to_request_start:true,type:true,vc:true,video_duration:true,video_id:true,was_delayed:true};f.exports=h}),null);
__d("TaggedTimeRanges",["sprintf"],(function a(b,c,d,e,f,g){function h(i){"use strict";this.$TaggedTimeRanges1=[];this.$TaggedTimeRanges2=0;this.$TaggedTimeRanges3=0;this.$TaggedTimeRanges4=i?i:function(j,k){return j===k}}h.prototype.add=function(i,j,k){"use strict";if(j<i)return;if(j===i)return;if(this.$TaggedTimeRanges1.length===0){this.$TaggedTimeRanges1.push({start:i,end:j,tag:k});return}var l=0,m=0;for(var n=0;n<this.$TaggedTimeRanges1.length;n++){if(i===this.$TaggedTimeRanges1[n].start&&j===this.$TaggedTimeRanges1[n].end){l=n;m=n+1;break}if(i>=this.$TaggedTimeRanges1[n].start)l=n+1;if(j<=this.$TaggedTimeRanges1[n].end)m=n;if(j<this.$TaggedTimeRanges1[n].start)break}this.$TaggedTimeRanges1.splice(l,m-l,{start:i,end:j,tag:k});this.$TaggedTimeRanges5(l)};h.prototype.$TaggedTimeRanges5=function(i){"use strict";var j=this.$TaggedTimeRanges1[i],k=null;if(i!==0)k=this.$TaggedTimeRanges1[i-1];if(k!==null)if(this.$TaggedTimeRanges4(k.tag,j.tag)){if(k.end>=j.start){this.$TaggedTimeRanges1.splice(i-1,2,{start:k.start,end:Math.max(j.end,k.end),tag:j.tag});i--}}else{if(k.end>j.start&&k.start===j.start){this.$TaggedTimeRanges1.splice(i-1,1);i--}else if(k.end>j.start)this.$TaggedTimeRanges1.splice(i-1,1,{start:k.start,end:j.start,tag:k.tag});if(k.end>j.end)this.$TaggedTimeRanges1.splice(i+1,0,{start:j.end,end:k.end,tag:k.tag})}var l=null;if(i!==this.$TaggedTimeRanges1.length-1)l=this.$TaggedTimeRanges1[i+1];if(l)if(this.$TaggedTimeRanges4(l.tag,j.tag)){if(l.start<=j.end)this.$TaggedTimeRanges1.splice(i,2,{start:j.start,end:Math.max(l.end,j.end),tag:j.tag})}else if(l.start<=j.end)if(l.end<j.end){this.$TaggedTimeRanges1.splice(i,1,{start:j.start,end:l.start,tag:j.tag});this.$TaggedTimeRanges1.push({start:l.end,end:j.end,tag:j.tag})}else this.$TaggedTimeRanges1.splice(i+1,1,{start:j.end,end:l.end,tag:l.tag})};h.prototype.get=function(i){"use strict";var j=i>=this.$TaggedTimeRanges3?this.$TaggedTimeRanges2:0,k=null;for(var l=j;l<this.$TaggedTimeRanges1.length;l++)if(this.$TaggedTimeRanges1[l].start<=i&&i<this.$TaggedTimeRanges1[l].end){k=l;break}this.$TaggedTimeRanges2=k===null?0:k;this.$TaggedTimeRanges3=i;return k===null?null:this.$TaggedTimeRanges1[k].tag};h.prototype.getLength=function(){"use strict";return this.$TaggedTimeRanges1.length};f.exports=h}),null);
__d("dispatchCustomEvent",[],(function a(b,c,d,e,f,g){function h(i,j,k){var l=void 0;if(typeof b.CustomEvent==="function")l=new b.CustomEvent(j,{detail:k});else{l=b.document.createEvent("CustomEvent");l.initCustomEvent(j,true,true,k)}i.dispatchEvent(l)}f.exports=h}),null);
__d("dispatchEvent",[],(function a(b,c,d,e,f,g){function h(i,j){var k;if(typeof b.Event==="function")k=new b.Event(j);else{k=b.document.createEvent("Event");k.initEvent(j,true,true)}i.dispatchEvent(k)}f.exports=h}),null);
__d("StaleVideoMonitor",["performanceNow","EventEmitter","SubscriptionsHandler","debounce","EventListener"],(function a(b,c,d,e,f,g){var h,i,j=1500;h=babelHelpers.inherits(k,c("EventEmitter"));i=h&&h.prototype;function k(l){"use strict";i.constructor.call(this);this.$StaleVideoMonitor1=new(c("SubscriptionsHandler"))();this.$StaleVideoMonitor2=l.currentTime;this.$StaleVideoMonitor3=c("performanceNow")();var m=c("debounce")(function(){if(l.paused||l.playbackRate<=0)return;var o=l.currentTime,p=l.buffered,q=false,r=void 0;for(r=0;r<p.length;++r){var s=p.start(r),t=p.end(r);if(s>o)break;if(s<=o&&t>=o+1){q=true;break}}if(q){this.$StaleVideoMonitor4();this.emit("stale",c("performanceNow")()-this.$StaleVideoMonitor3,(l.currentTime-this.$StaleVideoMonitor2)*1e3)}}.bind(this),j),n=function(){this.$StaleVideoMonitor2=l.currentTime;this.$StaleVideoMonitor3=c("performanceNow")();m()}.bind(this);this.$StaleVideoMonitor1.addSubscriptions(c("EventListener").listen(l,"playing",n),c("EventListener").listen(l,"play",n),c("EventListener").listen(l,"timeupdate",n))}k.prototype.$StaleVideoMonitor4=function(){"use strict";if(this.$StaleVideoMonitor1)this.$StaleVideoMonitor1.release()};k.prototype.destroy=function(){"use strict";this.$StaleVideoMonitor4()};f.exports=k}),null);
__d("VideoPushParametersHelper",["URI","VideoPlayerShakaExperiments"],(function a(b,c,d,e,f,g){var h=/(.*)\.(xx|fna)\.fbcdn\.net/;function i(j){"use strict";this.$VideoPushParametersHelper1=new(c("URI"))(j);return this}i.prototype.setStreamEndOffset=function(j){"use strict";this.$VideoPushParametersHelper2=Math.min(Math.floor(j)+1,c("VideoPlayerShakaExperiments").liveMaxSegmentsToPush);this.$VideoPushParametersHelper4=Math.floor(j)+1;return this};i.prototype.setSegmentStartTime=function(j){"use strict";this.$VideoPushParametersHelper3=j;return this};i.prototype.setPushVideoRepresentationID=function(j){"use strict";this.$VideoPushParametersHelper5=j;return this};i.prototype.setPushAudioRepresentationID=function(j){"use strict";this.$VideoPushParametersHelper6=j;return this};i.prototype.setUseLongCacheForManifest=function(j){"use strict";this.$VideoPushParametersHelper7=j;return this};i.prototype.getURL=function(){"use strict";var j=this.getPushQueryParameters();j.forEach(function(k,l){this.$VideoPushParametersHelper1.addQueryData(l,k)}.bind(this));return this.$VideoPushParametersHelper1.toString()};i.prototype.getPushQueryParameters=function(){"use strict";var j=new Map(),k=h.test(this.$VideoPushParametersHelper1.toString());if(k&&c("VideoPlayerShakaExperiments").liveSendPushHeaders){if(this.$VideoPushParametersHelper2!=null)j.set("_nc_p_n",this.$VideoPushParametersHelper2);if(this.$VideoPushParametersHelper3!=null)j.set("_nc_p_ts",this.$VideoPushParametersHelper3);else if(this.$VideoPushParametersHelper4!=null)j.set("_nc_p_o",this.$VideoPushParametersHelper4);if(this.$VideoPushParametersHelper5!=null&&this.$VideoPushParametersHelper6!=null){j.set("_nc_p_rid",this.$VideoPushParametersHelper5);j.set("_nc_p_arid",this.$VideoPushParametersHelper6)}if(this.$VideoPushParametersHelper7)j.set("_nc_nc","1")}return j};i.prototype.getSegmentsToPush=function(){"use strict";return this.$VideoPushParametersHelper2};i.prototype.getSegmentStartTime=function(){"use strict";return this.$VideoPushParametersHelper3};i.prototype.getSegmentOffset=function(){"use strict";return this.$VideoPushParametersHelper4};i.prototype.getPushVideoRepresentationID=function(){"use strict";return this.$VideoPushParametersHelper5};i.prototype.getPushAudioRepresentationID=function(){"use strict";return this.$VideoPushParametersHelper6};i.prototype.getUseLongCacheForManifest=function(){"use strict";return this.$VideoPushParametersHelper7};i.getDefaultLiveStreamEndOffset=function(){"use strict";return c("VideoPlayerShakaExperiments").liveDefaultStreamEndOffset};f.exports=i}),null);
__d("XVideoDataController",["XController"],(function a(b,c,d,e,f,g){f.exports=c("XController").create("/video/video_data/",{video_id:{type:"String",required:true},width:{type:"Int"},height:{type:"Int"},scrubbing_preference:{type:"Int"},source:{type:"String"},preferred_projection:{type:"Enum",enumType:1},supports_html5_video:{type:"Bool",defaultValue:true},is_ad:{type:"Bool",defaultValue:false},force_flash:{type:"Bool",defaultValue:false},is_omnistab_preview_select_revert:{type:"Bool",defaultValue:false}})}),null);
__d("VideoMimeTypes",[],(function a(b,c,d,e,f,g){function h(o,p,q){return o+'; codecs="'+p+", "+q+'"'}var i="mp4a.40.2";function j(o){return"avc1.42E0"+o.toString(16).toUpperCase()}function k(o){return"avc1.4D40"+o.toString(16).toUpperCase()}function l(o){return"avc1.6400"+o.toString(16).toUpperCase()}var m="video/mp4",n={h264baseline:h(m,j(30),i),h264main30avc:h(m,k(30),i),h264main31avc:h(m,k(31),i),h264high50avc:h(m,l(50),i),h264high51avc:h(m,l(51),i)};f.exports=n}),null);
__d("canVideoPlayType",["DOM"],(function a(b,c,d,e,f,g){var h=null;function i(j){h=h||c("DOM").create("video");if(!("canPlayType"in h))return"";return h.canPlayType(j)}f.exports=i}),null);
__d("supportsHTML5Video",["DOM","memoize"],(function a(b,c,d,e,f,g){f.exports=c("memoize")(function(){return!!c("DOM").create("video").canPlayType})}),null);
__d("isHTML5VideoImplementationUnavailable",["VideoMimeTypes","canVideoPlayType","supportsHTML5Video"],(function a(b,c,d,e,f,g){var h=function h(i){if(i){var j=c("canVideoPlayType")(c("VideoMimeTypes").h264main30avc);return j!=="probably"}return!c("supportsHTML5Video")()};f.exports=h}),null);
__d("VideoPlayerMetaData",["invariant","regeneratorRuntime","Promise","AsyncRequest","VideoDashPrefetchCache","VideoData","VideoPushParametersHelper","XVideoDataController","isHTML5VideoImplementationUnavailable"],(function a(b,c,d,e,f,g,h){"use strict";var i={},j=12e4;function k(l){this.videoID=l}k.prototype.getVideoID=function(){return this.videoID};k.prototype.genVideoData=function l(){var m=arguments.length<=0||arguments[0]===undefined?{}:arguments[0],n=arguments[1],o;return c("regeneratorRuntime").async(function p(q){while(1)switch(q.prev=q.next){case 0:q.prev=0;o=this.$VideoPlayerMetaData1;if(!o||m.forceRefetch){if(this.$VideoPlayerMetaData2){clearTimeout(this.$VideoPlayerMetaData2);this.$VideoPlayerMetaData2=null}o=this.$VideoPlayerMetaData1=this.$VideoPlayerMetaData3(m);this.$VideoPlayerMetaData2=setTimeout(function(){this.$VideoPlayerMetaData1=null;n()}.bind(this),m.cacheTimeout||j)}q.next=5;return c("regeneratorRuntime").awrap(o);case 5:return q.abrupt("return",q.sent);case 8:q.prev=8;q.t0=q["catch"](0);throw q.t0;case 11:case"end":return q.stop()}},null,this,[[0,8]])};k.prototype.$VideoPlayerMetaData3=function(l){var m=c("XVideoDataController").getURIBuilder().setString("video_id",this.videoID).setBool("supports_html5_video",!c("isHTML5VideoImplementationUnavailable")(true)),n=l.forceFlash;if(n!==undefined)m=m.setBool("force_flash",n);var o=m.getURI();return new(c("Promise"))(function(p,q){new(c("AsyncRequest"))(o).setMethod("GET").setURI(o).setReadOnly(true).setOption("suppressEvaluation",true).setAllowCrossPageTransition(true).setHandler(function(r){var s=JSON.parse(r.payload.responseText);if(!s.error)p(new(c("VideoData"))(s));else q(s.error)}).setErrorHandler(function(r){var s=JSON.parse(r.errorMsg).error;q(s)}).send()})};k.get=function(l){if(!i[l])i[l]=new k(l);return i[l]};k.genVideoData=function l(m){var n=arguments.length<=1||arguments[1]===undefined?{}:arguments[1],o=arguments.length<=2||arguments[2]===undefined?function(){}:arguments[2];return c("regeneratorRuntime").async(function p(q){while(1)switch(q.prev=q.next){case 0:q.next=2;return c("regeneratorRuntime").awrap(k.get(m).genVideoData(n,o));case 2:return q.abrupt("return",q.sent);case 3:case"end":return q.stop()}},null,this)};f.exports=k}),null);
__d("VideoPlayerUtils",[],(function a(b,c,d,e,f,g){var h={getBufferedAheadOf:function i(j){var k=1/60,l=j.currentTime,m=j.buffered;for(var n=0;n<m.length;n++){var o=m.start(n)-k,p=m.end(n)+k;if(l>=o&&l<=p)return Math.max(m.end(n)-l,0)}return 0}};f.exports=h}),null);
__d("VideoQualityClasses",["VideoQualityClassInternal"],(function a(b,c,d,e,f,g){f.exports=c("VideoQualityClassInternal").orderedValues}),null);
__d("VideoWithFallbackMode",["Event","SubscriptionsHandler","TimeSlice","VideoPlayerExperiments","VideoPlayerLoggerEvent","VideoPlayerLoggerFallbackReasons","VideoPlayerReason","Visibility"],(function a(b,c,d,e,f,g){function h(i,j){"use strict";this.$VideoWithFallbackMode1=false;this.$VideoWithFallbackMode2=false;this.$VideoWithFallbackMode5=function(){this.$VideoWithFallbackMode1=true;if(c("VideoPlayerExperiments").disableFallbackModeForInactiveTab&&this.$VideoWithFallbackMode2){this.$VideoWithFallbackMode6.play(c("VideoPlayerReason").FALLBACK_MODE);this.$VideoWithFallbackMode2=false}}.bind(this);this.$VideoWithFallbackMode8=function(){this.$VideoWithFallbackMode1=false}.bind(this);this.$VideoWithFallbackMode3=new(c("SubscriptionsHandler"))();if(!j){j=i;i=null}this.$VideoWithFallbackMode4=j;if(i)this.enable(i)}h.prototype.enable=function(i){"use strict";this.$VideoWithFallbackMode3.engage();this.$VideoWithFallbackMode6=i;if(this.$VideoWithFallbackMode6.isImplementationUnavailable()||this.$VideoWithFallbackMode6.getOption("SphericalVideoPlayer","isUnavailable")){this.$VideoWithFallbackMode7(c("VideoPlayerLoggerFallbackReasons").FLASH_UNAVAILABLE);return}this.$VideoWithFallbackMode3.addSubscriptions(c("Event").listen(window,"blur",this.$VideoWithFallbackMode8),c("Event").listen(window,"focus",this.$VideoWithFallbackMode5),c("Visibility").addListener(c("Visibility").HIDDEN,this.$VideoWithFallbackMode8),c("Visibility").addListener(c("Visibility").VISIBLE,this.$VideoWithFallbackMode5),i.addListener("error",this.$VideoWithFallbackMode9.bind(this)));if(this.$VideoWithFallbackMode4.fallbackTimeoutMs){var j=this.$VideoWithFallbackMode4.fallbackTimeoutMs;this.$VideoWithFallbackMode10=setTimeout(c("TimeSlice").guard(function(){if(this.$VideoWithFallbackMode6.isState("loading")){this.$VideoWithFallbackMode6.pause(c("VideoPlayerReason").FALLBACK_MODE);this.$VideoWithFallbackMode7(c("VideoPlayerLoggerFallbackReasons").TIMEOUT);this.$VideoWithFallbackMode2=true}}.bind(this),"VideoWithFallbackMode fallbackTimeout",{isContinuation:false}),j)}};h.prototype.disable=function(){"use strict";this.$VideoWithFallbackMode3.release();clearTimeout(this.$VideoWithFallbackMode10);this.$VideoWithFallbackMode10=null;this.$VideoWithFallbackMode6=null};h.prototype.$VideoWithFallbackMode9=function(i){"use strict";if(this.$VideoWithFallbackMode6.isState("fallback"))return;if(this.$VideoWithFallbackMode6.isState("playing"))this.$VideoWithFallbackMode6.pause(c("VideoPlayerReason").FALLBACK_MODE);this.$VideoWithFallbackMode6.abortLoading();if(i)this.$VideoWithFallbackMode7(i);else{this.$VideoWithFallbackMode7(c("VideoPlayerLoggerFallbackReasons").FLASH_ERROR);this.$VideoWithFallbackMode2=true}};h.prototype.$VideoWithFallbackMode7=function(i){"use strict";if(c("VideoPlayerExperiments").disableFallbackModeForInactiveTab&&!this.$VideoWithFallbackMode1)return;this.$VideoWithFallbackMode6.setState("fallback");if(i===c("VideoPlayerLoggerFallbackReasons").TIMEOUT)this.$VideoWithFallbackMode6.emit("VideoWithStallRecoveryOverlay/timeout");this.$VideoWithFallbackMode6.logEvent(c("VideoPlayerLoggerEvent").ENTERED_FALLBACK,{debug_reason:i})};f.exports=h}),null);
__d("AbstractVideoPlayerApi",["invariant","EventEmitter","VideoPlayerApiEvents"],(function a(b,c,d,e,f,g,h){var i,j;i=babelHelpers.inherits(k,c("EventEmitter"));j=i&&i.prototype;function k(){"use strict";j.constructor.call(this)}k.prototype.addListener=function(){"use strict";for(var l=arguments.length,m=Array(l),n=0;n<l;n++)m[n]=arguments[n];return j.addListener.apply(this,m)};k.prototype.emit=function(){"use strict";for(var l=arguments.length,m=Array(l),n=0;n<l;n++)m[n]=arguments[n];return j.emit.apply(this,m)};k.prototype.setRelativeSphericalOrientation=function(l,m){"use strict"};k.isImplementationUnavailable=function(){"use strict";return true};f.exports=k}),null);
__d("VideoConfig",[],(function a(b,c,d,e,f,g){function h(i){Object.assign(this,i)}f.exports=h}),null);
__d("dangerouslyOverrideMediaElementEndedProperty",[],(function a(b,c,d,e,f,g){function h(){var i=arguments.length<=0||arguments[0]===undefined?{}:arguments[0];i.dangerouslyOverrideMediaElementEndedProperty=true;return i}h.isEnded=function(event){return!!(event&&event.detail&&event.detail.dangerouslyOverrideMediaElementEndedProperty)};f.exports=h}),null);
__d("HTMLMediaElementReadyStates",[],(function a(b,c,d,e,f,g){var h={HAVE_NOTHING:0,HAVE_METADATA:1,HAVE_CURRENT_DATA:2,HAVE_FUTURE_DATA:3,HAVE_ENOUGH_DATA:4};f.exports=h}),null);
__d("getHTMLMediaElementMutedState",["HTMLMediaElementReadyStates"],(function a(b,c,d,e,f,g){function h(i){if(i.readyState>=c("HTMLMediaElementReadyStates").HAVE_METADATA)return i.muted;else return i.hasAttribute("muted")||i.muted}f.exports=h}),null);
__d("HVideoPlayerMixin",["EventListener","UserAgent","VideoPlayerExperiments","VideoPlayerHTML5Experiments","VideoPlayerLoggerEvent","dangerouslyOverrideMediaElementEndedProperty","getHTMLMediaElementMutedState"],(function a(b,c,d,e,f,g){var h=-1,i=!!(window.performance&&window.performance.now&&window.performance.timing&&window.performance.timing.navigationStart);function j(l,event){l.time_ms=Date.now();var m=event.timeStamp;if(m&&i){var n=Math.floor(m).toString().length,o=Date.now().toString().length,p=window.performance.now();if(n===o+3){m=Math.floor(m/1e3);l.time_ms=m}else if(n===o)l.time_ms=m;else if(m<=p){var q=window.performance.timing.navigationStart;l.time_ms=q+Math.floor(m)}}return l}var k={initLogger:function l(m,n){this._loggedEvents={};this._logFunction=m;this._useEventTime=n;var o=this.getVideoElement();this._lastStartTimePosition=h;this._muted=c("getHTMLMediaElementMutedState")(o);this._pausedPosition=h;this._seeking=false;this._seekSourceTimePosition=h;this._volume=o.volume;this._logNextPlayingEvent=true;this._lastPlayedTime=h;var p=false;if(o.readyState>=o.HAVE_FUTURE_DATA)this._logReadyToPlay();else p=true;if(this.skipSubscriptions())return;var q=this.getSubscriptions();if(p)q.addSubscriptions(c("EventListener").listen(o,"canplay",this._logReadyToPlay.bind(this)));q.addSubscriptions(c("EventListener").listen(o,"ended",this.onEnded.bind(this)),c("EventListener").listen(o,"pause",this.onPause.bind(this)),c("EventListener").listen(o,"playing",this.onPlaying.bind(this)),c("EventListener").listen(o,"seeked",this.onSeeked.bind(this)),c("EventListener").listen(o,"seeking",this.onSeeking.bind(this)),c("EventListener").listen(o,"play",this.onPlay.bind(this)),c("EventListener").listen(o,"loadedmetadata",this.onLoadedMetadata.bind(this)),c("EventListener").listen(o,"timeupdate",this.onTimeUpdate.bind(this)),c("EventListener").listen(o,"volumechange",this.onVolumeChange.bind(this)))},skipSubscriptions:function l(){return false},onCanPlay:function l(m){this._logReadyToPlay(m)},onPlay:function l(m){this._logNextPlayingEvent=true;this._ignoreNextPlaying=false;this._pendingPlayRequest=true},logHeartbeat:function l(){if(c("VideoPlayerHTML5Experiments").heartbeatUpdateWatchTime){this._logEvent(c("VideoPlayerLoggerEvent").HEART_BEAT,this._getWatchTimeClosingLogData({}));var m=this._getVideoCurrentTime();this._lastStartTimePosition=m;this._lastPlayedTime=m}else this._logEvent(c("VideoPlayerLoggerEvent").HEART_BEAT)},_getWatchTimeClosingLogData:function l(m){this._lastPlayedTime=this._getVideoCurrentTime();return this._amendEventTime(babelHelpers["extends"]({video_last_start_time_position:this._lastStartTimePosition===h?this._lastPlayedTime:this._lastStartTimePosition,video_time_position:this._lastPlayedTime},m))},_logOnce:function l(event,m){if(this._loggedEvents[event])return;this._logEvent(event,m)},_logEvent:function l(event,m){this._loggedEvents[event]=true;var n=m?m:{};n.video_id=this.getVideoID();if(!Object.prototype.hasOwnProperty.call(n,"video_time_position"))n.video_time_position=this._getVideoCurrentTime();if(!n.time_ms)n.time_ms=Date.now();n.time=Math.round(n.time_ms/1e3);if(this.getAdClientToken){var o=this.getAdClientToken();if(o)n.ad_client_token=o}if(this.getPlayerFormat)n.player_format=this.getPlayerFormat();if(this.getPlayerOrigin)n.player_origin=this.getPlayerOrigin();if(this.getPlayerSuborigin)n.player_suborigin=this.getPlayerSuborigin();if(this.getExternalLogIDAndType){var p=this.getExternalLogIDAndType(),q=p.externalLogID,r=p.externalLogType;n.external_log_id=q;n.external_log_type=r}this._logFunction(event,n)},_logReadyToPlay:function l(){this._logOnce(c("VideoPlayerLoggerEvent").READY_TO_PLAY)},onPause:function l(m){this._logNextPlayingEvent=true;var n=this.getVideoElement();if(this._pendingPlayRequest){var o={debug_reason:this.getLastPlayReason()};this._pendingPlayRequest=false;this._logEvent(c("VideoPlayerLoggerEvent").CANCELLED_REQUESTED_PLAYING,o);return}var event=n.ended||c("VideoPlayerExperiments").abortLoadingDecisioningLogic&&c("dangerouslyOverrideMediaElementEndedProperty").isEnded(m)?c("VideoPlayerLoggerEvent").FINISHED_PLAYING:c("VideoPlayerLoggerEvent").PAUSED,p=this._getVideoCurrentTime();if(p)this._lastPlayedTime=p;var q=this._lastPlayedTime,r=m.lastPauseReason;if(event===c("VideoPlayerLoggerEvent").FINISHED_PLAYING)q=Math.max(q,n.duration);else if(this.preventPauseLoggingInMixin===true)return;else if(this.preventPauseLoggingInMixin===false)r=r||"unloaded";this._logEvent(event,this._amendEventTime({video_last_start_time_position:this._lastStartTimePosition===h?this._lastPlayedTime:this._lastStartTimePosition,video_time_position:q,debug_reason:r},m));this._lastStartTimePosition=h},onEnded:function l(){this._logNextPlayingEvent=true;if(this._lastStartTimePosition!==h&&c("UserAgent").isBrowser("IE"))this.onPause({})},logRepresentationEnded:function l(m){if(m){var n={representation_id:m.representationID,next_representation_id:m.nextRepresentationID,stream_switch_reason:m.streamSwitchReason};if(c("VideoPlayerHTML5Experiments").newStateChangeCalculation)n=this._getWatchTimeClosingLogData(n);this._logEvent(c("VideoPlayerLoggerEvent").REPRESENTATION_ENDED,n);if(c("VideoPlayerHTML5Experiments").newStateChangeCalculation){var o=this._getVideoCurrentTime();this._lastStartTimePosition=o;this._lastPlayedTime=o}}},addWatchTimeData:function l(m){if(this._lastStartTimePosition!=h&&this._lastPlayedTime!=h){m.video_last_start_time_position=this._lastStartTimePosition;m.video_time_position=this._lastPlayedTime;this._lastStartTimePosition=h}return m},getLastPlayReason:function l(){return null},getVideoPlayReason:function l(){return null},onPlaying:function l(m){if(!this._logNextPlayingEvent)return;if(c("VideoPlayerHTML5Experiments").superficialUnpauseEventsFix)this._logNextPlayingEvent=false;if(this._ignoreNextPlaying){this._ignoreNextPlaying=false;return}var n=this.getLastPlayReason();this._pendingPlayRequest=false;var event=this._loggedEvents[c("VideoPlayerLoggerEvent").STARTED_PLAYING]?c("VideoPlayerLoggerEvent").UNPAUSED:c("VideoPlayerLoggerEvent").STARTED_PLAYING,o=this._amendEventTime({debug_reason:n,video_play_reason:this.getVideoPlayReason()},m),p=this._getVideoCurrentTime();if(c("VideoPlayerHTML5Experiments").useCurrentTimeAdjustment){var q=this.getVideoElement().currentTime,r=q-p;o.time_ms-=Math.round(r*1e3)}this._logEvent(event,o);this._lastStartTimePosition=p;this._lastPlayedTime=p;this._currentTimeAtLoadedMetadataCache=null},allowNextSeekInMixin:function l(){this._allowNextSeek=true},onSeeked:function l(m){this._seeking=false;var n=this._seekSourceTimePosition;this._seekSourceTimePosition=h;if(this.preventSeekLoggingInMixin&&!this._allowNextSeek){if(!this._pendingPlayRequest)this._ignoreNextPlaying=true;return}this._allowNextSeek=false;this._ignoreNextPlaying=false;var o={video_seek_source_time_position:n};if(this._lastStartTimePosition!==h)o.video_last_start_time_position=this._lastStartTimePosition;else o.video_last_start_time_position=n;this._logEvent(c("VideoPlayerLoggerEvent").SCRUBBED,this._amendEventTime(o,m));var p=this.getVideoElement();if(p.paused)this._lastStartTimePosition=h;else this._lastStartTimePosition=this._getVideoCurrentTime()},onSeeking:function l(m){this._currentTimeAtLoadedMetadataCache=null;if(!this._seeking){this._seekSourceTimePosition=this._getVideoCurrentTime();this._seeking=true}},onTimeUpdate:function l(m){this._currentTimeAtLoadedMetadataCache=null;var n=this.getVideoElement();if(!n.paused)this._lastPlayedTime=this._getVideoCurrentTime()},onVolumeChange:function l(m){var n=this.getVideoElement(),o={},event=null;if(c("VideoPlayerHTML5Experiments").useFixedVolumeLogging){var p=n.muted,q=this._muted,r=n.volume,s=this._volume;o.current_volume=Math.round(r*100);this._volume=r;this._muted=p;var t=p||r==0,u=q||s==0;if(u&&t)return;if(u!=t)if(t)event=c("VideoPlayerLoggerEvent").MUTED;else event=c("VideoPlayerLoggerEvent").UNMUTED;else{if(s==r)return;if(r<s)event=c("VideoPlayerLoggerEvent").VOLUME_DECREASE;else event=c("VideoPlayerLoggerEvent").VOLUME_INCREASE}}else{if(n.muted!==this._muted&&n.volume===this._volume&&n.volume>0)event=n.muted?c("VideoPlayerLoggerEvent").MUTED:c("VideoPlayerLoggerEvent").UNMUTED;else{event=n.volume>this._volume?c("VideoPlayerLoggerEvent").VOLUME_INCREASE:c("VideoPlayerLoggerEvent").VOLUME_DECREASE;o.current_volume=Math.round(n.volume*100)}this._muted=n.muted;this._volume=n.volume}this._logEvent(event,this._amendEventTime(o,m))},_amendEventTime:function l(m,event){var n=this._useEventTime;if(c("VideoPlayerHTML5Experiments").fixEventTimeLogging)n=n&&event;if(n)return j(m,event);else m.time_ms=Date.now();return m},_getVideoCurrentTime:function l(){var m=this.getVideoElement().currentTime.toFixed(2);if(c("VideoPlayerHTML5Experiments").useCurrentTimeAdjustment)if(this._currentTimeAtLoadedMetadataCache!=null)m=this._currentTimeAtLoadedMetadataCache.toFixed(2);if(c("VideoPlayerHTML5Experiments").fixCurrentTimeType)return+m;return m},onLoadedMetadata:function l(m){this._currentTimeAtLoadedMetadataCache=this.getVideoElement().currentTime}};f.exports=k}),null);
__d("MediaBufferingDetector",["Event","EventEmitter","SubscriptionsHandler","VideoPlayerExperiments","VideoPlayerHTML5Experiments","clearInterval","performanceNow","setInterval"],(function a(b,c,d,e,f,g){var h,i;h=babelHelpers.inherits(j,c("EventEmitter"));i=h&&h.prototype;function j(k){"use strict";i.constructor.call(this);this.$MediaBufferingDetector1=k;this.$MediaBufferingDetector2=new(c("SubscriptionsHandler"))();if(!this.$MediaBufferingDetector1.paused)this.$MediaBufferingDetector7();this.$MediaBufferingDetector2.addSubscriptions(c("Event").listen(this.$MediaBufferingDetector1,"playing",function(){return this.$MediaBufferingDetector8()}.bind(this)),c("Event").listen(this.$MediaBufferingDetector1,"pause",function(){return this.$MediaBufferingDetector9()}.bind(this)),c("Event").listen(this.$MediaBufferingDetector1,"ended",function(){return this.$MediaBufferingDetector10()}.bind(this)),c("Event").listen(this.$MediaBufferingDetector1,"timeupdate",function(){return this.$MediaBufferingDetector11()}.bind(this)))}j.prototype.$MediaBufferingDetector12=function(){"use strict";var k=c("performanceNow")(),l=this.$MediaBufferingDetector1.currentTime,m=k-this.$MediaBufferingDetector5,n=l-this.$MediaBufferingDetector6,o=n*1e3,p=m-o,q=c("VideoPlayerHTML5Experiments").disableBufferAtEndOfPlayback&&this.$MediaBufferingDetector1.currentTime===this.$MediaBufferingDetector1.duration;if(m*.2<Math.abs(p)&&!q)this.$MediaBufferingDetector13();else this.$MediaBufferingDetector14();this.$MediaBufferingDetector15()};j.prototype.$MediaBufferingDetector15=function(){"use strict";this.$MediaBufferingDetector5=c("performanceNow")();this.$MediaBufferingDetector6=this.$MediaBufferingDetector1.currentTime};j.prototype.$MediaBufferingDetector7=function(){"use strict";if(this.$MediaBufferingDetector4)return;this.$MediaBufferingDetector15();this.$MediaBufferingDetector4=c("setInterval")(function(){return this.$MediaBufferingDetector12()}.bind(this),500)};j.prototype.$MediaBufferingDetector16=function(){"use strict";c("clearInterval")(this.$MediaBufferingDetector4);this.$MediaBufferingDetector4=null};j.prototype.$MediaBufferingDetector13=function(){"use strict";if(this.$MediaBufferingDetector3)return;this.$MediaBufferingDetector3=true;this.emit("bufferingStart")};j.prototype.$MediaBufferingDetector14=function(){"use strict";if(!this.$MediaBufferingDetector3)return;this.$MediaBufferingDetector3=false;this.emit("bufferingEnd")};j.prototype.$MediaBufferingDetector8=function(){"use strict";this.$MediaBufferingDetector14();this.$MediaBufferingDetector7()};j.prototype.$MediaBufferingDetector9=function(){"use strict";this.$MediaBufferingDetector14();this.$MediaBufferingDetector16()};j.prototype.$MediaBufferingDetector10=function(){"use strict";this.$MediaBufferingDetector14();this.$MediaBufferingDetector16()};j.prototype.$MediaBufferingDetector11=function(){"use strict";if(!this.$MediaBufferingDetector1.paused){this.$MediaBufferingDetector14();this.$MediaBufferingDetector16();this.$MediaBufferingDetector7()}};j.prototype.destroy=function(){"use strict";if(c("VideoPlayerExperiments").fireBufferingEndEventOnDestroy)this.$MediaBufferingDetector14();this.$MediaBufferingDetector16();this.$MediaBufferingDetector2.release()};f.exports=j}),null);
__d("VideoPlaybackQuality",[],(function a(b,c,d,e,f,g){function h(i){"use strict";this.video=i}h.prototype.getDroppedFrames=function(){"use strict";var i=this.video;if(typeof i.getVideoPlaybackQuality==="function")return i.getVideoPlaybackQuality().droppedVideoFrames;var j=i.webkitDroppedFrameCount;if(typeof j==="number")return j;return 0};h.prototype.getTotalFrames=function(){"use strict";var i=this.video;if(typeof i.getVideoPlaybackQuality==="function")return i.getVideoPlaybackQuality().totalVideoFrames;var j=i.webkitDecodedFrameCount;if(typeof j==="number")return j;return 0};f.exports=h}),null);
__d("XLiveBroadcastCaptionsURIFetchAsyncController",["XController"],(function a(b,c,d,e,f,g){f.exports=c("XController").create("/live/broadcast/captions/uri/",{video_id:{type:"String"}})}),null);
__d("onCanPlayHTMLMediaElement",["invariant","EventListener","HTMLMediaElementReadyStates","setImmediate"],(function a(b,c,d,e,f,g,h){function i(k){return k>=c("HTMLMediaElementReadyStates").HAVE_FUTURE_DATA}function j(k,l){k instanceof window.HTMLMediaElement||h(0);if(i(k.readyState))c("setImmediate")(l);return c("EventListener").listen(k,"canplay",l)}j.once=function(k,l){var m=j(k,function(){if(!m)return;m.remove();m=null;for(var n=arguments.length,o=Array(n),p=0;p<n;p++)o[p]=arguments[p];l.apply(this,o)}.bind(this))};f.exports=j}),null);
__d("onLoadedMetadataHTMLMediaElement",["EventListener","HTMLMediaElementReadyStates","setImmediate"],(function a(b,c,d,e,f,g){function h(j){return j>=c("HTMLMediaElementReadyStates").HAVE_METADATA}function i(j,k){if(h(j.readyState))c("setImmediate")(k);return c("EventListener").listen(j,"loadedmetadata",k)}i.once=function(j,k){var l=i(j,function(){l.remove();for(var m=arguments.length,n=Array(m),o=0;o<m;o++)n[o]=arguments[o];k.apply(this,n)}.bind(this))};f.exports=i}),null);
__d("seekHTMLMediaElementTo",["EventListener","onLoadedMetadataHTMLMediaElement","setImmediate"],(function a(b,c,d,e,f,g){function h(i,j,k){if(i.currentTime==j)return k&&c("setImmediate")(k);try{i.currentTime=j}catch(l){}if(i.currentTime)var m=c("EventListener").listen(i,"seeked",function(){m.remove();k&&k()});else c("onLoadedMetadataHTMLMediaElement")(i,function(){i.currentTime=j;var m=c("EventListener").listen(i,"seeked",function(){m.remove();k&&k()})})}f.exports=h}),null);
__d("VideoPlayerHTML5Api",["cx","Promise","regeneratorRuntime","AsyncRequest","AbstractVideoPlayerApi","Arbiter","Bootloader","CSS","ErrorUtils","DOM","DOMDimensions","Event","EventListener","HVideoPlayerMixin","StaleVideoMonitor","MediaBufferingDetector","Run","SubscriptionsHandler","VideoData","VideoFrameBuffer","VideoPlayerHTML5Experiments","VideoPlayerLoggerEvent","VideoPlayerMemLeakExperiments","VideoPlayerReason","VideoPlayerVersions","VideoPlayerShakaExperiments","VideoPlayerExperiments","VideoQualityClasses","XLiveBroadcastCaptionsURIFetchAsyncController","dangerouslyOverrideMediaElementEndedProperty","dispatchEvent","classWithMixins","isHTML5VideoImplementationUnavailable","getHTMLMediaElementMutedState","mixin","onCanPlayHTMLMediaElement","requireWeak","seekHTMLMediaElementTo","VideoPlaybackQuality","Deferred"],(function a(b,c,d,e,f,g,h){var i,j,k=null;c("requireWeak")("TVViewerConfigsManager",function(s){return k=s});function l(s){switch(s){case 1:return"The fetching process for the media resource was aborted by the user agent at the users request.";case 2:return"A network error of some description caused the user agent to stop fetching the media resource, after the resource was established to be usable.";case 3:return"An error of some description occurred while decoding the media resource, after the resource was established to be usable.";case 4:return"The media resource indicated by the src attribute was not suitable."}return null}function m(s){switch(s){case 1:return"MEDIA_ERR_ABORTED";case 2:return"MEDIA_ERR_NETWORK";case 3:return"MEDIA_ERR_DECODE";case 4:return"MEDIA_ERR_SRC_NOT_SUPPORTED";default:return"Error code "+s+" is unknown"}}var n=-1,o=.05,p=476,q=476;i=babelHelpers.inherits(r,c("classWithMixins")(c("AbstractVideoPlayerApi"),c("mixin")(c("HVideoPlayerMixin"))));j=i&&i.prototype;function r(s,t){"use strict";j.constructor.call(this);this.getDebug=function(){return{VideoPlayerHTML5Shaka:this.$VideoPlayerHTML5Api36}}.bind(this);this.$VideoPlayerHTML5Api35=s;this.$VideoPlayerHTML5Api15=this.$VideoPlayerHTML5Api35.id;this.$VideoPlayerHTML5Api57=new(c("VideoPlaybackQuality"))(this.$VideoPlayerHTML5Api35);this.preventSeekLoggingInMixin=c("VideoPlayerShakaExperiments").improveRebufferLogging;var u=this.$VideoPlayerHTML5Api59();this.$VideoPlayerHTML5Api51=u.width;this.$VideoPlayerHTML5Api14=u.height;if(t)this.$VideoPlayerHTML5Api9=t;else this.$VideoPlayerHTML5Api9=JSON.parse(this.$VideoPlayerHTML5Api35.getAttribute("data-config"));this.$VideoPlayerHTML5Api5=new(c("MediaBufferingDetector"))(this.$VideoPlayerHTML5Api35);this.$VideoPlayerHTML5Api5.addListener("bufferingStart",function(){return this.$VideoPlayerHTML5Api60()}.bind(this));this.$VideoPlayerHTML5Api5.addListener("bufferingEnd",function(){return this.$VideoPlayerHTML5Api61()}.bind(this));this.$VideoPlayerHTML5Api24=n;this.$VideoPlayerHTML5Api26=c("getHTMLMediaElementMutedState")(this.$VideoPlayerHTML5Api35);this.$VideoPlayerHTML5Api49=this.$VideoPlayerHTML5Api35.volume;this.$VideoPlayerHTML5Api25=false;this.$VideoPlayerHTML5Api22=null;this.$VideoPlayerHTML5Api30=false;this.$VideoPlayerHTML5Api3=false;this.$VideoPlayerHTML5Api32=this.$VideoPlayerHTML5Api35.getAttribute("preload")=="auto";this.$VideoPlayerHTML5Api33=null;this.$VideoPlayerHTML5Api37=new(c("StaleVideoMonitor"))(this.$VideoPlayerHTML5Api35);this.$VideoPlayerHTML5Api37.addListener("stale",function(w,x){return this.$VideoPlayerHTML5Api62(w,x)}.bind(this));this.$VideoPlayerHTML5Api12=false;this.$VideoPlayerHTML5Api40=false;if(this.$VideoPlayerHTML5Api9.lazyPreload)if(this.$VideoPlayerHTML5Api9.onafterloadRegister)c("Run").onAfterLoad(function(){return this.$VideoPlayerHTML5Api35.setAttribute("preload",this.$VideoPlayerHTML5Api9.lazyPreload)}.bind(this));else this.$VideoPlayerHTML5Api35.setAttribute("preload",this.$VideoPlayerHTML5Api9.lazyPreload);this.$VideoPlayerHTML5Api11=this.$VideoPlayerHTML5Api9.disableNativeControls;this.$VideoPlayerHTML5Api43=this.$VideoPlayerHTML5Api9.subtitlesActive;this.$VideoPlayerHTML5Api63();this.preventPauseLoggingInMixin=false;this.$VideoPlayerHTML5Api41=new(c("SubscriptionsHandler"))();this.$VideoPlayerHTML5Api64();this.$VideoPlayerHTML5Api20=this.$VideoPlayerHTML5Api9.useRateLimited;this.$VideoPlayerHTML5Api65(false);var v=c("VideoQualityClasses").indexOf("hd");this.$VideoPlayerHTML5Api19=this.$VideoPlayerHTML5Api9.minQuality!==null&&c("VideoQualityClasses").indexOf(this.$VideoPlayerHTML5Api9.minQuality)>=v;this.$VideoPlayerHTML5Api27=this.$VideoPlayerHTML5Api9.minQuality;this.$VideoPlayerHTML5Api28=this.$VideoPlayerHTML5Api9.maxQuality;this.$VideoPlayerHTML5Api2=this.$VideoPlayerHTML5Api9.accessToken;this.$VideoPlayerHTML5Api38=this.$VideoPlayerHTML5Api9.startTimestamp;this.$VideoPlayerHTML5Api34=o;this.$VideoPlayerHTML5Api4=this.$VideoPlayerHTML5Api9.autoFullscreenHD;this.switchVideo(0);this.initLogger(this.$VideoPlayerHTML5Api66.bind(this),this.$VideoPlayerHTML5Api9.useEventTime);this.$VideoPlayerHTML5Api67();this.$VideoPlayerHTML5Api31=null;this.$VideoPlayerHTML5Api52=false;this.$VideoPlayerHTML5Api53=false;this.$VideoPlayerHTML5Api54=this.$VideoPlayerHTML5Api9.unloadShouldCancelPendingRequest}r.prototype.getAdClientToken=function(){"use strict";this.$VideoPlayerHTML5Api9.ad_client_token};r.prototype.$VideoPlayerHTML5Api62=function(s,t){"use strict";this.$VideoPlayerHTML5Api66(c("VideoPlayerLoggerEvent").STALE,{stale_detect_time_delta:s,stale_video_current_time_delta:t});if(c("VideoPlayerExperiments").showStaleOverlayOnVideoNodeStaled)this.emit("videoNodeStaled")};r.prototype.$VideoPlayerHTML5Api60=function(){"use strict";this.emit("buffering")};r.prototype.$VideoPlayerHTML5Api61=function(){"use strict";this.emit("buffered")};r.prototype.$VideoPlayerHTML5Api68=function(){"use strict";this.emit("streamInterrupted");this.$VideoPlayerHTML5Api52=true};r.prototype.$VideoPlayerHTML5Api69=function(){"use strict";this.emit("streamResumed");this.$VideoPlayerHTML5Api52=false};r.prototype.isStreamInterrupted=function(){"use strict";return this.$VideoPlayerHTML5Api52};r.prototype.getVideoID=function(){"use strict";if(this.$VideoPlayerHTML5Api10)return this.$VideoPlayerHTML5Api10.getVideoID();return this.$VideoPlayerHTML5Api9.video_id};r.prototype.getDroppedFrames=function(){"use strict";return this.$VideoPlayerHTML5Api57.getDroppedFrames()};r.prototype.getTotalFrames=function(){"use strict";return this.$VideoPlayerHTML5Api57.getTotalFrames()};r.prototype.getDOMElement=function(){"use strict";return this.$VideoPlayerHTML5Api35};r.prototype.getVideoElement=function(){"use strict";return this.$VideoPlayerHTML5Api35};r.prototype.getSubscriptions=function(){"use strict";return this.$VideoPlayerHTML5Api41};r.onImplementationReady=function(s,t){"use strict";t()};r.prototype.destroy=function(s){"use strict";if(this.$VideoPlayerHTML5Api12)return;this.$VideoPlayerHTML5Api12=true;this.$VideoPlayerHTML5Api70();if(c("VideoPlayerMemLeakExperiments").clear_handlers_on_destroy)this.$VideoPlayerHTML5Api5.destroy();if(c("VideoPlayerHTML5Experiments").destroyWithoutStillFrame)this.abortLoadingWithoutStillFrame();else this.abortLoading(s);this.$VideoPlayerHTML5Api71();if(this.$VideoPlayerHTML5Api72)c("DOM").remove(this.$VideoPlayerHTML5Api72);if(c("VideoPlayerMemLeakExperiments").clear_handlers_on_destroy)this.$VideoPlayerHTML5Api41.release()};r.prototype.getVideoInfo=function(){"use strict";if(!this.$VideoPlayerHTML5Api10)return null;var s=this.getAvailableVideoQualities();return{isHD:s&&this.getSelectedVideoQuality()==s[s.length-1],streamType:this.$VideoPlayerHTML5Api10.getStreamType(),hasHD:s&&s.length>1,areSubtitlesActive:this.areSubtitlesActive(),isMuted:this.isMuted(),isPlaying:this.$VideoPlayerHTML5Api18,playbackDuration:this.getPlaybackDuration(),volume:this.getVolume(),resourceUrl:this.$VideoPlayerHTML5Api36?"DASH manifest":this.$VideoPlayerHTML5Api73(),hasSubtitles:this.hasSubtitles(),hasUnlimitedSrc:this.$VideoPlayerHTML5Api10.hasRateLimit(),useUnlimitedSrc:!this.$VideoPlayerHTML5Api20,projection:this.getVideoProjection(),tagSD:this.$VideoPlayerHTML5Api10.getSDTag(),tagHD:this.$VideoPlayerHTML5Api10.getHDTag(),isLiveStream:this.$VideoPlayerHTML5Api10.isLiveStream(),liveManifestUrl:this.$VideoPlayerHTML5Api10.isLiveStream()?this.$VideoPlayerHTML5Api10.getLiveManifestUrl():null}};r.isImplementationUnavailable=function(s){"use strict";return c("isHTML5VideoImplementationUnavailable")(s)};r.prototype.pause=function(s){"use strict";this.$VideoPlayerHTML5Api22=s;if(s==="unloaded"&&!this.isPaused()){var t=this.$VideoPlayerHTML5Api54||c("VideoPlayerHTML5Experiments").unloadShouldCancelPendingRequest;if(t&&this.$VideoPlayerHTML5Api17)this.$VideoPlayerHTML5Api66(c("VideoPlayerLoggerEvent").CANCELLED_REQUESTED_PLAYING,this.addWatchTimeData({reason:"unloaded"}));else this.$VideoPlayerHTML5Api66(c("VideoPlayerLoggerEvent").PAUSED,this.addWatchTimeData({reason:"unloaded"}));this.$VideoPlayerHTML5Api53=true;this.preventPauseLoggingInMixin=true}this.$VideoPlayerHTML5Api74();if(this.$VideoPlayerHTML5Api36)this.$VideoPlayerHTML5Api36.pause();else this.$VideoPlayerHTML5Api35.pause()};r.prototype.$VideoPlayerHTML5Api65=function(s){"use strict";this.$VideoPlayerHTML5Api17=s};r.prototype.preload=function(){"use strict";if(!this.$VideoPlayerHTML5Api32){if(this.$VideoPlayerHTML5Api1)this.$VideoPlayerHTML5Api75();this.$VideoPlayerHTML5Api32=true;this.$VideoPlayerHTML5Api35.setAttribute("preload","auto")}};r.prototype.isPreloading=function(){"use strict";return this.$VideoPlayerHTML5Api32};r.prototype.play=function(s){"use strict";if(!this.$VideoPlayerHTML5Api48)this.$VideoPlayerHTML5Api48=s;this.$VideoPlayerHTML5Api23=s;if(!this.isPaused()){if(c("VideoPlayerHTML5Experiments").shouldDispatchPlayingEvent){c("dispatchEvent")(this.$VideoPlayerHTML5Api35,"play");setTimeout(function(){return c("dispatchEvent")(this.$VideoPlayerHTML5Api35,"playing")}.bind(this),0)}else this.$VideoPlayerHTML5Api76();return}this.$VideoPlayerHTML5Api30=true;this.$VideoPlayerHTML5Api65(true);if(this.$VideoPlayerHTML5Api1){c("dispatchEvent")(this.$VideoPlayerHTML5Api35,"play");this.$VideoPlayerHTML5Api75();this.$VideoPlayerHTML5Api3=true;return}this.$VideoPlayerHTML5Api77()};r.prototype.$VideoPlayerHTML5Api74=function(){"use strict";if(this.$VideoPlayerHTML5Api3&&this.isPaused())c("dispatchEvent")(this.$VideoPlayerHTML5Api35,"pause");this.$VideoPlayerHTML5Api65(false);this.$VideoPlayerHTML5Api78()};r.prototype.$VideoPlayerHTML5Api78=function(){"use strict";this.$VideoPlayerHTML5Api30=false;this.$VideoPlayerHTML5Api3=false};r.prototype.$VideoPlayerHTML5Api79=function(){"use strict";this.$VideoPlayerHTML5Api35.setAttribute("preload","auto");this.$VideoPlayerHTML5Api32=true;this.$VideoPlayerHTML5Api35.load();this.$VideoPlayerHTML5Api35.muted=this.$VideoPlayerHTML5Api26};r.prototype.seek=function(s){"use strict";this.allowNextSeekInMixin();if(c("VideoPlayerShakaExperiments").currentTimeDuringReadyStateZeroThrows){if(this.$VideoPlayerHTML5Api35.readyState!==0)this.$VideoPlayerHTML5Api35.currentTime=s}else try{this.$VideoPlayerHTML5Api35.currentTime=s}catch(t){}};r.prototype.removeRotation=function(){"use strict";c("CSS").removeClass(this.$VideoPlayerHTML5Api35,"_56jr");c("CSS").removeClass(this.$VideoPlayerHTML5Api35,"_56js");c("CSS").removeClass(this.$VideoPlayerHTML5Api35,"_56jt");this.$VideoPlayerHTML5Api35.style.marginLeft="";this.$VideoPlayerHTML5Api35.style.marginTop="";this.$VideoPlayerHTML5Api35.style.width="";this.$VideoPlayerHTML5Api35.style.height=""};r.prototype.applyRotation=function(s){"use strict";if(!s)return;c("CSS").conditionClass(this.$VideoPlayerHTML5Api35,"_56jr",s==90);c("CSS").conditionClass(this.$VideoPlayerHTML5Api35,"_56js",s==180);c("CSS").conditionClass(this.$VideoPlayerHTML5Api35,"_56jt",s==270);if(s==180)return;var t=this.$VideoPlayerHTML5Api14,u=this.$VideoPlayerHTML5Api51,v=(t-u)/2,w=(u-t)/2;this.$VideoPlayerHTML5Api35.style.marginLeft=w+"px";this.$VideoPlayerHTML5Api35.style.marginTop=v+"px";this.$VideoPlayerHTML5Api35.style.height=u+"px";this.$VideoPlayerHTML5Api35.style.width=t+"px"};r.prototype.switchVideo=function(s){"use strict";if(!this.$VideoPlayerHTML5Api9.videoData||this.$VideoPlayerHTML5Api9.videoData.length<=s)return;var t=new(c("VideoData"))(this.$VideoPlayerHTML5Api9.videoData[s]);this.$VideoPlayerHTML5Api10=t;if((t.hasDashManifest()||t.isLiveStream())&&this.$VideoPlayerHTML5Api9.VideoPlayerHTML5Shaka&&this.$VideoPlayerHTML5Api9.VideoPlayerHTML5Shaka.isSupported()&&!this.$VideoPlayerHTML5Api9.fallbackSources){this.$VideoPlayerHTML5Api5.destroy();var u,v;this.$VideoPlayerHTML5Api16=this.$VideoPlayerHTML5Api9.isHighlightEnabled&&t.hasHighlightsManifest();u=t.getDashManifest();if(t.isLiveStream())v=t.getLiveManifestUrl();var w=new this.$VideoPlayerHTML5Api9.VideoPlayerHTML5Shaka(this.$VideoPlayerHTML5Api35,t.getDashPrefetchedRepresentationIDs(),{accessToken:this.$VideoPlayerHTML5Api2,minPlayQuality:this.$VideoPlayerHTML5Api27,maxPlayQuality:this.$VideoPlayerHTML5Api28,width:this.$VideoPlayerHTML5Api51,height:this.$VideoPlayerHTML5Api14,manifest:u,manifestUrl:v,isLive:t.isLiveStream(),startTimestamp:this.$VideoPlayerHTML5Api38,videoID:this.getVideoID(),playerOrigin:this.$VideoPlayerHTML5Api9.playerOrigin,playerSuborigin:this.$VideoPlayerHTML5Api9.playerSuborigin,isSpherical:this.$VideoPlayerHTML5Api9.isSpherical,getSource:this.$VideoPlayerHTML5Api9.getSource,vpcPlayingStateEmitter:this.$VideoPlayerHTML5Api9.vpcPlayingStateEmitter});w.addListener("bufferingStart",function(){return this.$VideoPlayerHTML5Api60()}.bind(this));w.addListener("bufferingEnd",function(){return this.$VideoPlayerHTML5Api61()}.bind(this));w.addListener("tracksChanged",function(){return this.emit("qualityChange")}.bind(this));w.addListener("streamInterrupted",function(){return this.$VideoPlayerHTML5Api68()}.bind(this));w.addListener("streamResumed",function(){return this.$VideoPlayerHTML5Api69()}.bind(this));w.addListener("adaptation",function(y){var z=y.reason;this.$VideoPlayerHTML5Api66(c("VideoPlayerLoggerEvent").QUALITY_CHANGE,{reason:z});this.emit("qualityChange")}.bind(this));w.addListener("representation_ended",function(y){this.logRepresentationEnded(y)}.bind(this));w.addListener("debug/shakaEvent",function(y){return this.emit("debug/shakaEvent",y)}.bind(this));w.addListener("error",function(y){return this.$VideoPlayerHTML5Api80(y)}.bind(this));w.addListener("cea608CaptionsParsed",function(y){if(!this.$VideoPlayerHTML5Api58)this.$VideoPlayerHTML5Api58=this.$VideoPlayerHTML5Api81();this.$VideoPlayerHTML5Api58.then(function(z){z.appendFragments(y);this.$VideoPlayerHTML5Api82()}.bind(this))["catch"](function(z){c("ErrorUtils").reportError(z)})}.bind(this));this.$VideoPlayerHTML5Api36=w}else{var x=this.$VideoPlayerHTML5Api73();if(x)this.$VideoPlayerHTML5Api35.src=x;if(this.$VideoPlayerHTML5Api38)this.seek(this.$VideoPlayerHTML5Api38)}this.$VideoPlayerHTML5Api42&&this.$VideoPlayerHTML5Api42.removeSubtitles();if(t.hasSubtitles())this.$VideoPlayerHTML5Api83(this.$VideoPlayerHTML5Api10.getSubtitlesSrc());this.removeRotation();this.applyRotation(t.getRotation())};r.prototype.switchToStreamType=function(s){"use strict"};r.prototype.replaceVideoDataFromURL=function(s){"use strict"};r.prototype.getDashAudioConfigurationDebug=function(){"use strict";return this.$VideoPlayerHTML5Api36?this.$VideoPlayerHTML5Api36.getDebug().VideoSource.getMpAudioConfigDebug():"none"};r.prototype.getAudioStreamInfoIDDebug=function(){"use strict";if(this.$VideoPlayerHTML5Api36){var s=this.$VideoPlayerHTML5Api36.getDebug().VideoSource.getAudioTracks();for(var t=s,u=Array.isArray(t),v=0,t=u?t:t[typeof Symbol==="function"?Symbol.iterator:"@@iterator"]();;){var w;if(u){if(v>=t.length)break;w=t[v++]}else{v=t.next();if(v.done)break;w=v.value}var x=w;if(x.active)return x.streamInfoID}}return null};r.prototype.getCurrentlyPlayingStreamInfoID=function(){"use strict";var s=this.getCurrentTimePosition();if(this.$VideoPlayerHTML5Api36&&s!=null)return this.$VideoPlayerHTML5Api36.getStreamInfoIDForTimePosition(s);return null};r.prototype.getLocalEstimator=function(){"use strict";if(this.$VideoPlayerHTML5Api36)return this.$VideoPlayerHTML5Api36.getLocalEstimator();return null};r.prototype.unmute=function(){"use strict";if(this.$VideoPlayerHTML5Api1){this.$VideoPlayerHTML5Api1.mutedState=false;this.$VideoPlayerHTML5Api26=false;this.emit("unmuteVideo");return}this.$VideoPlayerHTML5Api35.muted=false};r.prototype.mute=function(){"use strict";if(this.$VideoPlayerHTML5Api1){this.$VideoPlayerHTML5Api1.mutedState=true;this.$VideoPlayerHTML5Api26=true;this.emit("muteVideo");return}this.$VideoPlayerHTML5Api35.muted=true};r.prototype.setRotation=function(s){"use strict";this.removeRotation();this.applyRotation(s)};r.prototype.setDimensions=function(s,t){"use strict";this.removeRotation();this.$VideoPlayerHTML5Api51=s;this.$VideoPlayerHTML5Api14=t;this.applyRotation(this.$VideoPlayerHTML5Api10.getRotation());if(this.$VideoPlayerHTML5Api39)this.$VideoPlayerHTML5Api39.updateDimensions(s,t);if(this.$VideoPlayerHTML5Api36)this.$VideoPlayerHTML5Api36.setDimensions(s,t);if(this.$VideoPlayerHTML5Api42)this.$VideoPlayerHTML5Api42.setDimensions(s);this.emit("dimensionsChange",s,t)};r.prototype.setVideoStreamOffset=function(s){"use strict";if(this.$VideoPlayerHTML5Api36)this.$VideoPlayerHTML5Api36.setVideoStreamOffset(s)};r.prototype.$VideoPlayerHTML5Api84=function(){"use strict";this.$VideoPlayerHTML5Api35.controls=!this.$VideoPlayerHTML5Api11};r.prototype.$VideoPlayerHTML5Api63=function(){"use strict";this.$VideoPlayerHTML5Api35.controls=this.$VideoPlayerHTML5Api35.controls&&!this.$VideoPlayerHTML5Api11};r.prototype.$VideoPlayerHTML5Api64=function(){"use strict";this.$VideoPlayerHTML5Api13=c("EventListener").listen(this.$VideoPlayerHTML5Api35,"error",this.$VideoPlayerHTML5Api85.bind(this));if(!c("VideoPlayerMemLeakExperiments").clear_html5_error_handler)this.$VideoPlayerHTML5Api41.addSubscriptions(this.$VideoPlayerHTML5Api13);this.$VideoPlayerHTML5Api41.addSubscriptions(c("EventListener").listen(this.$VideoPlayerHTML5Api35,"playing",this.$VideoPlayerHTML5Api86.bind(this)),c("EventListener").listen(this.$VideoPlayerHTML5Api35,"play",this.$VideoPlayerHTML5Api76.bind(this)),c("EventListener").listen(this.$VideoPlayerHTML5Api35,"ended",this.$VideoPlayerHTML5Api87.bind(this)),c("EventListener").listen(this.$VideoPlayerHTML5Api35,"waiting",this.$VideoPlayerHTML5Api88.bind(this)),c("EventListener").listen(this.$VideoPlayerHTML5Api35,"pause",this.$VideoPlayerHTML5Api89.bind(this)),c("EventListener").listen(this.$VideoPlayerHTML5Api35,"volumechange",this.$VideoPlayerHTML5Api90.bind(this)),c("EventListener").listen(this.$VideoPlayerHTML5Api35,"mousedown",this.$VideoPlayerHTML5Api91.bind(this)),c("EventListener").listen(this.$VideoPlayerHTML5Api35,"mouseup",this.$VideoPlayerHTML5Api92.bind(this)),c("EventListener").listen(this.$VideoPlayerHTML5Api35,"timeupdate",this.$VideoPlayerHTML5Api93.bind(this)),c("EventListener").listen(this.$VideoPlayerHTML5Api35,"click",this.$VideoPlayerHTML5Api94.bind(this)),c("EventListener").listen(this.$VideoPlayerHTML5Api35,"loadedmetadata",this.$VideoPlayerHTML5Api95.bind(this)),c("EventListener").listen(this.$VideoPlayerHTML5Api35,"progress",this.$VideoPlayerHTML5Api96.bind(this)),c("EventListener").listen(this.$VideoPlayerHTML5Api35,"seeked",this.$VideoPlayerHTML5Api97.bind(this)),c("EventListener").capture(this.$VideoPlayerHTML5Api35.parentNode,"pause",this.$VideoPlayerHTML5Api98.bind(this)))};r.prototype.$VideoPlayerHTML5Api99=function(s){"use strict";this.preventPauseLoggingInMixin=false;s.preventDefault();s.stopPropagation()};r.prototype.$VideoPlayerHTML5Api98=function(s){"use strict";if(s.target!==this.$VideoPlayerHTML5Api35)return;if(!this.$VideoPlayerHTML5Api35.ended){this.$VideoPlayerHTML5Api53&&this.$VideoPlayerHTML5Api99(s);s.lastPauseReason=this.$VideoPlayerHTML5Api22}this.$VideoPlayerHTML5Api53=false};r.prototype.$VideoPlayerHTML5Api96=function(){"use strict";var s=this.$VideoPlayerHTML5Api35.buffered,t=0,u=0,v=s.length;while(v-->0){var w=s.end(v),x=s.start(v);if(x<=this.$VideoPlayerHTML5Api35.currentTime){u=x;t=w-x;break}}this.$VideoPlayerHTML5Api67();this.$VideoPlayerHTML5Api100("flash/updateBuffer",{duration:t,offset:u})};r.prototype.$VideoPlayerHTML5Api70=function(){"use strict";clearTimeout(this.$VideoPlayerHTML5Api29)};r.prototype.$VideoPlayerHTML5Api67=function(){"use strict";this.$VideoPlayerHTML5Api70();if(this.$VideoPlayerHTML5Api35.networkState===this.$VideoPlayerHTML5Api35.NETWORK_LOADING)this.$VideoPlayerHTML5Api29=setTimeout(function(){return this.$VideoPlayerHTML5Api101()}.bind(this),r.networkTimeout)};r.prototype.$VideoPlayerHTML5Api101=function(){"use strict";var s=this.$VideoPlayerHTML5Api35.buffered,t=0;for(var u=0;u<s.length;u++){var v=s.start(u),w=s.end(u);t+=w-v}this.$VideoPlayerHTML5Api66(c("VideoPlayerLoggerEvent").NETWORK_TIMEOUT,{buffered:t})};r.prototype.$VideoPlayerHTML5Api93=function(){"use strict";var s;if(this.$VideoPlayerHTML5Api1)s=this.$VideoPlayerHTML5Api1.currentTime;else s=this.$VideoPlayerHTML5Api35.currentTime;this.$VideoPlayerHTML5Api100("flash/updateStatus",{position:+s.toFixed(3)})};r.prototype.$VideoPlayerHTML5Api94=function(s){"use strict";if(s.button!==0)return;this.emit("clickVideo");s.preventDefault()};r.prototype.isPaused=function(){"use strict";if(c("VideoPlayerHTML5Experiments").fixIE11EndedPausedState)return this.$VideoPlayerHTML5Api35.paused||this.$VideoPlayerHTML5Api35.ended;return this.$VideoPlayerHTML5Api35.paused};r.prototype.$VideoPlayerHTML5Api102=function(){"use strict";var s=this.$VideoPlayerHTML5Api35.buffered;return s.length>0&&s.start(0)===0&&s.end(0)===this.$VideoPlayerHTML5Api35.duration};r.prototype.$VideoPlayerHTML5Api88=function(){"use strict";if(!this.$VideoPlayerHTML5Api102()){this.$VideoPlayerHTML5Api50=true;this.$VideoPlayerHTML5Api100("flash/buffering")}};r.prototype.setVolume=function(s){"use strict";this.$VideoPlayerHTML5Api35.volume=s};r.prototype.$VideoPlayerHTML5Api90=function(){"use strict";if(this.$VideoPlayerHTML5Api35.muted!==this.$VideoPlayerHTML5Api26&&this.$VideoPlayerHTML5Api35.volume===this.$VideoPlayerHTML5Api49&&this.$VideoPlayerHTML5Api35.volume>0){this.$VideoPlayerHTML5Api26=this.$VideoPlayerHTML5Api35.muted;this.$VideoPlayerHTML5Api49=this.$VideoPlayerHTML5Api35.volume;if(!this.$VideoPlayerHTML5Api35.muted)this.$VideoPlayerHTML5Api100("flash/unmuteVideo");else this.$VideoPlayerHTML5Api100("flash/muteVideo")}else{this.$VideoPlayerHTML5Api26=this.$VideoPlayerHTML5Api35.muted;this.$VideoPlayerHTML5Api49=this.$VideoPlayerHTML5Api35.volume;this.$VideoPlayerHTML5Api100("flash/changeVolume",{volume:this.$VideoPlayerHTML5Api35.volume})}if(!this.$VideoPlayerHTML5Api35.muted)this.$VideoPlayerHTML5Api100("flash/turnOffAutoplay",{reason:"unmuted"})};r.prototype.$VideoPlayerHTML5Api91=function(s){"use strict";if(s.button===0)this.$VideoPlayerHTML5Api25=true};r.prototype.$VideoPlayerHTML5Api92=function(s){"use strict";if(s.button===0)this.$VideoPlayerHTML5Api25=false};r.prototype.$VideoPlayerHTML5Api86=function(){"use strict";this.$VideoPlayerHTML5Api65(false);if(this.$VideoPlayerHTML5Api50){this.$VideoPlayerHTML5Api50=false;this.$VideoPlayerHTML5Api100("flash/buffered")}};r.prototype.$VideoPlayerHTML5Api76=function(){"use strict";this.$VideoPlayerHTML5Api18=true;this.$VideoPlayerHTML5Api84();this.$VideoPlayerHTML5Api82();this.$VideoPlayerHTML5Api100("flash/beginPlayback",{position:+this.$VideoPlayerHTML5Api35.currentTime.toFixed(2),reason:this.$VideoPlayerHTML5Api23});this.$VideoPlayerHTML5Api67()};r.prototype.$VideoPlayerHTML5Api89=function(event){"use strict";if(this.$VideoPlayerHTML5Api35.ended||c("VideoPlayerExperiments").abortLoadingDecisioningLogic&&c("dangerouslyOverrideMediaElementEndedProperty").isEnded(event)){this.$VideoPlayerHTML5Api18=false;this.$VideoPlayerHTML5Api65(false);return}if(this.$VideoPlayerHTML5Api35.seeking&&this.$VideoPlayerHTML5Api22===c("VideoPlayerReason").SEEK)return;if(!c("VideoPlayerShakaExperiments").ignoreLeftButtonWhenPausing&&this.$VideoPlayerHTML5Api25)return;if(this.$VideoPlayerHTML5Api22===c("VideoPlayerReason").SEEK){this.$VideoPlayerHTML5Api22=null;return}if(this.$VideoPlayerHTML5Api22===null||this.$VideoPlayerHTML5Api22===c("VideoPlayerReason").USER)this.$VideoPlayerHTML5Api100("flash/turnOffAutoplay",{reason:"manually_paused"});this.$VideoPlayerHTML5Api22=null;this.$VideoPlayerHTML5Api18=false;this.$VideoPlayerHTML5Api65(false);this.$VideoPlayerHTML5Api63();this.$VideoPlayerHTML5Api100("flash/pausePlayback",{position:this.$VideoPlayerHTML5Api35.currentTime.toFixed(2)})};r.prototype.$VideoPlayerHTML5Api87=function(){"use strict";if(this.$VideoPlayerHTML5Api1)return;this.$VideoPlayerHTML5Api63();this.$VideoPlayerHTML5Api18=false;this.$VideoPlayerHTML5Api65(false);this.$VideoPlayerHTML5Api100("flash/finishPlayback");this.$VideoPlayerHTML5Api42&&this.$VideoPlayerHTML5Api42.hideSubtitles()};r.prototype.$VideoPlayerHTML5Api97=function(){"use strict";this.emit("seekEnd",{position:+this.$VideoPlayerHTML5Api35.currentTime.toFixed(3)})};r.prototype.getEstimatedBandwidth=function(){"use strict";if(this.$VideoPlayerHTML5Api36)if(this.$VideoPlayerHTML5Api9.VideoPlayerHTML5Shaka)return this.$VideoPlayerHTML5Api9.VideoPlayerHTML5Shaka.getEstimatedBandwidth();return null};r.prototype.$VideoPlayerHTML5Api95=function(){"use strict";this.$VideoPlayerHTML5Api100("flash/updateMetadata")};r.prototype.$VideoPlayerHTML5Api80=function(s){"use strict";this.emit("error",babelHelpers["extends"]({},s,{isPlayback:this.$VideoPlayerHTML5Api30}))};r.prototype.$VideoPlayerHTML5Api85=function(){"use strict";if(this.$VideoPlayerHTML5Api1)return;if(!this.$VideoPlayerHTML5Api35.error)return;var s=this.$VideoPlayerHTML5Api35.error,t=s.message;if(!t)t=l(s.code);this.emit("error",{error:m(s.code),isPlayback:this.$VideoPlayerHTML5Api30,message:t})};r.prototype.$VideoPlayerHTML5Api66=function(event,s){"use strict";if(event===c("VideoPlayerLoggerEvent").STARTED_PLAYING&&this.$VideoPlayerHTML5Api36)s.longest_init_response_time=this.$VideoPlayerHTML5Api36.getLongestInitResponseTime();s.projection=this.getVideoProjection();this.$VideoPlayerHTML5Api100("flash/logEvent",{logData:babelHelpers["extends"]({event:event},s)})};r.prototype.$VideoPlayerHTML5Api100=function(event,s){"use strict";c("Arbiter").inform(event,babelHelpers["extends"]({divID:this.$VideoPlayerHTML5Api15},s));this.emit(event.substr("flash/".length),s)};r.prototype.getLastPlayReason=function(){"use strict";return this.$VideoPlayerHTML5Api23};r.prototype.getVideoPlayReason=function(){"use strict";return this.$VideoPlayerHTML5Api48};r.prototype.isMuted=function(){"use strict";return this.$VideoPlayerHTML5Api26};r.prototype.setPlaybackRate=function(s){"use strict";if(this.$VideoPlayerHTML5Api36)this.$VideoPlayerHTML5Api36.setPlaybackRate(s);else this.$VideoPlayerHTML5Api35.playbackRate=s};r.prototype.getPlaybackDuration=function(){"use strict";if(this.$VideoPlayerHTML5Api1)return this.$VideoPlayerHTML5Api1.playbackDuration;return this.$VideoPlayerHTML5Api35.duration||0};r.prototype.getVolume=function(){"use strict";return this.$VideoPlayerHTML5Api35.volume};r.prototype.getCurrentTimePosition=function(){"use strict";return this.$VideoPlayerHTML5Api35.currentTime};r.prototype.$VideoPlayerHTML5Api73=function(){"use strict";if(this.$VideoPlayerHTML5Api9.fallbackSources)return this.$VideoPlayerHTML5Api19&&this.$VideoPlayerHTML5Api9.fallbackSources.HD?this.$VideoPlayerHTML5Api9.fallbackSources.HD:this.$VideoPlayerHTML5Api9.fallbackSources.SD;if(this.$VideoPlayerHTML5Api19&&this.$VideoPlayerHTML5Api10.hasHD())return this.$VideoPlayerHTML5Api103();else return this.$VideoPlayerHTML5Api104()};r.prototype.$VideoPlayerHTML5Api103=function(){"use strict";if(this.$VideoPlayerHTML5Api20)return this.$VideoPlayerHTML5Api10.getPlayableSrcRateLimitedHD();else return this.$VideoPlayerHTML5Api10.getPlayableSrcHD()};r.prototype.$VideoPlayerHTML5Api104=function(){"use strict";if(this.$VideoPlayerHTML5Api20)return this.$VideoPlayerHTML5Api10.getPlayableSrcRateLimitedSD();else return this.$VideoPlayerHTML5Api10.getPlayableSrcSD()};r.prototype.toggleSubtitles=function(){"use strict";this.$VideoPlayerHTML5Api43=!this.$VideoPlayerHTML5Api43;this.$VideoPlayerHTML5Api82();this.emit("toggleSubtitles")};r.prototype.hasSubtitles=function(){"use strict";return this.$VideoPlayerHTML5Api10.hasSubtitles()||!!this.$VideoPlayerHTML5Api36&&this.$VideoPlayerHTML5Api36.hasSubtitles()};r.prototype.areSubtitlesActive=function(){"use strict";return this.$VideoPlayerHTML5Api43};r.prototype.areHLSActive=function(){"use strict";return false};r.prototype.isRTMP=function(){"use strict";return false};r.prototype.setSubtitlesStyle=function(s,t,u,v){"use strict";this.$VideoPlayerHTML5Api44=s;this.$VideoPlayerHTML5Api45=t;this.$VideoPlayerHTML5Api46=u;this.$VideoPlayerHTML5Api47=v};r.prototype.$VideoPlayerHTML5Api82=function(){"use strict";if(this.$VideoPlayerHTML5Api36&&this.$VideoPlayerHTML5Api36.hasSubtitles())this.$VideoPlayerHTML5Api36.enableSubtitles(this.$VideoPlayerHTML5Api43);if(this.$VideoPlayerHTML5Api43)this.$VideoPlayerHTML5Api42&&this.$VideoPlayerHTML5Api42.showSubtitles();else this.$VideoPlayerHTML5Api42&&this.$VideoPlayerHTML5Api42.hideSubtitles()};r.prototype.$VideoPlayerHTML5Api105=function(){"use strict";if(this.$VideoPlayerHTML5Api18)this.$VideoPlayerHTML5Api82();this.emit("loadedSubtitles");this.$VideoPlayerHTML5Api42.setSubtitlesStyle(this.$VideoPlayerHTML5Api44,this.$VideoPlayerHTML5Api45,this.$VideoPlayerHTML5Api46,this.$VideoPlayerHTML5Api47)};r.prototype.$VideoPlayerHTML5Api83=function(s){"use strict";c("Bootloader").loadModules(["VideoPlayerHTML5Subtitles","VideoPlayerWebVttSubtitleStream"],function(t,u){if(this.$VideoPlayerHTML5Api42)this.$VideoPlayerHTML5Api42.removeSubtitles();var v=this.$VideoPlayerHTML5Api9.subtitleDrawer,w=new u(this.$VideoPlayerHTML5Api35,s);this.$VideoPlayerHTML5Api42=new t(this.$VideoPlayerHTML5Api35,w);this.$VideoPlayerHTML5Api42.setOnSubtitlesReady(function(){return this.$VideoPlayerHTML5Api105()}.bind(this));this.$VideoPlayerHTML5Api42.registerDrawer(v);this.$VideoPlayerHTML5Api42.loadSubtitles()}.bind(this),"VideoPlayerHTML5Api")};r.prototype.$VideoPlayerHTML5Api81=function(){"use strict";var s=new(c("Deferred"))();c("Bootloader").loadModules(["VideoPlayerHTML5Subtitles","VideoPlayerCea608SubtitleSource"],function(t,u){var v=new u(this.$VideoPlayerHTML5Api35);s.resolve(v);if(this.$VideoPlayerHTML5Api42)this.$VideoPlayerHTML5Api42.removeSubtitles();var w=this.$VideoPlayerHTML5Api9.subtitleDrawer;this.$VideoPlayerHTML5Api42=new t(this.$VideoPlayerHTML5Api35,v);this.$VideoPlayerHTML5Api42.setOnSubtitlesReady(function(){return this.$VideoPlayerHTML5Api105()}.bind(this));this.$VideoPlayerHTML5Api42.registerDrawer(w);this.$VideoPlayerHTML5Api42.loadSubtitles()}.bind(this),"VideoPlayerHTML5Api");return s.getPromise()};r.prototype.setStillFrameEnabled=function(s){"use strict";this.$VideoPlayerHTML5Api40=!s};r.prototype.$VideoPlayerHTML5Api59=function(){"use strict";if(c("VideoPlayerShakaExperiments").useDimensionsFallbacks){var s=c("DOMDimensions").getElementDimensions(this.$VideoPlayerHTML5Api35);if(s.width!==0&&s.height!==0)return s;else{var t=this.$VideoPlayerHTML5Api35.getAttribute("data-video-width"),u=this.$VideoPlayerHTML5Api35.getAttribute("data-video-height");return{width:Number(t)||this.$VideoPlayerHTML5Api35.width||p,height:Number(u)||this.$VideoPlayerHTML5Api35.height||q}}}else return c("DOMDimensions").getElementDimensions(this.$VideoPlayerHTML5Api35)};r.prototype.$VideoPlayerHTML5Api106=function(){"use strict";if(this.$VideoPlayerHTML5Api40)return;var s;if(!this.$VideoPlayerHTML5Api39){var t=this.$VideoPlayerHTML5Api59(),u=c("DOM").create("canvas",{width:t.width,height:t.height,className:"_3t5i"});c("DOM").insertAfter(this.$VideoPlayerHTML5Api35,u);this.$VideoPlayerHTML5Api39=s=new(c("VideoFrameBuffer"))(u,this.$VideoPlayerHTML5Api35)}else s=this.$VideoPlayerHTML5Api39;c("CSS").show(s.getDOMNode());s.updateFrameBuffer();c("CSS").hide(this.$VideoPlayerHTML5Api35)};r.prototype.$VideoPlayerHTML5Api71=function(){"use strict";if(!this.$VideoPlayerHTML5Api39)return;c("CSS").hide(this.$VideoPlayerHTML5Api39.getDOMNode());c("CSS").show(this.$VideoPlayerHTML5Api35)};r.prototype.$VideoPlayerHTML5Api75=function(){var s=arguments.length<=0||arguments[0]===undefined?null:arguments[0];"use strict";var t=this.$VideoPlayerHTML5Api1;if(!t)return;if(this.$VideoPlayerHTML5Api21)return;this.$VideoPlayerHTML5Api21=true;this.emit("restoringAfterAbort");this.allowNextSeekInMixin();var u=s==null?t.currentTime:s;if(this.$VideoPlayerHTML5Api36)this.$VideoPlayerHTML5Api36.reload(u);else{var v=this.$VideoPlayerHTML5Api73();if(v)this.$VideoPlayerHTML5Api35.src=v;this.$VideoPlayerHTML5Api35.preload=t.preload}c("seekHTMLMediaElementTo")(this.$VideoPlayerHTML5Api35,u,function(){this.$VideoPlayerHTML5Api71();if(this.$VideoPlayerHTML5Api1){this.$VideoPlayerHTML5Api35.muted=this.$VideoPlayerHTML5Api1.mutedState;this.$VideoPlayerHTML5Api1=null;this.emit("restoredAfterAbort")}this.$VideoPlayerHTML5Api21=false;c("onCanPlayHTMLMediaElement").once(this.$VideoPlayerHTML5Api35,function(){return this.$VideoPlayerHTML5Api77()}.bind(this))}.bind(this))};r.prototype.abortLoadingWithoutStillFrame=function(){"use strict";if(this.$VideoPlayerHTML5Api1)return;var s=this.$VideoPlayerHTML5Api35.currentTime,t=this.isMuted(),u=this.$VideoPlayerHTML5Api35.duration,v=this.isPaused(),w=this.$VideoPlayerHTML5Api35.preload;this.$VideoPlayerHTML5Api32=false;this.$VideoPlayerHTML5Api1={mutedState:t,currentTime:s,playbackDuration:u,preload:w};if(v&&this.$VideoPlayerHTML5Api18)c("dispatchEvent")(this.$VideoPlayerHTML5Api35,"pause");this.emit("abortedLoading");if(this.$VideoPlayerHTML5Api36){this.$VideoPlayerHTML5Api36.unload();return}this.$VideoPlayerHTML5Api35.preload="none";this.$VideoPlayerHTML5Api35.removeAttribute("src");this.$VideoPlayerHTML5Api35.load()};r.prototype.abortLoading=function(s){"use strict";if(this.$VideoPlayerHTML5Api1)return;s=s||{};if(!s.disableStillFrame)this.$VideoPlayerHTML5Api106();this.abortLoadingWithoutStillFrame()};r.prototype.setPreferredVideoQuality=function(s){"use strict";this.$VideoPlayerHTML5Api31=s;if(!this.$VideoPlayerHTML5Api10)return;if(this.$VideoPlayerHTML5Api36&&c("VideoPlayerShakaExperiments").improveRebufferLogging){this.$VideoPlayerHTML5Api36.setPreferredVideoQuality(s);return}if(!c("VideoPlayerHTML5Experiments").newStateChangeCalculation){this.$VideoPlayerHTML5Api66(c("VideoPlayerLoggerEvent").PAUSED,this.addWatchTimeData({reason:"toggle_hd"}));this.$VideoPlayerHTML5Api66(c("VideoPlayerLoggerEvent").REQUESTED_PLAYING,{reason:c("VideoPlayerReason").USER})}if(this.$VideoPlayerHTML5Api36&&!c("VideoPlayerShakaExperiments").improveRebufferLogging){this.$VideoPlayerHTML5Api36.setPreferredVideoQuality(s);return}this.$VideoPlayerHTML5Api19=!this.$VideoPlayerHTML5Api19;var t=this.$VideoPlayerHTML5Api35.currentTime,u=this.$VideoPlayerHTML5Api35.muted,v=this.$VideoPlayerHTML5Api35.volume,w=this.$VideoPlayerHTML5Api73();if(w)this.$VideoPlayerHTML5Api35.src=w;c("onCanPlayHTMLMediaElement").once(this.$VideoPlayerHTML5Api35,function(){this.$VideoPlayerHTML5Api35.currentTime=t;this.$VideoPlayerHTML5Api35.muted=u;this.$VideoPlayerHTML5Api35.volume=v;this.$VideoPlayerHTML5Api77();this.emit("qualityChange")}.bind(this));this.$VideoPlayerHTML5Api30=true;this.$VideoPlayerHTML5Api65(true);this.$VideoPlayerHTML5Api79()};r.prototype.unsetPreferredVideoQuality=function(){"use strict";this.$VideoPlayerHTML5Api31=null;if(this.$VideoPlayerHTML5Api36)this.$VideoPlayerHTML5Api36.unsetPreferredVideoQuality()};r.prototype.getPreferredVideoQuality=function(){"use strict";return this.$VideoPlayerHTML5Api31};r.prototype.getSelectedVideoQuality=function(){"use strict";if(this.$VideoPlayerHTML5Api36)return this.$VideoPlayerHTML5Api36.getSelectedVideoQuality();return this.$VideoPlayerHTML5Api19?"HD":"SD"};r.prototype.getAvailableVideoQualities=function(){"use strict";if(this.$VideoPlayerHTML5Api9.fallbackSources)return this.$VideoPlayerHTML5Api9.fallbackSources.HD?["SD","HD"]:["SD"];if(!this.$VideoPlayerHTML5Api10)return[];if(this.$VideoPlayerHTML5Api36)return this.$VideoPlayerHTML5Api36.getAvailableVideoQualities();return this.$VideoPlayerHTML5Api10.hasHD()?["SD","HD"]:["SD"]};r.prototype.getIsAbrEnabled=function(){"use strict";if(this.$VideoPlayerHTML5Api36)return this.$VideoPlayerHTML5Api36.getIsAbrEnabled();return false};r.prototype.canAutoSelectVideoQuality=function(){"use strict";if(this.$VideoPlayerHTML5Api36)return this.$VideoPlayerHTML5Api36.canAutoSelectVideoQuality();return false};r.prototype.setPreloadDisabled=function(s){"use strict";if(this.$VideoPlayerHTML5Api36)this.$VideoPlayerHTML5Api36.setPreloadDisabled(s)};r.prototype.restoreStreamBufferSize=function(){"use strict";if(this.$VideoPlayerHTML5Api36)this.$VideoPlayerHTML5Api36.restoreStreamBufferSize()};r.prototype.setSmartBufferAdjustmentEnabled=function(s){"use strict";if(this.$VideoPlayerHTML5Api36)this.$VideoPlayerHTML5Api36.setSmartBufferAdjustmentEnabled(s)};r.getPlayerVersion=function(){"use strict";return c("VideoPlayerVersions").PLEASANTVILLE};r.prototype.getVideoNodeSource=function(){"use strict";return this.$VideoPlayerHTML5Api35.src||""};r.prototype.getVideoProjection=function(){"use strict";if(this.$VideoPlayerHTML5Api33)return this.$VideoPlayerHTML5Api33;if(this.$VideoPlayerHTML5Api36){this.$VideoPlayerHTML5Api33=this.$VideoPlayerHTML5Api36.getVideoProjection();if(this.$VideoPlayerHTML5Api33)return this.$VideoPlayerHTML5Api33}this.$VideoPlayerHTML5Api33=this.$VideoPlayerHTML5Api10.getProjection();return this.$VideoPlayerHTML5Api33};r.prototype.$VideoPlayerHTML5Api107=function(){"use strict";this.$VideoPlayerHTML5Api7=this.getCurrentTimePosition()};r.prototype.$VideoPlayerHTML5Api108=function(){"use strict";if(this.$VideoPlayerHTML5Api7){this.$VideoPlayerHTML5Api34=this.$VideoPlayerHTML5Api7;this.$VideoPlayerHTML5Api7=null}else this.$VideoPlayerHTML5Api34=o};r.prototype.$VideoPlayerHTML5Api109=function(){"use strict";this.$VideoPlayerHTML5Api8=this.getVolume();this.$VideoPlayerHTML5Api6=this.isMuted()};r.prototype.$VideoPlayerHTML5Api110=function(){"use strict";if(this.$VideoPlayerHTML5Api8&&this.$VideoPlayerHTML5Api6){this.setVolume(this.$VideoPlayerHTML5Api8);if(this.$VideoPlayerHTML5Api6)this.mute();else this.unmute();this.$VideoPlayerHTML5Api8=null;this.$VideoPlayerHTML5Api6=null}};r.prototype.reloadDashManifest=function(){"use strict";var s=this.$VideoPlayerHTML5Api36;if(s){this.$VideoPlayerHTML5Api107();this.abortLoading();return this.$VideoPlayerHTML5Api111(function(){return s.refreshDashManifest()},this.$VideoPlayerHTML5Api34)}return c("Promise").reject()};r.prototype.reloadLiveVODHighlightsManifest=function(){"use strict";var s=this.$VideoPlayerHTML5Api36;if(s){this.$VideoPlayerHTML5Api107();this.abortLoading();return this.$VideoPlayerHTML5Api111(function(){return s.refreshLiveVODHighlightsManifest()},this.$VideoPlayerHTML5Api34)}return c("Promise").reject()};r.prototype.$VideoPlayerHTML5Api111=function(s,t){"use strict";return s().then(function(){this.$VideoPlayerHTML5Api75(t);this.$VideoPlayerHTML5Api108()}.bind(this))};r.prototype.isPlayingVODHighlights=function(){"use strict";if(this.$VideoPlayerHTML5Api36)return this.$VideoPlayerHTML5Api36.isPlayingLiveVODHighlights();return false};r.prototype.$VideoPlayerHTML5Api77=function(){"use strict";if(this.$VideoPlayerHTML5Api30){if(this.$VideoPlayerHTML5Api3)var s=c("EventListener").capture(this.$VideoPlayerHTML5Api35.parentNode,"play",function(w){c("Event").kill(w);s.remove()});if(this.$VideoPlayerHTML5Api35.ended&&!this.$VideoPlayerHTML5Api35.paused)c("dispatchEvent")(this.$VideoPlayerHTML5Api35,"play");var t=null;if(this.$VideoPlayerHTML5Api36){var u=this.$VideoPlayerHTML5Api36,v=k&&k.isReady()&&k.get("www_videos_shaka_wait_for_buffered");t=v?this.$VideoPlayerHTML5Api112():u.play()}else{if(c("VideoPlayerHTML5Experiments").preloadOnPlay)this.$VideoPlayerHTML5Api35.preload="auto";t=this.$VideoPlayerHTML5Api35.play()}if(t&&t["catch"])t["catch"](function(w){this.$VideoPlayerHTML5Api65(false)}.bind(this))}this.$VideoPlayerHTML5Api78()};r.prototype.isLiveVODHighlightsAvailable=function(){"use strict";return this.$VideoPlayerHTML5Api16};r.prototype.$VideoPlayerHTML5Api112=function s(){var t,u,v,w;return c("regeneratorRuntime").async(function x(y){while(1)switch(y.prev=y.next){case 0:"use strict";t=3;case 2:if(!(!this.$VideoPlayerHTML5Api12&&this.$VideoPlayerHTML5Api36)){y.next=13;break}if(!(this.$VideoPlayerHTML5Api35.buffered.length>0)){y.next=9;break}u=this.$VideoPlayerHTML5Api35.buffered.start(0);v=this.$VideoPlayerHTML5Api35.buffered.end(0);w=Math.round(v-u)>=t;if(!(w&&this.$VideoPlayerHTML5Api36)){y.next=9;break}return y.abrupt("return",this.$VideoPlayerHTML5Api36.play());case 9:y.next=11;return c("regeneratorRuntime").awrap(new(c("Promise"))(function(z){return setTimeout(z,100)}));case 11:y.next=2;break;case 13:return y.abrupt("return",null);case 14:case"end":return y.stop()}},null,this)};r.getStreamTypeFromConfig=function(s){"use strict";var t=new(c("VideoData"))(s.videoData[0]);return t.getStreamType()};r.getIsPlayingLiveFromConfig=function(s){"use strict";var t=new(c("VideoData"))(s.videoData[0]);return t.isLiveStream()};r.getIsFacecastAudioFromConfig=function(s){"use strict";var t=new(c("VideoData"))(s.videoData[0]);return t.isFacecastAudio()};r.getIsSpherical=function(s){"use strict";var t=new(c("VideoData"))(s.videoData[0]);return t.isSpherical()};r.networkTimeout=5e3;f.exports=r}),null);
__d("CoverVideoOffsetType",[],(function a(b,c,d,e,f,g){f.exports=Object.freeze({VERTICAL:0,HORIZONTAL:1})}),null);
__d("MediaController",["EventEmitter","Style"],(function a(b,c,d,e,f,g){var h,i;h=babelHelpers.inherits(j,c("EventEmitter"));i=h&&h.prototype;function j(){"use strict";i.constructor.call(this)}j.prototype.getRootNode=function(){"use strict";return this.$MediaController1};j.prototype.setDimensions=function(k,l){"use strict";var m=this.getRootNode();c("Style").apply(m,{width:k+"px",height:l+"px"})};j.prototype.getMediaID=function(){"use strict";return this.$MediaController2};j.prototype.isLiveVideo=function(){"use strict";return false};f.exports=j}),null);
__d("SphericalVideoPlayerEvents",[],(function a(b,c,d,e,f,g){f.exports={SET_RELATIVE_SPHERICAL_ORIENTATION:"setRelativeSphericalOrientation",SET_ABSOLUTE_SPHERICAL_ORIENTATION:"setAbsoluteSphericalOrientation",SET_FIELD_OF_VIEW:"setFieldOfView",SET_VIDEO_PROJECTION:"setVideoProjection",SET_STEREO_MODE:"setStereoMode"}}),null);
__d("VideoControllerPlayingStateEmitter",["EventEmitter","SubscriptionsHandler"],(function a(b,c,d,e,f,g){"use strict";var h,i;h=babelHelpers.inherits(j,c("EventEmitter"));i=h&&h.prototype;function j(k){i.constructor.call(this);this.$VideoControllerPlayingStateEmitter2=null;this.$VideoControllerPlayingStateEmitter3=k}j.prototype.enable=function(){this.$VideoControllerPlayingStateEmitter4().addSubscriptions(this.$VideoControllerPlayingStateEmitter3.addListener("stateChange",function(){var k=this.$VideoControllerPlayingStateEmitter2;this.$VideoControllerPlayingStateEmitter2=this.$VideoControllerPlayingStateEmitter3.getState();if(this.$VideoControllerPlayingStateEmitter2===k)return;this.$VideoControllerPlayingStateEmitter5(this.$VideoControllerPlayingStateEmitter2)}.bind(this)));this.$VideoControllerPlayingStateEmitter2=this.$VideoControllerPlayingStateEmitter3.getState();this.$VideoControllerPlayingStateEmitter5(this.$VideoControllerPlayingStateEmitter2)};j.prototype.setOnPlaying=function(k){this.$VideoControllerPlayingStateEmitter4().addSubscriptions(this.addListener("play",k))};j.prototype.setOnPaused=function(k){this.$VideoControllerPlayingStateEmitter4().addSubscriptions(this.addListener("pause",k))};j.prototype.disable=function(){this.$VideoControllerPlayingStateEmitter2=null;if(this.$VideoControllerPlayingStateEmitter1){this.$VideoControllerPlayingStateEmitter1.release();this.$VideoControllerPlayingStateEmitter1=null}};j.prototype.$VideoControllerPlayingStateEmitter4=function(){if(!this.$VideoControllerPlayingStateEmitter1)this.$VideoControllerPlayingStateEmitter1=new(c("SubscriptionsHandler"))();return this.$VideoControllerPlayingStateEmitter1};j.prototype.$VideoControllerPlayingStateEmitter5=function(k){if(k==="playing")this.emit("play");else if(k==="paused")this.emit("pause")};f.exports=j}),null);
__d("VideoPlayerAbrEvaluation",[],(function a(b,c,d,e,f,g){f.exports=Object.freeze({IDEAL:"ideal",CONSERVATIVE:"conservative",AGGRESSIVE:"aggressive",CONSERVATIVE_RESOLUTION_CONSTRAINED:"conservative_resolution_constrained"})}),null);
__d("VideoPlayerABRQualityTracker",["VideoPlayerAbrEvaluation"],(function a(b,c,d,e,f,g){function h(i){"use strict";this.$VideoPlayerABRQualityTracker1=i;this.$VideoPlayerABRQualityTracker2=null}h.prototype.setLastQualitySwitchReason=function(i){"use strict";this.$VideoPlayerABRQualityTracker2=i};h.prototype.getABREvaluation=function(){"use strict";var i=[];if(this.$VideoPlayerABRQualityTracker1)i=this.$VideoPlayerABRQualityTracker1.flushABREvaluationSet();var j=0,k=0,l=0,m=0,n=this.$VideoPlayerABRQualityTracker2;for(var o=0;o<i.length;o++)switch(i[o]){case c("VideoPlayerAbrEvaluation").IDEAL:j++;break;case c("VideoPlayerAbrEvaluation").CONSERVATIVE:k++;break;case c("VideoPlayerAbrEvaluation").AGGRESSIVE:l++;break;case c("VideoPlayerAbrEvaluation").CONSERVATIVE_RESOLUTION_CONSTRAINED:m++;break}return{idealSamples:j,conservativeSamples:k,aggressiveSamples:l,conservativeResolutionConstrainedSamples:m,lastQualitySwitchReason:n}};f.exports=h}),null);
__d("VideoPlayerFormats",[],(function a(b,c,d,e,f,g){f.exports=Object.freeze({INLINE:"inline",SNOWLIFT:"snowlift",PERMALINK:"permalink",CHANNEL:"channel",FULL_SCREEN:"full_screen",SOCIAL_PLAYER:"social_player",TV:"tv",MISC:"misc",WATCH_SCROLL:"watch_scroll",WATCH_SCROLL_APP_BACKGROUND:"watch_scroll_app_background",WATCH_AND_GO:"watch_and_go",WATCH_AND_BROWSE:"watch_and_browse",CANVAS:"canvas",TAHOE:"tahoe",FB_STORIES:"fb_stories"})}),null);
__d("VideoPlayerInitializationEvent",[],(function a(b,c,d,e,f,g){f.exports=Object.freeze({PLAYER_INITIALIZATION:"player_initialization",PLAYER_ALLOCATED:"player_allocated",REQUESTED_PLAYING:"requested_playing",STARTED_PLAYING:"started_playing",PLAYER_SENT_REQUEST:"player_sent",PLAYER_RECEIVED_FIRST_BYTE:"player_received_first_byte",BUFFER_READY:"buffer_ready",METADATA_READY:"metadata_ready"})}),null);
__d("VideoPlayerLoggerPlayerStates",[],(function a(b,c,d,e,f,g){f.exports={STARTED:"started",UNPAUSED:"unpaused"}}),null);
__d("VideoPlayerLogger",["invariant","Banzai","ErrorUtils","VideoPlayerExperiments","VideoPlayerHTML5Experiments","VideoPlayerInitializationEvent","VideoPlayerLoggerErrors","VideoPlayerLoggerErrorStates","VideoPlayerLoggerEvent","VideoPlayerLoggerFallbackReasons","VideoPlayerLoggerPlayerStates","VideoPlayerLoggerSource","ex","performanceAbsoluteNow"],(function a(b,c,d,e,f,g,h){"use strict";var i=c("VideoPlayerHTML5Experiments").useBanzaiVitalForLive,j=c("VideoPlayerHTML5Experiments").discerningAbandonStallLogging,k="video_player",l=5e3,m=function m(){return c("VideoPlayerHTML5Experiments").useMonotonicallyIncreasingTimers?c("performanceAbsoluteNow")():Date.now()};function n(o,p){this.$VideoPlayerLogger2=o;this.$VideoPlayerLogger3=null;this.$VideoPlayerLogger6={};this.$VideoPlayerLogger4=p;this.$VideoPlayerLogger8=0;this.$VideoPlayerLogger9=0;this.$VideoPlayerLogger7=[];this.$VideoPlayerLogger16=0;this.$VideoPlayerLogger17=0;this.$VideoPlayerLogger10=0;this.$VideoPlayerLogger22();this.$VideoPlayerLogger23()}n.prototype.updateSource=function(o){this.$VideoPlayerLogger2=o};n.prototype.getSource=function(){return this.$VideoPlayerLogger2};n.prototype.logEvent=function(event,o){o=babelHelpers["extends"]({},o,this.$VideoPlayerLogger4);o.initial_event=!Object.prototype.hasOwnProperty.call(this.$VideoPlayerLogger6,event);if(!Object.prototype.hasOwnProperty.call(o,"time_ms"))o.time_ms=m();if(!Object.prototype.hasOwnProperty.call(o,"time"))o.time=Math.round(o.time_ms/1e3);o.is_stalling=this.$VideoPlayerLogger24();o.error_user_info=this.$VideoPlayerLogger25(o.error_user_info);if(this.$VideoPlayerLogger3)Object.assign(o,this.$VideoPlayerLogger3);switch(event){case c("VideoPlayerInitializationEvent").PLAYER_INITIALIZATION:this.$VideoPlayerLogger5=o.time_ms;break;case c("VideoPlayerInitializationEvent").REQUESTED_PLAYING:case c("VideoPlayerInitializationEvent").STARTED_PLAYING:case c("VideoPlayerInitializationEvent").PLAYER_ALLOCATED:case c("VideoPlayerInitializationEvent").PLAYER_SENT_REQUEST:case c("VideoPlayerInitializationEvent").PLAYER_RECEIVED_FIRST_BYTE:case c("VideoPlayerInitializationEvent").BUFFER_READY:case c("VideoPlayerInitializationEvent").METADATA_READY:if(!o.initial_event)break;o.elapsed_time_since_init=Date.now()-this.$VideoPlayerLogger5;break}switch(event){case c("VideoPlayerLoggerEvent").QUALITY_CHANGE:case c("VideoPlayerLoggerEvent").PAUSED:case c("VideoPlayerLoggerEvent").FINISHED_PLAYING:if(this.$VideoPlayerLogger21){var p=this.$VideoPlayerLogger21,q=p.getABREvaluation();o.ideal_samples=q.idealSamples;o.conservative_samples=q.conservativeSamples;o.aggressive_samples=q.aggressiveSamples;o.conservative_resolution_constrained_samples=q.conservativeResolutionConstrainedSamples;o.last_quality_switch_reason=q.lastQualitySwitchReason;if(o.reason)p.setLastQualitySwitchReason(o.reason)}break}switch(event){case c("VideoPlayerLoggerEvent").REQUESTED_PLAYING:this.$VideoPlayerLogger22();this.$VideoPlayerLogger26();if(this.$VideoPlayerLogger6[c("VideoPlayerLoggerEvent").STARTED_PLAYING])o.state=c("VideoPlayerLoggerPlayerStates").UNPAUSED;else o.state=c("VideoPlayerLoggerPlayerStates").STARTED;break;case c("VideoPlayerLoggerEvent").STARTED_PLAYING:case c("VideoPlayerLoggerEvent").UNPAUSED:case c("VideoPlayerLoggerEvent").FINISHED_PLAYING:case c("VideoPlayerLoggerEvent").CANCELLED_REQUESTED_PLAYING:case c("VideoPlayerLoggerEvent").ERROR:case c("VideoPlayerLoggerEvent").PAUSED:case c("VideoPlayerLoggerEvent").REPRESENTATION_ENDED:case c("VideoPlayerLoggerEvent").HEART_BEAT:if(event===c("VideoPlayerLoggerEvent").ERROR&&c("VideoPlayerExperiments").disableStallLoggingForError)break;if(event==c("VideoPlayerLoggerEvent").REPRESENTATION_ENDED&&!this.$VideoPlayerLogger6[c("VideoPlayerLoggerEvent").STARTED_PLAYING])break;if(event===c("VideoPlayerLoggerEvent").HEART_BEAT&&(!this.$VideoPlayerLogger6[c("VideoPlayerLoggerEvent").STARTED_PLAYING]||!c("VideoPlayerHTML5Experiments").heartbeatUpdateWatchTimeV2||this.$VideoPlayerLogger24()))break;if(event===c("VideoPlayerLoggerEvent").HEART_BEAT)o.v2_heart_beat=true;if(event===c("VideoPlayerLoggerEvent").STARTED_PLAYING||event===c("VideoPlayerLoggerEvent").UNPAUSED){this.$VideoPlayerLogger10=o.time_ms;this.$VideoPlayerLogger27()}if(event===c("VideoPlayerLoggerEvent").ERROR&&o.state!==c("VideoPlayerLoggerErrorStates").PLAYBACK_FAILURE)break;if(event===c("VideoPlayerLoggerEvent").CANCELLED_REQUESTED_PLAYING)if(this.$VideoPlayerLogger6[c("VideoPlayerLoggerEvent").STARTED_PLAYING])o.state=c("VideoPlayerLoggerPlayerStates").UNPAUSED;else o.state=c("VideoPlayerLoggerPlayerStates").STARTED;this.$VideoPlayerLogger28();this.$VideoPlayerLogger29();if(event===c("VideoPlayerLoggerEvent").PAUSED||event===c("VideoPlayerLoggerEvent").FINISHED_PLAYING){if(j&&event===c("VideoPlayerLoggerEvent").FINISHED_PLAYING)this.$VideoPlayerLogger27();o.recent_stalls_count=this.$VideoPlayerLogger30()}this.$VideoPlayerLogger31();this.$VideoPlayerLogger32(o);this.$VideoPlayerLogger33(o);this.$VideoPlayerLogger23();if(j)this.$VideoPlayerLogger27();this.$VideoPlayerLogger22();break}var r={logData:o,event:event,scriptPath:this.$VideoPlayerLogger1,source:this.$VideoPlayerLogger2};if(!event)c("ErrorUtils").reportError(new Error(c("ex")("VideoPlayerLogger: Missing event name")),false);this.$VideoPlayerLogger6[event]=true;if(this.$VideoPlayerLogger2===c("VideoPlayerLoggerSource").ANIMATED_IMAGE_SHARE)return null;if(o.ad_client_token||i&&o.playback_is_live_streaming)c("Banzai").post(k,r,c("Banzai").VITAL);else if(c("VideoPlayerHTML5Experiments").useVitalForClosing&&(event===c("VideoPlayerLoggerEvent").PAUSED||event===c("VideoPlayerLoggerEvent").FINISHED_PLAYING||event===c("VideoPlayerLoggerEvent").HEART_BEAT))c("Banzai").post(k,r,c("Banzai").VITAL);else if(c("VideoPlayerHTML5Experiments").useVitalForOpening&&(event===c("VideoPlayerLoggerEvent").UNPAUSED||event===c("VideoPlayerLoggerEvent").STARTED_PLAYING))c("Banzai").post(k,r,c("Banzai").VITAL);else c("Banzai").post(k,r);return r};n.prototype.setScriptPath=function(o){this.$VideoPlayerLogger1=o};n.prototype.setFTData=function(o){this.$VideoPlayerLogger3=o};n.prototype.setABRQualityTracker=function(o){this.$VideoPlayerLogger21=o};n.prototype.startBuffering=function(o){this.$VideoPlayerLogger26(o)};n.prototype.endBuffering=function(){this.$VideoPlayerLogger29();this.$VideoPlayerLogger34();this.$VideoPlayerLogger28();this.$VideoPlayerLogger31()};n.prototype.startInterrupt=function(){this.$VideoPlayerLogger35()};n.prototype.endInterrupt=function(){this.$VideoPlayerLogger29();this.$VideoPlayerLogger34()};n.prototype.$VideoPlayerLogger24=function(){return this.$VideoPlayerLogger13>0};n.prototype.$VideoPlayerLogger26=function(o){if(this.$VideoPlayerLogger24())return;this.$VideoPlayerLogger13=Date.now();if(o!==undefined&&this.$VideoPlayerLogger6[c("VideoPlayerLoggerEvent").STARTED_PLAYING])this.$VideoPlayerLogger14=o};n.prototype.$VideoPlayerLogger35=function(){if(this.$VideoPlayerLogger36())return;this.$VideoPlayerLogger18=Date.now()};n.prototype.$VideoPlayerLogger36=function(){return this.$VideoPlayerLogger18>0};n.prototype.$VideoPlayerLogger37=function(){if(!this.$VideoPlayerLogger36())return 0;return Date.now()-this.$VideoPlayerLogger18};n.prototype.$VideoPlayerLogger38=function(){return this.$VideoPlayerLogger24()?Date.now()-this.$VideoPlayerLogger13:0};n.prototype.$VideoPlayerLogger29=function(){if(this.$VideoPlayerLogger36()){var o=this.$VideoPlayerLogger37();this.$VideoPlayerLogger19+=o;this.$VideoPlayerLogger17+=o;this.$VideoPlayerLogger20+=1;this.$VideoPlayerLogger16+=1}};n.prototype.$VideoPlayerLogger34=function(){if(this.$VideoPlayerLogger36())this.$VideoPlayerLogger18=0};n.prototype.$VideoPlayerLogger23=function(){this.$VideoPlayerLogger19=0;this.$VideoPlayerLogger20=0;this.$VideoPlayerLogger34()};n.prototype.$VideoPlayerLogger28=function(){if(this.$VideoPlayerLogger24()){var o=this.$VideoPlayerLogger38();if(this.$VideoPlayerLogger14!==null)this.$VideoPlayerLogger15=o;this.$VideoPlayerLogger12+=o;this.$VideoPlayerLogger9+=o;this.$VideoPlayerLogger11++;this.$VideoPlayerLogger8++;if(j)this.$VideoPlayerLogger7.push(m())}};n.prototype.$VideoPlayerLogger31=function(){if(this.$VideoPlayerLogger24())this.$VideoPlayerLogger13=0};n.prototype.$VideoPlayerLogger25=function(o){if(o&&typeof o=="object")return JSON.stringify(o);return o};n.prototype.getCumulativeStallCount=function(){return this.$VideoPlayerLogger8};n.prototype.getStallCount=function(){return this.$VideoPlayerLogger11};n.prototype.getCumulativeStallTime=function(){return this.$VideoPlayerLogger9+this.$VideoPlayerLogger38()};n.prototype.getCumulativeInterruptCount=function(){return this.$VideoPlayerLogger16};n.prototype.getCumulativeInterruptTime=function(){return this.$VideoPlayerLogger17+this.$VideoPlayerLogger37()};n.prototype.$VideoPlayerLogger32=function(o){o.stall_time=Math.max(0,this.$VideoPlayerLogger12);o.stall_count=this.$VideoPlayerLogger11;if(this.$VideoPlayerLogger15){o.first_stall_time=this.$VideoPlayerLogger15;o.first_stall_start_position=this.$VideoPlayerLogger14}};n.prototype.$VideoPlayerLogger33=function(o){o.interrupt_time=Math.max(0,this.$VideoPlayerLogger19);o.interrupt_count=this.$VideoPlayerLogger20};n.prototype.$VideoPlayerLogger30=function(){var o=m(),p=o-l;this.$VideoPlayerLogger7=this.$VideoPlayerLogger7.filter(function(q){return q>=p});if(!j)if(this.$VideoPlayerLogger11>0)this.$VideoPlayerLogger7.push(o);return this.$VideoPlayerLogger7.length};n.prototype.$VideoPlayerLogger22=function(){this.$VideoPlayerLogger12=0;this.$VideoPlayerLogger13=0;this.$VideoPlayerLogger11=0;this.$VideoPlayerLogger14=null;this.$VideoPlayerLogger15=0};n.prototype.$VideoPlayerLogger27=function(){this.$VideoPlayerLogger7=[]};n.prototype.getFTdata=function(){return this.$VideoPlayerLogger3};n.Sources=c("VideoPlayerLoggerSource");n.Errors=c("VideoPlayerLoggerErrors");n.FallbackReasons=c("VideoPlayerLoggerFallbackReasons");n.ErrorStates=c("VideoPlayerLoggerErrorStates");n.PlayerStates=c("VideoPlayerLoggerPlayerStates");f.exports=n}),null);
__d("VideoPlayerUIComponentDrawerController",["VideoPlayerUIComponentDrawer"],(function a(b,c,d,e,f,g){"use strict";var h=function h(j,k){return j.getPriority()-k.getPriority()};function i(){this.$VideoPlayerUIComponentDrawerController1=[]}i.prototype.register=function(j,k){var l=new(c("VideoPlayerUIComponentDrawer"))(j,k);l.addListener("reserve",function(){return this.$VideoPlayerUIComponentDrawerController2(j)}.bind(this));l.addListener("release",function(){return this.$VideoPlayerUIComponentDrawerController2(j)}.bind(this));l.addListener("heightChange",function(){return this.$VideoPlayerUIComponentDrawerController2(j)}.bind(this));this.$VideoPlayerUIComponentDrawerController1.push(l);this.$VideoPlayerUIComponentDrawerController1.sort(h);return l};i.prototype.$VideoPlayerUIComponentDrawerController2=function(j){var k=0;this.$VideoPlayerUIComponentDrawerController1.forEach(function(l){if(l.getPriority()>j)l.emit("reposition",k);if(l.isReserved())k+=l.getHeight()})};f.exports=i}),null);
__d("forwardEvent",[],(function a(b,c,d,e,f,g){function h(i,j,event){return i.addListener(event,function(){for(var k=arguments.length,l=Array(k),m=0;m<k;m++)l[m]=arguments[m];return j.emit.apply(j,[event].concat(l))})}f.exports=h}),null);
__d("VideoPlayerController",["csx","cx","invariant","Promise","Arbiter","Banzai","BigPipe","Bootloader","CoverVideoOffsetType","CSS","DOM","DOMDimensions","DOMQuery","ErrorUtils","FullScreen","JSLogger","JSLog","JSResource","Map","MediaController","Run","ScriptPath","Set","SphericalVideoPlayerEvents","SubscriptionsHandler","Parent","URI","VideoChannelViewChainLengthManager","VideoMimeTypes","VideoPermalinkURI","VideoPlayerABRQualityTracker","VideoPlayerApiEvents","VideoPlayerExperiments","VideoPlayerFormats","VideoPlayerFormatsMap","VideoPlayerHTML5Experiments","VideoPlayerInitializationEvent","VideoPlayerLogger","VideoPlayerLoggerErrorStates","VideoPlayerLoggerEvent","VideoPlayerLoggerFallbackReasons","VideoPlayerLoggerSource","VideoPlayerMemLeakExperiments","VideoPlayerReason","VideoPlayerResizeSettings","VideoPlayerVersions","VideoPlayerShakaBandwidthEstimator","VideoPlayerStates","VideoPlayerUIComponentDrawer","VideoPlayerUIComponentDrawerController","VideoPlayerVolumeSettings","VideoViewabilityKeyEvents","VideoViewabilityLogging","VideosRenderingInstrumentation","ViewportTrackingHelper","Visibility","XVideoDataController","VideoControllerPlayingStateEmitter","canVideoPlayType","clearInterval","collectDataAttributes","enumerate","forwardEvent","getContextualParent","getElementPosition","getFullScreenElement","getViewportDimensions","ifRequired","logVideosClickTracking","mapObject","performanceAbsoluteNow","requireWeak","setInterval","uniqueID"],(function aa(ba,a,ca,da,b,ea,fa,ga,c){var d,e,f=null;a("requireWeak")("VideoChannelLogger",function(m){f=m});var g=null;a("requireWeak")("VideoHomeLogger",function(m){g=m});var h=5,i=1;function j(){return a("VideoPlayerHTML5Experiments").useMonotonicallyIncreasingTimers?a("performanceAbsoluteNow")():Date.now()}var k=0;d=babelHelpers.inherits(l,a("MediaController"));e=d&&d.prototype;function l(m,n){var o=m.video_id,p=m.video_ids,q=m.video_url,r=m.video_urls,s=m.chaining_token,t=m.video_channel_id,u=m.reaction_video_channel_type,v=m.source,w=m.ad_client_token,x=m.should_autoplay,y=m.player_version,z=m.autoplay_setting,A=m.apiModule,B=m.apiConfig,C=m.useInlineFallback,D=m.accessToken,E=m.projection,F=m.playerOrigin,G=m.playerSuborigin,H=m.isBroadcast,I=m.isInstreamAd,J=m.components,K=m.trackingCodes,L=m.alwaysShowCaptions,ha=m.disableLogging,M=m.subtitleBackgroundColor,N=m.subtitleBackgroundOpacity,O=m.subtitleTextColor,P=m.subtitleTextSize,Q=m.video_path,R=m.customLoggingProps,S=m.broadcasterOrigin,T=m.allowCrossPageTransition,ia=m.isReactPlayer,ja=m.offsettype,ka=m.offsetvalue,la=n.root_element,ma=n.container_element,na=n.video_element;"use strict";e.constructor.call(this);this.$VideoPlayerController34=false;this.emitHeartbeat=function(){if(!this.isState(a("VideoPlayerStates").PLAYING)||!this.getVideoNode()){this.stopHeartbeat();return}if(a("VideoPlayerHTML5Experiments").heartbeatSkipOnBuffering&&this.isBuffering())return;this.getVideoAPI().logHeartbeat()}.bind(this);this.$VideoPlayerController125=function(){if(!a("VideoPlayerExperiments").allowBufferingErrorForHiddenTab&&a("Visibility").isHidden()){this.$VideoPlayerController124();this.$VideoPlayerController86=setTimeout(this.$VideoPlayerController125,this.$VideoPlayerController92);return}var Y=this.getVideoAPI().isPaused()!==undefined?!this.getVideoAPI().isPaused():this.getState()==="playing";if(Y){this.logError({error:"BUFFERING_TIMEOUT",message:"video has been in buffering state for over "+this.$VideoPlayerController92+"ms.",isPlayback:this.isPlayRequestPending()});this.$VideoPlayerController124();this.emit("error",a("VideoPlayerLoggerFallbackReasons").TIMEOUT)}}.bind(this);this.$VideoPlayerController22=0;this.$VideoPlayerController21=new(a("Map"))();this.$VideoPlayerController68={};if(R)this.setLogEntryPropertyGetters(R);if(x===undefined)throw new Error("Must pass should_autoplay to "+this.constructor.name+"!");this.$VideoPlayerController20=new(a("VideoPlayerUIComponentDrawerController"))();this.$VideoPlayerController13=new(a("Map"))();this.$VideoPlayerController51=E;this.$VideoPlayerController1=D;this.$VideoPlayerController60=!!x;this.$VideoPlayerController8=z;this.$VideoPlayerController2=w;this.$VideoPlayerController47=false;this.$VideoPlayerController76=na;this.$VideoPlayerController59=la;this.$VideoPlayerController14=ma;this.$VideoPlayerController29=false;this.$VideoPlayerController30=false;this.$VideoPlayerController50=y;this.$VideoPlayerController75=o||p&&p[0]||"";this.$VideoPlayerController78=q||r&&r[0];this.$VideoPlayerController77=Q;this.$VideoPlayerController11=s;this.$VideoPlayerController73=t;this.$VideoPlayerController48=F;this.$VideoPlayerController49=G||v;this.$VideoPlayerController28=H;this.$VideoPlayerController35=I;this.$VideoPlayerController70=K;this.$VideoPlayerController3=L;this.$VideoPlayerController63=M||"";this.$VideoPlayerController64=N==undefined?0:N;this.$VideoPlayerController65=O||"";this.$VideoPlayerController66=P==undefined?0:P;this.$VideoPlayerController27=a("uniqueID")();this.$VideoPlayerController57=u;this.$VideoPlayerController5=A;this.$VideoPlayerController4=B;this.$VideoPlayerController37=this.$VideoPlayerController5.getStreamTypeFromConfig(this.$VideoPlayerController4);this.$VideoPlayerController92=this.$VideoPlayerController37==="progressive"?a("VideoPlayerExperiments").progressiveBufferingErrorTimeout:a("VideoPlayerExperiments").bufferingErrorTimeout;this.$VideoPlayerController36=this.$VideoPlayerController5.getIsPlayingLiveFromConfig(this.$VideoPlayerController4);this.$VideoPlayerController31=this.$VideoPlayerController5.getIsFacecastAudioFromConfig(this.$VideoPlayerController4);this.$VideoPlayerController32=this.$VideoPlayerController5.getIsSpherical(this.$VideoPlayerController4);this.$VideoPlayerController71=!!C;this.$VideoPlayerController84=new(a("Set"))();this.$VideoPlayerController85=S;this.$VideoPlayerController86=0;this.$VideoPlayerController87=!!T;this.$VideoPlayerController88=!!ia;this.$VideoPlayerController89=this.getContainerNode().style.paddingBottom;this.$VideoPlayerController90=ja;this.$VideoPlayerController91=ka;this.$VideoPlayerController19=a("Arbiter").subscribe("DOM/destroy",function(Y,Z){if(!a("Parent").bySelector(this.getVideoNode(),Z))return;this.pause(a("VideoPlayerReason").UNLOADED);this.destroy()}.bind(this));var U=a("VideoPlayerExperiments").maxPageletDisplaySuspensions;if(a("VideoPlayerExperiments").suspendPageletDisplay&&(!U||U>k))if(!a("VideoPlayerExperiments").suspendPageletDisplayLiveOnly||this.$VideoPlayerController36){this.$VideoPlayerController83=a("BigPipe").suspendPageletDisplay(a("VideoPlayerExperiments").suspendPageletDisplayTimeout);k++}this.$VideoPlayerController17=0;var V=a("URI").getRequestURI(),W=a("VideoPermalinkURI").parse(V),X=parseFloat(V.getQueryData().t),oa=W?W.video_id==this.$VideoPlayerController75:false;if(X&&oa&&this.$VideoPlayerController4)this.$VideoPlayerController4.startTimestamp=X;if(a("VideoPlayerHTML5Experiments").useVpcPlayingStateForPrioritization&&this.$VideoPlayerController4)this.$VideoPlayerController4.vpcPlayingStateEmitter=new(a("VideoControllerPlayingStateEmitter"))(this);this.$VideoPlayerController15=null;this.$VideoPlayerController45=null;this.$VideoPlayerController61=v;this.$VideoPlayerController41=new(a("VideoPlayerLogger"))(v);this.collectFeedTrackingData();this.$VideoPlayerController41.setScriptPath(a("ScriptPath").getScriptPath());this.$VideoPlayerController53=a("VideosRenderingInstrumentation").retrieveRenderTime(this.getRootNode());this.$VideoPlayerController52=j()-this.$VideoPlayerController53;if(B)B.subtitleDrawer=this.registerDrawer(a("VideoPlayerUIComponentDrawer").priorities.Subtitles,0);this.$VideoPlayerController62="loading";this.logEvent(a("VideoPlayerInitializationEvent").PLAYER_INITIALIZATION,{time_ms:this.$VideoPlayerController53});this.$VideoPlayerController93(false);if(this.$VideoPlayerController5.isImplementationUnavailable(this.$VideoPlayerController71))if(this.$VideoPlayerController71)this.$VideoPlayerController94();else{this.$VideoPlayerController95();return}else this.$VideoPlayerController96();a("Banzai").subscribe(a("Banzai").SHUTDOWN,function(){this.pause(a("VideoPlayerReason").UNLOADED);this.destroy()}.bind(this));this.$VideoPlayerController7=new(a("SubscriptionsHandler"))();if(this.$VideoPlayerController60)if(a("VideoPlayerExperiments").delayAutoplayUntilAfterLoad)this.$VideoPlayerController7.addSubscriptions(a("Run").onAfterLoad(function(){return this.$VideoPlayerController97()}.bind(this)));else this.$VideoPlayerController97();this.$VideoPlayerController18=0;this.$VideoPlayerController58=false;this.$VideoPlayerController23=this.$VideoPlayerController98();this.$VideoPlayerController7.addSubscriptions(a("Banzai").subscribe(a("Banzai").SHUTDOWN,function(){this.pause(a("VideoPlayerReason").UNLOADED);this.destroy()}.bind(this)));this.$VideoPlayerController7.addSubscriptions(a("Arbiter").subscribe("layer_shown",function(Y,Z){if(Z.type==="DialogX"||Z.type==="PhotoSnowlift"||Z.type==="Spotlight"){if(Z.type!=="Spotlight")a("Bootloader").loadModules(["VideoAutoplayControllerX"],function($){$.setShouldAutoplay(false)},"VideoPlayerController");this.$VideoPlayerController18=this.$VideoPlayerController18+1;if(a("VideoPlayerExperiments").ignoreDialogCounter||this.$VideoPlayerController18>0)if(this.isState("playing")&&!this.getIsInChannel()){this.pause(a("VideoPlayerReason").PAGE_VISIBILITY);this.$VideoPlayerController58=true}}}.bind(this)),a("Arbiter").subscribe("layer_hidden",function(Y,Z){if(Z.type==="DialogX"||Z.type==="PhotoSnowlift"||Z.type==="Spotlight"){if(a("VideoPlayerExperiments").addViewabilityFixEnabled)this.$VideoPlayerController18=Math.max(0,this.$VideoPlayerController18-1);else this.$VideoPlayerController18=this.$VideoPlayerController18-1;if(this.$VideoPlayerController18===0){if(Z.type!=="Spotlight")a("Bootloader").loadModules(["VideoAutoplayControllerX"],function($){$.setShouldAutoplay(true)},"VideoPlayerController");if(this.$VideoPlayerController58&&!this.getIsInChannel()){this.play(a("VideoPlayerReason").PAGE_VISIBILITY);this.$VideoPlayerController58=false}}}}.bind(this)),a("Arbiter").subscribe(a("JSLogger").DUMP_EVENT,function(Y,Z){return this.$VideoPlayerController99(Y,Z)}.bind(this)));a("Run").onLeave(function(){if(this.$VideoPlayerController87||a("VideoPlayerExperiments").persistentWNSEnabled&&this.$VideoPlayerController61===a("VideoPlayerLoggerSource").WATCH_SCROLL)return;this.cleanOnLeave()}.bind(this));this.$VideoPlayerController12=J||[];this.$VideoPlayerController12.forEach(function(Y){if(a("VideoPlayerExperiments").enableComponentGuards)a("ErrorUtils").applyWithGuard(Y.enable,Y,[this]);else Y.enable(this)}.bind(this));this.$VideoPlayerController44=1;this.$VideoPlayerController79=false;if(this.$VideoPlayerController76)if(this.shouldCalculateViewability()){this.$VideoPlayerController79=a("VideoPlayerExperiments").enableViewabilityLogging;if(this.isInstreamAd())this.$VideoPlayerController79=this.$VideoPlayerController79&&a("VideoPlayerExperiments").enableInstreamAdViewabilityLogging}else this.$VideoPlayerController79=a("VideoPlayerExperiments").enableViewabilityLoggingForOrganic;if(this.$VideoPlayerController79&&this.$VideoPlayerController76)this.$VideoPlayerController80=new(a("VideoViewabilityLogging"))(this,this.$VideoPlayerController76,this.$VideoPlayerController59)}l.prototype.destroy=function(m){"use strict";m=m||{};if(this.isState("destroyed")||this.$VideoPlayerController30)return;if(this.$VideoPlayerController83){this.$VideoPlayerController83();this.$VideoPlayerController83=null}this.$VideoPlayerController30=true;var n=this.$VideoPlayerController12;for(var o=n.length-1;o>=0;o--){var p=n[o];if(a("VideoPlayerExperiments").enableComponentGuards)a("ErrorUtils").applyWithGuard(p.disable,p,[this]);else p.disable(this)}this.getVideoAPI().destroy(m);this.setState("destroyed");this.$VideoPlayerController7.release();if(!m.skipRemoveAllListeners)this.removeAllListeners();if(this.$VideoPlayerController19){this.$VideoPlayerController19.unsubscribe();this.$VideoPlayerController19=null}this.stopHeartbeat();if(a("VideoPlayerMemLeakExperiments").release_dom_nodes_on_destroy){this.$VideoPlayerController76=null;this.$VideoPlayerController59=null;this.$VideoPlayerController14=null}};l.prototype.$VideoPlayerController100=function(){"use strict";var m=a("DOMQuery").scry(this.getVideoNode(),'[data-fallback-markup="1"]');if(!m.length)return a("Promise").reject();a("DOM").replace(this.getVideoNode(),m[0]);this.$VideoPlayerController76=m[0];return a("JSResource")("VideoPlayerFlashApi").__setRef("VideoPlayerController").load()};l.prototype.$VideoPlayerController94=function(){"use strict";this.logEvent(a("VideoPlayerLoggerEvent").SWITCHED_IMPLEMENTATION,{error_user_info:this.getDebugInfo()});this.$VideoPlayerController100().then(function(m){if(m.isImplementationUnavailable())return a("Promise").reject();else return a("Promise").resolve(m)}).done(function(m){this.$VideoPlayerController5=m;this.$VideoPlayerController96()}.bind(this),function(m){return this.$VideoPlayerController95()}.bind(this))};l.prototype.collectFeedTrackingData=function(){"use strict";var m=null;if(this.$VideoPlayerController70){var n={tn:"","tn-debug":","},o={};for(var p=0;p<this.$VideoPlayerController70.length;p++){var q=JSON.parse(this.$VideoPlayerController70[p]);if(!Array.isArray(q))for(var r in q)if(n[r]!==undefined){if(o[r]===undefined)o[r]=[];o[r].push(q[r])}else if(o[r]===undefined)o[r]=q[r]}for(var s in n)if(o[s]!==undefined)o[s]=o[s].join(n[s]);m={ft:o}}else{var t=false,u=this.getRootNode();while(u){if(a("CSS").matchesSelector(u,"._4oep")){t=true;break}u=a("getContextualParent")(u)}if(!t)m=a("collectDataAttributes")(this.getRootNode(),["ft"]);else m={}}this.$VideoPlayerController41.setFTData(m)};l.prototype.$VideoPlayerController99=function(m,n){"use strict";n.video_player_debug_info=n.video_player_debug_info||{hardware:this.$VideoPlayerController101(),live_autoplay_bandwidth_restrain:a("VideoPlayerShakaBandwidthEstimator").isAutoplayBandwidthRestrained(true),autoplay_bandwidth_restrain:a("VideoPlayerShakaBandwidthEstimator").isAutoplayBandwidthRestrained(false)};n.video_player_debug_info[this.getVideoID()]=this.getDebugInfo()};l.prototype.$VideoPlayerController101=function(){"use strict";try{var m=document.createElement("canvas"),n=m.getContext("webgl")||m.getContext("experimental-webgl"),o=n.getExtension("WEBGL_debug_renderer_info");return o&&{vendor:n.getParameter(o.UNMASKED_VENDOR_WEBGL),renderer:n.getParameter(o.UNMASKED_RENDERER_WEBGL)}}catch(p){}return null};l.prototype.setStillFrameEnabled=function(m){"use strict";var n=this.getVideoAPI();if(n.setStillFrameEnabled)n.setStillFrameEnabled(m)};l.prototype.isFallbackRecoverable=function(){"use strict";return!!this.$VideoPlayerController67};l.prototype.setFallbackSources=function(m){"use strict";this.$VideoPlayerController67=m};l.prototype.setRelativeSphericalOrientation=function(m,n){"use strict";this.emit(a("SphericalVideoPlayerEvents").SET_RELATIVE_SPHERICAL_ORIENTATION,m,n)};l.prototype.setSphericalOrientation=function(m,n){"use strict";this.emit(a("SphericalVideoPlayerEvents").SET_ABSOLUTE_SPHERICAL_ORIENTATION,m,n)};l.prototype.setSphericalFieldOfView=function(m){"use strict";this.emit(a("SphericalVideoPlayerEvents").SET_FIELD_OF_VIEW,m)};l.prototype.isSpherical=function(){"use strict";return this.$VideoPlayerController32};l.prototype.getVideoPlayerID=function(){"use strict";return this.$VideoPlayerController27};l.prototype.setLogEntryPropertyGetters=function(m){"use strict";Object.keys(m).forEach(function(n){var o=m[n];if(typeof o==="function")this.$VideoPlayerController21.set(n,o);else this.$VideoPlayerController68[n]=o}.bind(this))};l.prototype.removeLogEntryPropertyGetters=function(m){"use strict";if(typeof m==="string")m=[m];if(!Array.isArray(m))m=Object.keys(m);m.forEach(function(n){this.$VideoPlayerController21["delete"](n);delete this.$VideoPlayerController68[n]}.bind(this))};l.prototype.$VideoPlayerController96=function(){"use strict";this.$VideoPlayerController5.onImplementationReady(this.getVideoNode(),function(){return this.onApiReady()}.bind(this))};l.prototype.isImplementationUnavailable=function(){"use strict";return this.$VideoPlayerController5.isImplementationUnavailable(this.$VideoPlayerController71)&&!this.$VideoPlayerController71};l.prototype.getIsInChannel=function(){"use strict";return this.$VideoPlayerController61===a("VideoPlayerLoggerSource").CHANNEL};l.prototype.updateSource=function(m){"use strict";if(!this.$VideoPlayerController61)return;var n=a("VideoPlayerFormatsMap")[this.$VideoPlayerController61],o=a("VideoPlayerFormatsMap")[m];this.$VideoPlayerController41.updateSource(m);if(n&&n!==o&&this.$VideoPlayerController81)if(a("VideoPlayerExperiments").delayFormatChangeEvent)if(this.isState(a("VideoPlayerStates").PLAYING)&&!this.$VideoPlayerController33){this.logEvent(a("VideoPlayerLoggerEvent").PLAYER_FORMAT_CHANGED);this.$VideoPlayerController39=o}else this.$VideoPlayerController39=n;else this.logEvent(a("VideoPlayerLoggerEvent").PLAYER_FORMAT_CHANGED);this.$VideoPlayerController61=m};l.prototype.getSource=function(){"use strict";return this.$VideoPlayerController41.getSource()};l.prototype.getPlayerOrigin=function(){"use strict";return this.$VideoPlayerController48};l.prototype.getPlayerSuborigin=function(){"use strict";return this.$VideoPlayerController49};l.prototype.hasLooped=function(){"use strict";return this.$VideoPlayerController44>1};l.prototype.$VideoPlayerController95=function(){"use strict";var m={error:"IMPLEMENTATION_NOT_SUPPORTED",state:a("VideoPlayerLoggerErrorStates").PLAYER_FAILURE,error_description:"Implementation unavailable",error_user_info:this.getDebugInfo()};this.logEvent(a("VideoPlayerLoggerEvent").ERROR,m);this.$VideoPlayerController60=false};l.prototype.logError=function(m){"use strict";var n=this.$VideoPlayerController38=m,o=n.error,p=n.message,q=n.isPlayback,r=n.httpStatus,s=n.url,t=this.getDebugInfo();delete t.player.loggedError;delete t.player.lastError;var u={error:o,error_description:p,error_user_info:t,error_code:r,resource_url:s,state:q?a("VideoPlayerLoggerErrorStates").PLAYBACK_FAILURE:a("VideoPlayerLoggerErrorStates").PLAYER_FAILURE};this.$VideoPlayerController40=this.logEvent(a("VideoPlayerLoggerEvent").ERROR,u);if(q&&this.$VideoPlayerController47)this.$VideoPlayerController93(false)};l.prototype.setRotation=function(m){"use strict";this.getVideoAPI().setRotation(m)};l.prototype.setDimensions=function(m,n){"use strict";var o=this.getContainerNode();o.style.width=m+"px";o.style.height=n+"px";var p=this.getVideoNode();p.style.width=m+"px";p.style.height=n+"px";if(this.isState("loading"))this.$VideoPlayerController54={width:m,height:n};else{if(this.isPlayerVersion("silvercity")&&(this.$VideoPlayerController33||a("VideoPlayerResizeSettings").disable_flash_set_dimensions))return;this.setVideoPlayerAPIDimensions(m,n)}};l.prototype.isPlayRequestPending=function(){"use strict";return this.$VideoPlayerController47};l.prototype.$VideoPlayerController93=function(m){"use strict";if(this.$VideoPlayerController47===m)return;this.$VideoPlayerController47=m;this.emit("pendingPlayRequestChanged")};l.prototype.updateAutoplayRestrained=function(){"use strict";a("ifRequired")("VideoPlayerHTML5Shaka",function(m){var n=m.isAutoplayBandwidthRestrained(this.$VideoPlayerController36);this.$VideoPlayerController102(n)}.bind(this))};l.prototype.$VideoPlayerController102=function(m){"use strict";if(m)this.emit("turnOffAutoplay",{reason:"poor_network_quality"});else this.emit("resumeAutoplay",{reason:"poor_network_quality"});this.getVideoAPI().setPreloadDisabled(m)};l.prototype.restoreStreamBufferSize=function(){"use strict";this.getVideoAPI().restoreStreamBufferSize()};l.prototype.getDataInsertionPosition=function(){"use strict";return this.$VideoPlayerController23&&this.$VideoPlayerController23.getAttribute("data-insertion-position")};l.prototype.getDataFt=function(){"use strict";return this.$VideoPlayerController23&&this.$VideoPlayerController23.getAttribute("data-ft")};l.prototype.play=function(m){"use strict";this.$VideoPlayerController103();if(!this.$VideoPlayerController46)this.$VideoPlayerController46=m;if(!this.$VideoPlayerController47){this.$VideoPlayerController45=this.$VideoPlayerController104();var n=this.$VideoPlayerController105({debug_reason:m}),o=this.$VideoPlayerController61;if(a("VideoPlayerExperiments").delayFormatChangeEvent&&o&&this.$VideoPlayerController81&&this.$VideoPlayerController39&&a("VideoPlayerFormatsMap")[o]!==this.$VideoPlayerController39&&!this.$VideoPlayerController33){this.logEvent(a("VideoPlayerLoggerEvent").PLAYER_FORMAT_CHANGED);this.$VideoPlayerController39=a("VideoPlayerFormatsMap")[o]}this.logEvent(a("VideoPlayerLoggerEvent").REQUESTED_PLAYING,n);this.$VideoPlayerController81=true}this.emit("playRequested",m);this.sendPlayRequest(m);if(m===a("VideoPlayerReason").LOOP)this.$VideoPlayerController44++};l.prototype.sendPlayRequest=function(m){"use strict";if(this.isState("fallback")){this.emit("fallbackPlay");if(a("VideoPlayerExperiments").endBufferingOnFallbackPlay)this.$VideoPlayerController41.endBuffering();return}this.$VideoPlayerController93(true);if(this.isState("loading"))this.$VideoPlayerController55={reason:m};else{if(!this.getVideoAPI().isMuted()&&this.$VideoPlayerController43)this.logEvent(a("VideoPlayerLoggerEvent").UNMUTED);this.$VideoPlayerController43=false;this.$VideoPlayerController106();this.getVideoAPI().play(m)}};l.prototype.getOriginalPlayReason=function(){"use strict";return this.$VideoPlayerController46};l.prototype.reset=function(){"use strict";if(this.isState("loading")||this.isState("fallback")&&!this.isFallbackRecoverable())return;this.resetPositions();this.$VideoPlayerController107();if(this.$VideoPlayerController72&&this.$VideoPlayerController72.destroy)this.$VideoPlayerController72.destroy();this.$VideoPlayerController72=null;this.setState("loading");this.$VideoPlayerController96()};l.prototype.detachRootNode=function(){"use strict";a("DOM").remove(this.$VideoPlayerController59);if(this.isState("fallback")||this.isState("loading"))return;this.setState("loading");this.$VideoPlayerController5.onImplementationReady(this.getVideoNode(),function(){return this.$VideoPlayerController108()}.bind(this))};l.prototype.getVideoAPI=function(){"use strict";this.$VideoPlayerController72||c(0);return this.$VideoPlayerController72};l.prototype.getVideoNodeNullable=function(){"use strict";return this.$VideoPlayerController76};l.prototype.getVideoNode=function(){"use strict";if(this.isState("destroyed"))a("JSLog").error("Cannot get video node, VideoPlayerController is destroyed. In the future, this will be an error.");var m=this.getVideoNodeNullable();if(a("VideoPlayerMemLeakExperiments").release_dom_nodes_on_destroy)m||c(0);return m};l.prototype.getRootNodeNullable=function(){"use strict";return this.$VideoPlayerController59};l.prototype.getRootNode=function(){"use strict";if(this.isState("destroyed"))a("JSLog").error("Cannot get root node, VideoPlayerController is destroyed. In the future, this will throw an error.");var m=this.getRootNodeNullable();if(a("VideoPlayerMemLeakExperiments").release_dom_nodes_on_destroy)m||c(0);return m};l.prototype.getContainerNodeNullable=function(){"use strict";return this.$VideoPlayerController14};l.prototype.getContainerNode=function(){"use strict";if(this.isState("destroyed"))a("JSLog").error("Cannot get container node, VideoPlayerController is destroyed.In the future, this will throw an error.");var m=this.getContainerNodeNullable();if(a("VideoPlayerMemLeakExperiments").release_dom_nodes_on_destroy)m||c(0);return m};l.prototype.getVideoResolution=function(){"use strict";var m=this.getVideoNode();return{height:m.videoHeight,width:m.videoWidth}};l.prototype.$VideoPlayerController108=function(){"use strict";this.setState("ready");this.logEvent(a("VideoPlayerInitializationEvent").PLAYER_ALLOCATED);this.$VideoPlayerController43=!this.getVideoAPI().isMuted();this.$VideoPlayerController69=!this.$VideoPlayerController3;if(this.getVideoAPI().setSubtitlesStyle)this.getVideoAPI().setSubtitlesStyle(this.$VideoPlayerController63,this.$VideoPlayerController64,this.$VideoPlayerController65,this.$VideoPlayerController66);if(this.$VideoPlayerController55){this.sendPlayRequest(this.$VideoPlayerController55.reason);this.$VideoPlayerController55=null}if(this.$VideoPlayerController54){this.setDimensions(this.$VideoPlayerController54.width,this.$VideoPlayerController54.height);this.$VideoPlayerController54=null}if(this.$VideoPlayerController56){this.getVideoAPI().unmute();this.$VideoPlayerController56=null}};l.prototype.onApiReady=function(){"use strict";if(this.$VideoPlayerController4){this.$VideoPlayerController4.id=this.$VideoPlayerController27;if(this.$VideoPlayerController67)this.$VideoPlayerController4.fallbackSources=this.$VideoPlayerController67;this.$VideoPlayerController4.playerOrigin=this.$VideoPlayerController48;this.$VideoPlayerController4.playerSuborigin=this.$VideoPlayerController49;this.$VideoPlayerController4.getSource=function(){return this.getSource()}.bind(this)}this.$VideoPlayerController72=new this.$VideoPlayerController5(this.getVideoNode(),this.$VideoPlayerController4);this.logEvent(a("VideoPlayerInitializationEvent").PLAYER_ALLOCATED);this.$VideoPlayerController109();this.$VideoPlayerController108();var m={is_auto_played:this.isAutoplayable()};this.logEvent(a("VideoPlayerLoggerEvent").PLAYER_LOADED,m);if(this.$VideoPlayerController72)this.$VideoPlayerController41.setABRQualityTracker(new(a("VideoPlayerABRQualityTracker"))(this.$VideoPlayerController72.getLocalEstimator()));var n=this.getVideoProjection();if(n)this.$VideoPlayerController51=n;this.emit("apiReady")};l.prototype.getLocalEstimator=function(){"use strict";if(this.$VideoPlayerController72)return this.$VideoPlayerController72.getLocalEstimator();else return null};l.prototype.runOnApiReady=function(){var m=arguments.length<=0||arguments[0]===undefined?function(){}:arguments[0];"use strict";if(!this.isState("loading"))m();else this.once("apiReady",m)};l.prototype.resetPositions=function(){"use strict";this.$VideoPlayerController17=0};l.prototype.getCurrentTimePosition=function(){"use strict";if(this.isState("playing")){var m=this.getVideoAPI().getCurrentTimePosition();if(m!=null&&m!==undefined)this.$VideoPlayerController17=m}return this.$VideoPlayerController17};l.prototype.$VideoPlayerController103=function(){"use strict";if(!this.$VideoPlayerController9){a("VideoChannelViewChainLengthManager").registerChainingInfos(this.getVideoID(),this.$VideoPlayerController11);var m=this.getVideoID();if(this.$VideoPlayerController11){var n=this.$VideoPlayerController11.decode();m=n.root_id}this.$VideoPlayerController9=a("VideoChannelViewChainLengthManager").getLoggingData(m)}this.$VideoPlayerController74=f?f.getPlayerLoggingData():{}};l.prototype.$VideoPlayerController110=function(m){"use strict";this.$VideoPlayerController93(false);var n=m.position;if(n!==undefined)this.$VideoPlayerController17=n;this.setState("playing");if(this.areHLSActive())this.$VideoPlayerController111();else if(this.isRTMP_DEPRECATED())this.$VideoPlayerController112();this.startHeartbeat()};l.prototype.$VideoPlayerController113=function(m){"use strict";var n=m.position;if(n!==undefined)this.$VideoPlayerController17=n;this.$VideoPlayerController15=this.getVideoAPI().getCurrentlyPlayingStreamInfoID()};l.prototype.$VideoPlayerController114=function(event){"use strict";return this.$VideoPlayerController84.has(event)};l.prototype.runOnceOnApiEventLogged=function(event,m){var n,o=this;"use strict";if(this.$VideoPlayerController114(event))m();else(function(){var p=o.addListener("apiEventLogged",function(q){if(q===event){m();p.remove()}})})()};l.prototype.$VideoPlayerController115=function(m){"use strict";var event=m.event;this.$VideoPlayerController84.add(event);delete m.event;this.logEvent(event,m);this.emit("apiEventLogged",event)};l.prototype.$VideoPlayerController116=function(){"use strict";if(!this.isState("finished"))this.setState("paused");this.stopHeartbeat()};l.prototype.$VideoPlayerController117=function(m){"use strict";var n=m.position;if(n!==undefined)this.$VideoPlayerController17=n};l.prototype.$VideoPlayerController118=function(){"use strict";this.setState("finished");this.$VideoPlayerController58=false;this.stopHeartbeat()};l.prototype.getVolume=function(){"use strict";return this.getVideoAPI().getVolume()};l.prototype.$VideoPlayerController119=function(){"use strict";this.$VideoPlayerController34=false;var m=this.getContainerNode(),n=this.isFullscreen();a("CSS").conditionClass(m,"_1hwh",n);if(n)m.style.paddingBottom="0";else{m.removeAttribute("data-fullscreen");m.style.paddingBottom=this.$VideoPlayerController89}if(!n&&this.$VideoPlayerController24){this.$VideoPlayerController24.unsubscribe();this.$VideoPlayerController24=null}if(this.$VideoPlayerController33!=n){this.logFullscreenChanged(n);var o=a("DOMDimensions").getElementDimensions(m);if(!this.isPlayerVersion("silvercity"))this.setVideoPlayerAPIDimensions(o.width,o.height);this.emit("toggleFullscreen");if(!n){this.addOffsetStylings();a("Arbiter").inform("video_fullscreen_change",{})}else this.removeOffsetStylings()}this.$VideoPlayerController33=n};l.prototype.logFullscreenChanged=function(m){"use strict";var n=m?{player_format:a("VideoPlayerFormats").FULL_SCREEN}:{player_format:!this.$VideoPlayerController61?a("VideoPlayerFormats").INLINE:a("VideoPlayerFormatsMap")[this.$VideoPlayerController61]};if(a("VideoPlayerHTML5Experiments").deprecateEnteredExitedFsEvents)this.logEvent(a("VideoPlayerLoggerEvent").PLAYER_FORMAT_CHANGED,n);else if(a("VideoPlayerHTML5Experiments").enteredExitedFsLoggingFix)this.logEvent(m?a("VideoPlayerLoggerEvent").ENTERED_FS:a("VideoPlayerLoggerEvent").EXITED_FS,n);else this.logEvent(m?a("VideoPlayerLoggerEvent").ENTERED_FS:a("VideoPlayerLoggerEvent").EXITED_FS)};l.prototype.setVideoPlayerAPIDimensions=function(m,n){"use strict";if(this.getVideoAPI().setDimensions)this.getVideoAPI().setDimensions(m,n)};l.prototype.removeOffsetStylings=function(){"use strict";var m=this.$VideoPlayerController91;if(m===null||m===undefined)return;if(this.$VideoPlayerController90===a("CoverVideoOffsetType").HORIZONTAL){this.getVideoNode().style.setProperty("left","0");a("CSS").removeClass(this.getVideoNode(),"_blh")}else if(this.$VideoPlayerController90===a("CoverVideoOffsetType").VERTICAL){this.getVideoNode().style.setProperty("top","0");a("CSS").removeClass(this.getVideoNode(),"_bli")}};l.prototype.addOffsetStylings=function(){"use strict";var m=this.$VideoPlayerController91;if(m===null||m===undefined)return;if(this.$VideoPlayerController90===a("CoverVideoOffsetType").HORIZONTAL){this.getVideoNode().style.setProperty("left",m+"px");a("CSS").addClass(this.getVideoNode(),"_blh")}else if(this.$VideoPlayerController90===a("CoverVideoOffsetType").VERTICAL){this.getVideoNode().style.setProperty("top",m+"px");a("CSS").addClass(this.getVideoNode(),"_bli")}};l.prototype.isFullscreen=function(){"use strict";return this.$VideoPlayerController34||a("FullScreen").isFullScreen()&&this.$VideoPlayerController14===a("getFullScreenElement")()};l.prototype.toggleFullscreen=function(){"use strict";var m=this.isFullscreen(),n=this.getContainerNode();if(a("FullScreen").toggleFullScreen(n)){if(!m){this.$VideoPlayerController34=true;n.setAttribute("data-fullscreen","true")}a("CSS").addClass(n,"_1hwh");this.$VideoPlayerController24=a("FullScreen").subscribe("changed",this.$VideoPlayerController119.bind(this))}};l.prototype.instreamVideoStart=function(){"use strict";a("CSS").addClass(this.getContainerNode(),"_24pm")};l.prototype.instreamVideoEnd=function(){"use strict";a("CSS").removeClass(this.getContainerNode(),"_24pm")};l.prototype.unmute=function(){"use strict";if(!this.isState("loading")){this.getVideoAPI().unmute();a("VideoPlayerVolumeSettings").saveVolume(a("VideoPlayerVolumeSettings").getLastVolumeBeforeMute());if(this.$VideoPlayerController69&&this.getVideoAPI().areSubtitlesActive())this.$VideoPlayerController120()}else this.$VideoPlayerController56=true};l.prototype.isMuted=function(){"use strict";return this.getVideoAPI().isMuted()};l.prototype.mute=function(){"use strict";if(this.$VideoPlayerController69&&!this.getVideoAPI().areSubtitlesActive())this.$VideoPlayerController120();this.getVideoAPI().mute();a("VideoPlayerVolumeSettings").saveVolume(0)};l.prototype.getMediaID=function(){"use strict";return this.getVideoID()};l.prototype.getPlaybackDuration=function(){"use strict";return this.getVideoAPI().getPlaybackDuration()};l.prototype.getVideoID=function(){"use strict";return this.$VideoPlayerController75};l.prototype.getVideoChannelID=function(){"use strict";return this.$VideoPlayerController73};l.prototype.getVideoURL=function(){"use strict";return this.$VideoPlayerController78};l.prototype.$VideoPlayerController109=function(){"use strict";var m=this.getVideoAPI(),n=new(a("SubscriptionsHandler"))();this.$VideoPlayerController6=n;var o={buffered:function(){return this.setBuffering(false)}.bind(this),buffering:function(){return this.setBuffering(true)}.bind(this),streamInterrupted:function(){return this.$VideoPlayerController41.startInterrupt()}.bind(this),streamResumed:function(){return this.$VideoPlayerController41.endInterrupt()}.bind(this),beginPlayback:function(p){return this.$VideoPlayerController110(p)}.bind(this),updateStatus:function(p){return this.$VideoPlayerController113(p)}.bind(this),updateBuffer:function(p){return this.$VideoPlayerController121(p)}.bind(this),logEvent:function(p){return this.$VideoPlayerController115(p.logData)}.bind(this),pausePlayback:function(){return this.$VideoPlayerController116()}.bind(this),seekEnd:function(p){return this.$VideoPlayerController117(p)}.bind(this),clickForTracking:function(){return a("logVideosClickTracking")(this.getVideoNode())}.bind(this),error:function(p){return this.logError(p)}.bind(this),finishPlayback:function(){return this.$VideoPlayerController118()}.bind(this)};n.addSubscriptions.apply(n,Object.keys(o).map(function(p){return m.addListener(p,o[p])}));n.addSubscriptions.apply(n,a("VideoPlayerApiEvents").map(function(p){return a("forwardEvent")(m,this,p)}.bind(this)))};l.prototype.$VideoPlayerController121=function(m){"use strict";var n=a("VideoPlayerExperiments").suspendPageletDisplayBufferThreshold;if(m.duration>=n&&this.$VideoPlayerController83){this.$VideoPlayerController83();this.$VideoPlayerController83=null}};l.prototype.$VideoPlayerController107=function(){"use strict";if(this.$VideoPlayerController6)this.$VideoPlayerController6.release()};l.prototype.seek=function(m){"use strict";this.emit("seekRequested",m);this.getVideoAPI().seek(m)};l.prototype.pause=function(m){"use strict";if(this.isState("loading"))this.$VideoPlayerController55=null;else if(this.isState("playing"))this.getVideoAPI().pause(m);else if(this.$VideoPlayerController47)this.getVideoAPI().pause(m);this.$VideoPlayerController93(false);this.$VideoPlayerController58=false;this.emit("pauseRequested",m)};l.prototype.stopHeartbeat=function(){"use strict";a("clearInterval")(this.$VideoPlayerController26);this.$VideoPlayerController26=null};l.prototype.startHeartbeat=function(){"use strict";if(this.$VideoPlayerController26||!a("VideoPlayerHTML5Experiments").heartbeatIntervalMS)return;this.$VideoPlayerController26=a("setInterval")(this.emitHeartbeat,a("VideoPlayerHTML5Experiments").heartbeatIntervalMS)};l.prototype.isPlayerVersion=function(m){"use strict";return this.getPlayerVersion()===m||this.$VideoPlayerController88&&this.$VideoPlayerController122(m)===this.getPlayerVersion()};l.prototype.isAutoplayable=function(){"use strict";return this.$VideoPlayerController60};l.prototype.$VideoPlayerController123=function(){"use strict";return a("ViewportTrackingHelper").isVisible(this.getVideoNode(),0)};l.prototype.$VideoPlayerController97=function(){"use strict";if(a("Visibility").isHidden())a("Visibility").once(a("Visibility").VISIBLE,function(){return this.$VideoPlayerController97()}.bind(this));else{if(!this.$VideoPlayerController123())a("JSLog").warn("immediateplay on a hidden video player: %s %s %s %s",this.getPlayerOrigin(),this.getPlayerSuborigin(),this.getSource(),a("ScriptPath").getScriptPath());this.play(a("VideoPlayerReason").AUTOPLAY)}};l.prototype.isBuffering=function(){"use strict";return this.$VideoPlayerController29};l.prototype.setBuffering=function(m){"use strict";if(m!==this.$VideoPlayerController29){this.$VideoPlayerController29=m;if(this.$VideoPlayerController29){this.$VideoPlayerController41.startBuffering(this.getCurrentTimePosition());if(this.$VideoPlayerController92){this.$VideoPlayerController124();this.$VideoPlayerController86=setTimeout(this.$VideoPlayerController125,this.$VideoPlayerController92)}}else{this.$VideoPlayerController41.endBuffering();this.$VideoPlayerController124()}this.emit("bufferingChanged")}};l.prototype.setSmartBufferAdjustmentEnabled=function(m){"use strict";var n=this.getVideoAPI();if("setSmartBufferAdjustmentEnabled"in n)n.setSmartBufferAdjustmentEnabled(m)};l.prototype.setVideoStreamOffset=function(m){"use strict";var n=this.getVideoAPI();if(typeof n.setVideoStreamOffset==="function")n.setVideoStreamOffset(m)};l.prototype.$VideoPlayerController124=function(){"use strict";if(this.$VideoPlayerController86){clearTimeout(this.$VideoPlayerController86);this.$VideoPlayerController86=0}};l.prototype.isLiveVideo=function(){"use strict";return this.$VideoPlayerController36};l.prototype.isInline=function(){"use strict";return!!this.$VideoPlayerController61&&a("VideoPlayerFormatsMap")[this.$VideoPlayerController61]===a("VideoPlayerFormats").INLINE&&!this.isFullscreen()};l.prototype.isFacecastAudio=function(){"use strict";return this.$VideoPlayerController31};l.prototype.isStreamInterrupted=function(){"use strict";var m=this.$VideoPlayerController72;return!!(m&&m.isStreamInterrupted&&m.isStreamInterrupted())};l.prototype.setVolume=function(m){"use strict";a("VideoPlayerVolumeSettings").saveVolume(m);this.getVideoAPI().setVolume(m)};l.prototype.getDOMPosition=function(){"use strict";return a("getElementPosition")(this.getRootNode())};l.prototype.clickVideo=function(){"use strict";this.emit("clickVideo");this.$VideoPlayerController25=true};l.prototype.hasSeenClick=function(){"use strict";return!!this.$VideoPlayerController25};l.prototype.isAd=function(){"use strict";return!!this.$VideoPlayerController2};l.prototype.shouldCalculateViewability=function(){"use strict";if(this.isAd())return true;var m=this.$VideoPlayerController41.getFTdata();if(m==null)return false;var n=m.ft;if(n==null)return false;return!!n.ei};l.prototype.isInstreamAd=function(){"use strict";return!!this.$VideoPlayerController35};l.prototype.getAdClientToken=function(){"use strict";return this.$VideoPlayerController2};l.prototype.$VideoPlayerController126=function(){"use strict";var m=null,n=null,o=false,p=null;if(!this.isState("loading")&&!this.isState("fallback")){if(this.$VideoPlayerController15===null)this.$VideoPlayerController15=this.getVideoAPI().getCurrentlyPlayingStreamInfoID();m=this.getVideoAPI().getEstimatedBandwidth();n=this.getVideoAPI().getAvailableVideoQualities().length;o=this.getVideoAPI().getIsAbrEnabled();p=this.getPlaybackDuration()}var q=babelHelpers["extends"]({},this.$VideoPlayerController68);this.$VideoPlayerController21.forEach(function(s,t){q[t]=s(t,this)}.bind(this));var r={};if(this.getOption("SphericalVideoSpatialAudioController","hasSpatialAudio"))r.audio_ch_conf=this.getOption("SphericalVideoSpatialAudioController","getSpatialAudioChannelLayout");return babelHelpers["extends"]({ad_client_token:this.$VideoPlayerController2,available_qualities:n,access_token:this.$VideoPlayerController1,autoplay_eligible:this.isAutoplayable(),autoplay_setting:this.$VideoPlayerController8,broadcaster_origin:this.$VideoPlayerController85,projection:this.$VideoPlayerController51,player_version:this.getPlayerVersion(),flash_version:a("ifRequired")("Flash",function(s){return s.getVersionString()}),video_id:this.getVideoID(),player_state:this.$VideoPlayerController62,player_origin:this.$VideoPlayerController48,player_suborigin:this.$VideoPlayerController49,playback_is_broadcast:this.$VideoPlayerController28,playback_duration:p,referrer:document.referrer,streaming_format:this.getStreamingFormat(),video_time_position:this.getCurrentTimePosition(),playback_is_live_streaming:this.$VideoPlayerController36,video_channel_id:this.$VideoPlayerController73,reaction_video_channel_type:this.$VideoPlayerController57,fbcdn_pop:this.$VideoPlayerController45,representation_id:this.$VideoPlayerController15,video_bandwidth:m,is_abr_enabled:o,feed_position:this.getDataInsertionPosition()},g?g.getPlayerLoggingData():{},this.$VideoPlayerController74,this.$VideoPlayerController9,q,r)};l.prototype.$VideoPlayerController104=function(){"use strict";var m=this.getVideoInfo_DEPRECATED();if(!m)return null;var n=m.resourceUrl,o=/scontent-([a-z]+)\./.exec(n);if(!o)return null;return o[1]};l.prototype.getVideoInfo_DEPRECATED=function(){"use strict";if(this.isState("loading")||this.isState("fallback"))return null;return this.getVideoAPI().getVideoInfo()};l.prototype.getDebugInfo=function(){"use strict";var m=this.getVideoInfo_DEPRECATED(),n={initializationTime:this.$VideoPlayerController52,initializationTimestamp:this.$VideoPlayerController53,version:this.getPlayerVersion(),stallCount:this.$VideoPlayerController41.getCumulativeStallCount(),stallTime:this.$VideoPlayerController41.getCumulativeStallTime(),interruptCount:this.$VideoPlayerController41.getCumulativeInterruptCount(),interruptTime:this.$VideoPlayerController41.getCumulativeInterruptTime(),state:this.$VideoPlayerController62,canPlayType:a("mapObject")(a("VideoMimeTypes"),a("canVideoPlayType")),loggedError:this.$VideoPlayerController40,lastError:this.$VideoPlayerController38,droppedFrames:!!this.$VideoPlayerController72&&this.$VideoPlayerController72.getDroppedFrames(),totalFrames:!!this.$VideoPlayerController72&&this.$VideoPlayerController72.getTotalFrames(),videoSource:!!this.$VideoPlayerController72&&this.$VideoPlayerController72.getVideoNodeSource(),viewabilityPercentage:!!this.$VideoPlayerController80&&this.$VideoPlayerController80.getViewability()},o={videoID:this.getVideoID()};if(!m)return{player:n,currentVideo:o};return{currentVideo:babelHelpers["extends"]({},o,{streamType:m.streamType,isLiveStream:m.isLiveStream,liveManifestUrl:m.liveManifestUrl,isHD:m.isHD,hasHD:m.hasHD,resourceUrl:m.resourceUrl,hasSubtitles:m.hasSubtitles,hasRateLimit:!!m.hasUnlimitedSrc,isRateLimited:m.hasUnlimitedSrc&&!m.useUnlimitedSrc,tagHD:m.tagHD,tagSD:m.tagSD,projection:this.$VideoPlayerController51,streamId:this.$VideoPlayerController15,audioStreamId:this.getVideoAPI().getAudioStreamInfoIDDebug(),dashAudioFormat:this.getVideoAPI().getDashAudioConfigurationDebug()}),player:n}};l.prototype.getLastError=function(){"use strict";return this.$VideoPlayerController38};l.prototype.getStallCount=function(){"use strict";return this.$VideoPlayerController41.getStallCount()};l.prototype.hasSubtitles=function(){"use strict";return this.getVideoAPI().hasSubtitles()};l.prototype.areSubtitlesActive=function(){"use strict";return this.getVideoAPI().areSubtitlesActive()};l.prototype.areHLSActive=function(){"use strict";return this.getVideoAPI().areHLSActive()};l.prototype.isRTMP_DEPRECATED=function(){"use strict";return this.getVideoAPI().isRTMP()};l.prototype.toggleSubtitles=function(){"use strict";this.$VideoPlayerController120();this.logEvent(a("VideoPlayerLoggerEvent").CAPTION_CHANGE);this.$VideoPlayerController69=false};l.prototype.$VideoPlayerController120=function(){"use strict";this.getVideoAPI().toggleSubtitles();this.$VideoPlayerController106()};l.prototype.$VideoPlayerController106=function(){"use strict";if(this.hasSubtitles()&&this.areSubtitlesActive())this.$VideoPlayerController10="on";else this.$VideoPlayerController10="off"};l.prototype.isHD=function(){"use strict";return this.getSelectedVideoQuality()==this.getAvailableVideoQualities().pop()};l.prototype.hasHD=function(){"use strict";return this.getAvailableVideoQualities().length>1};l.prototype.toggleHD=function(){"use strict";if(this.isHD())this.setPreferredVideoQuality(this.getAvailableVideoQualities()[0]);else this.setPreferredVideoQuality(this.getAvailableVideoQualities().pop())};l.prototype.setPreferredVideoQuality=function(m){"use strict";this.getVideoAPI().setPreferredVideoQuality(m)};l.prototype.unsetPreferredVideoQuality=function(){"use strict";this.getVideoAPI().unsetPreferredVideoQuality()};l.prototype.getPreferredVideoQuality=function(){"use strict";return this.getVideoAPI().getPreferredVideoQuality()};l.prototype.getSelectedVideoQuality=function(){"use strict";return this.getVideoAPI().getSelectedVideoQuality()};l.prototype.getAvailableVideoQualities=function(){"use strict";return this.getVideoAPI().getAvailableVideoQualities()};l.prototype.getVideoProjection=function(){"use strict";return this.getVideoAPI().getVideoProjection()};l.prototype.canAutoSelectVideoQuality=function(){"use strict";return this.getVideoAPI().canAutoSelectVideoQuality()};l.prototype.switchToStreamType=function(m){"use strict";this.getVideoAPI().switchToStreamType(m)};l.prototype.$VideoPlayerController112=function(){"use strict";this.getVideoAPI().replaceVideoDataFromURL(a("XVideoDataController").getURIBuilder().setString("video_id",this.getVideoID()).setInt("scrubbing_preference",h).setString("source",this.$VideoPlayerController61).getURI().toString())};l.prototype.$VideoPlayerController111=function(){"use strict";this.getVideoAPI().replaceVideoDataFromURL(a("XVideoDataController").getURIBuilder().setString("video_id",this.getVideoID()).setInt("scrubbing_preference",i).setString("source",this.$VideoPlayerController61).getURI().toString())};l.prototype.$VideoPlayerController105=function(m){"use strict";var n=this.getVideoInfo_DEPRECATED();if(n!=null)return Object.assign({resource_url:n.resourceUrl,liveStream:n.isLiveStream,hd:n.isHD},m);return m};l.prototype.$VideoPlayerController127=function(){"use strict";var m=this.getDOMPosition(),n=a("getViewportDimensions")().height,o=null;if(m.y<=0)o=m.y;else if(m.y+m.height<n)o=0;else o=m.y+m.height-n;return o};l.prototype.logEvent=function(event,m){"use strict";if(this.$VideoPlayerController82)return undefined;var n=++this.$VideoPlayerController22,o=Object.assign(this.$VideoPlayerController126(),m),p=this.getOriginalPlayReason();if(p&&event!==a("VideoPlayerLoggerEvent").DISPLAYED)o.video_play_reason=p;if(event===a("VideoPlayerLoggerEvent").FINISHED_PLAYING)o.viewport_distance=this.$VideoPlayerController127();if(event===a("VideoPlayerLoggerEvent").MUTED||event===a("VideoPlayerLoggerEvent").UNMUTED||event===a("VideoPlayerLoggerEvent").STARTED_PLAYING||event===a("VideoPlayerLoggerEvent").CAPTION_CHANGE||event===a("VideoPlayerLoggerEvent").UNPAUSED)o.caption_state=this.$VideoPlayerController10;if(this.$VideoPlayerController79&&a("VideoViewabilityKeyEvents").Events.includes(event)){o.current_viewability_percentage=this.$VideoPlayerController80.getViewability();this.$VideoPlayerController80.setLastLoggedViewability(o.current_viewability_percentage)}o.seq_num=n;var q=this.$VideoPlayerController41.logEvent(event,o);this.emit("debug/vpcLogEvent",q);return q};l.prototype.getState=function(){"use strict";return this.$VideoPlayerController62};l.prototype.getStreamingFormat=function(){"use strict";var m=this.getVideoInfo_DEPRECATED()||{};return m.streamType||this.$VideoPlayerController37};l.prototype.setPlaybackRate=function(m){"use strict";if(this.getVideoAPI().setPlaybackRate)this.getVideoAPI().setPlaybackRate(m)};l.prototype.setState=function(m){"use strict";if(this.isState(a("VideoPlayerStates").DESTROYED)||this.isState(a("VideoPlayerStates").FALLBACK)&&!this.isFallbackRecoverable())return;this.$VideoPlayerController62=m;if(this.$VideoPlayerController62==="fallback"){a("CSS").addClass(this.getRootNode(),"_3-n5");this.$VideoPlayerController107()}this.emit("stateChange")};l.prototype.isState=function(m){"use strict";return this.$VideoPlayerController62===m};l.prototype.isIntentionallyViewing=function(){"use strict";return this.isState("playing")&&!this.isMuted()};l.prototype.abortLoading=function(m){"use strict";if(this.isState("loading")||this.isState("fallback"))return;if(a("VideoPlayerExperiments").seekZeroWhenAbortLoadingFinishedVideos&&!(a("VideoPlayerExperiments").seekZeroOnlyVodVideo&&this.$VideoPlayerController36)&&this.isState("finished"))this.seek(0);if(this.$VideoPlayerController83){this.$VideoPlayerController83();this.$VideoPlayerController83=null}this.getVideoAPI().abortLoading(m||{});this.stopHeartbeat()};l.prototype.preload=function(){"use strict";if(this.isState("loading")||this.isState("fallback"))return;this.getVideoAPI().preload()};l.prototype.getPlayerVersion=function(){"use strict";var m=null;if(this.$VideoPlayerController5.getPlayerVersion)m=this.$VideoPlayerController5.getPlayerVersion();else m=this.$VideoPlayerController50;return this.$VideoPlayerController88?this.$VideoPlayerController122(m):m};l.prototype.$VideoPlayerController122=function(m){"use strict";switch(m){case a("VideoPlayerVersions").SILVERCITY:return a("VideoPlayerVersions").REACT_SILVERCITY;case a("VideoPlayerVersions").PLEASANTVILLE:return a("VideoPlayerVersions").REACT_PLEASANTVILLE;default:return a("VideoPlayerVersions").REACT}};l.prototype.registerOption=function(m,n,o,p){"use strict";var q=this.$VideoPlayerController13.get(m);if(!q){q=new(a("Map"))();this.$VideoPlayerController13.set(m,q)}if(q.has(n))throw new Error("An option can only be registered once for each component");q.set(n,{getter:o,setter:p});this.emit("optionsChange")};l.prototype.unregisterOption=function(m,n){"use strict";var o=this.$VideoPlayerController13.get(m);if(!o)throw new Error('The component "'+m+'" has no options registered');if(!o.has(n))throw new Error('The component "'+m+'" has no option "'+n+'" registered');o["delete"](n);if(!o.size)this.$VideoPlayerController13["delete"](m);this.emit("optionsChange")};l.prototype.getComponents=function(){"use strict";return this.$VideoPlayerController13.keys()};l.prototype.getOptions=function(m){"use strict";var n=this.$VideoPlayerController13.get(m);if(n)return n.keys();return a("enumerate")([])};l.prototype.hasOption=function(m,n){"use strict";var o=this.$VideoPlayerController13.get(m);if(!o)return false;if(!o.has(n))return false;return true};l.prototype.getOption=function(m,n){"use strict";var o=this.$VideoPlayerController13.get(m);if(!o)return undefined;var p=o.get(n);if(!p)return undefined;return p.getter()};l.prototype.setOption=function(m,n,o){"use strict";var p=this.$VideoPlayerController13.get(m);if(!p)throw new Error("Component not registered");var q=p.get(n);if(!q)throw new Error("Option not registered");var r=q.setter;if(r)return r(o);throw new Error("Read-only option")};l.prototype.$VideoPlayerController98=function(){"use strict";var m=a("DOMQuery").scry(this.$VideoPlayerController59,"^._5pat");return m.length?m[0]:null};l.prototype.registerDrawer=function(m,n){"use strict";return this.$VideoPlayerController20.register(m,n)};l.prototype.getVideoPath=function(){"use strict";return this.$VideoPlayerController77};l.prototype.setAllowCrossPageTransition=function(m){"use strict";this.$VideoPlayerController87=m};l.prototype.cleanOnLeave=function(){"use strict";this.pause(a("VideoPlayerReason").UNLOADED);this.destroy()};l.prototype.switchToFullVideo=function(){"use strict";this.pause(a("VideoPlayerReason").UNLOADED);this.getVideoAPI().reloadDashManifest().done(function(){this.play();this.emit("switchedToFullVideo");this.emit("playLiveVODHighlights/showUFI")}.bind(this))};l.prototype.switchToLiveVODHighlights=function(){"use strict";this.pause(a("VideoPlayerReason").UNLOADED);this.getVideoAPI().reloadLiveVODHighlightsManifest().done(function(){this.play();this.emit("switchedToLiveVODHighlights");this.emit("playLiveVODHighlights/hideUFI")}.bind(this))};l.prototype.isPlayingVODHighlights=function(){"use strict";if(this.isState("loading")||this.isState("fallback")||this.isState("destroyed"))return false;return this.getVideoAPI().isPlayingVODHighlights()};l.prototype.isLiveVODHighlightsAvailable=function(){"use strict";if(this.isState("loading")||this.isState("fallback")||this.isState("destroyed"))return false;return this.getVideoAPI().isLiveVODHighlightsAvailable()};b.exports=l}),null);
__d("VideoViewabilityPercentage",[],(function a(b,c,d,e,f,g){f.exports=Object.freeze({OFFSCREEN:-2,VIEWABLE_UNKNOWN:-1,VIEWABLE_0:0,VIEWABLE_25:25,VIEWABLE_50:50,VIEWABLE_75:75,VIEWABLE_100:100})}),null);
__d("ViewabilityVideoElement",["UITinyViewportAction","VideoPlayerExperiments","getElementPosition","getViewportDimensions"],(function a(b,c,d,e,f,g){var h=42;function i(j,k){"use strict";this.$ViewabilityVideoElement1=j;this.$ViewabilityVideoElement2=k}i.prototype.feedViewabilityPercentage=function(){"use strict";var j=c("UITinyViewportAction").isTinyHeight();return this.$ViewabilityVideoElement3(!j)};i.prototype.viewabilityPercentage=function(){"use strict";return this.$ViewabilityVideoElement3(false)};i.prototype.isTopElement=function(j,k,l){"use strict";var m=document.elementFromPoint(k,l);return m===j||!!j&&j.contains(m)||!!m&&m.contains(j)};i.prototype.$ViewabilityVideoElement4=function(j,k,l){"use strict";var m=c("VideoPlayerExperiments").viewabilityMinBlockSize||200,n=j[0],o=j[1],p=k[0],q=k[1],r=o-n,s=q-p,t=r===0||s===0,u=Math.floor((t?Math.max:Math.min)(r,s)*m/1e3);u=Math.max(u,1);var v=r>0?Math.ceil(u/2):0,w=s>0?Math.ceil(u/2):0,x=0,y=0;if(l===null)return[0,1];for(var z=n+v;z<=o;z+=u)for(var A=p+w;A<=q;A+=u){x+=1;if(this.isTopElement(l,z,A))y+=1}if(x===0)return[0,1];return[y,x]};i.prototype.$ViewabilityVideoElement5=function(j,k,l,m,n,o){"use strict";var p=1,q=m+p,r=m+j-p,s=l+p,t=l+k-p,u=this.$ViewabilityVideoElement4([q,r],[s,s],n),v=u[0],w=u[1],x=this.$ViewabilityVideoElement4([q,r],[t,t],n),y=x[0],z=x[1],A=this.$ViewabilityVideoElement4([q,q],[s,t],n),B=A[0],C=A[1],D=this.$ViewabilityVideoElement4([r,r],[s,t],n),E=D[0],F=D[1],G=0,H=0;G=w+z+C+F;H=v+y+B+E;var I=H/G;if(I===1||I===0)return o*I;else{var J=this.$ViewabilityVideoElement4([q,r],[s,t],n),K=J[0],L=J[1];G+=L;H+=K;return o*(H/G)}};i.prototype.$ViewabilityVideoElement3=function(j){"use strict";var k=c("getViewportDimensions")(),l=k.width,m=k.height,n=c("getElementPosition")(this.$ViewabilityVideoElement1);if(n.width===0||n.height===0)return 0;var o=n.x,p=n.x+n.width,q=n.y,r=n.y+n.height,s=j?h:0;if(p<=0||o>=l||r<=s||q>=m)return 0;var t=Math.min(p,l)-Math.max(o,0),u=Math.min(r,m)-Math.max(q,s),v=t*u*100/(n.width*n.height);if(c("VideoPlayerExperiments").viewabilityByPTS){var w=Math.max(q,s),x=Math.max(o,0);v=this.$ViewabilityVideoElement5(t,u,w,x,this.$ViewabilityVideoElement2,v)}return v};f.exports=i}),null);
__d("VideoViewabilityLogging",["VideoPlayerController","VideoPlayerExperiments","VideoPlayerLoggerEvent","VideoViewabilityPercentage","ViewabilityVideoElement","BanzaiODS","Map"],(function a(b,c,d,e,f,g){var h=c("VideoPlayerExperiments").viewabilityPollingRate,i=new(c("Map"))([[0,c("VideoViewabilityPercentage").VIEWABLE_0],[25,c("VideoViewabilityPercentage").VIEWABLE_25],[50,c("VideoViewabilityPercentage").VIEWABLE_50],[75,c("VideoViewabilityPercentage").VIEWABLE_75],[100,c("VideoViewabilityPercentage").VIEWABLE_100]]);function j(k,l,m){"use strict";this.$VideoViewabilityLogging12=function(n){if(!this.$VideoViewabilityLogging14())return;if(n-this.$VideoViewabilityLogging1>h){this.$VideoViewabilityLogging10();this.$VideoViewabilityLogging1=n}this.$VideoViewabilityLogging2=window.requestAnimationFrame(this.$VideoViewabilityLogging12)}.bind(this);this.$VideoViewabilityLogging9=function(){this.$VideoViewabilityLogging13()}.bind(this);this.$VideoViewabilityLogging8=function(){this.setLastLoggedViewability(this.getViewability());this.$VideoViewabilityLogging11()}.bind(this);this.$VideoViewabilityLogging1=0;this.$VideoViewabilityLogging4=k;this.$VideoViewabilityLogging5=new(c("ViewabilityVideoElement"))(l,m);this.$VideoViewabilityLogging6()}j.prototype.getViewability=function(){"use strict";var k=void 0;if(this.$VideoViewabilityLogging4.isInline())k=this.$VideoViewabilityLogging5.feedViewabilityPercentage();else k=this.$VideoViewabilityLogging5.viewabilityPercentage();return this.$VideoViewabilityLogging7(k)};j.prototype.setLastLoggedViewability=function(k){"use strict";this.$VideoViewabilityLogging3=k};j.prototype.$VideoViewabilityLogging6=function(){"use strict";this.$VideoViewabilityLogging4.addListener("beginPlayback",this.$VideoViewabilityLogging8);this.$VideoViewabilityLogging4.addListener("pausePlayback",this.$VideoViewabilityLogging9)};j.prototype.$VideoViewabilityLogging10=function(){"use strict";if(c("VideoPlayerExperiments").viewabilityByPTS)window.performance.mark("getViewability-start");var k=this.getViewability();if(c("VideoPlayerExperiments").viewabilityByPTS){window.performance.mark("getViewability-end");window.performance.measure("getViewability","getViewability-start","getViewability-end");setTimeout(function(){var l=performance.getEntriesByName("getViewability"),m=l.length;if(m>0){var n=0;l.forEach(function(o){n+=o.duration});n=Math.round(n/m);c("BanzaiODS").bumpEntityKey("video_viewability_logging","getViewability_calls",m);if(n>13)c("BanzaiODS").bumpEntityKey("video_viewability_logging","unable_to_calculate_viewability_in_13_ms");window.performance.clearMarks("getViewability-start");window.performance.clearMarks("getViewability-end");window.performance.clearMeasures("getViewability")}},1e4)}if(k!=this.$VideoViewabilityLogging3){this.$VideoViewabilityLogging4.logEvent(c("VideoPlayerLoggerEvent").VIEWABILITY_CHANGED,{current_viewability_percentage:k,last_viewability_percentage:this.$VideoViewabilityLogging3});this.$VideoViewabilityLogging3=k}};j.prototype.$VideoViewabilityLogging11=function(){"use strict";this.$VideoViewabilityLogging2=window.requestAnimationFrame(this.$VideoViewabilityLogging12)};j.prototype.$VideoViewabilityLogging13=function(){"use strict";window.cancelAnimationFrame(this.$VideoViewabilityLogging2)};j.prototype.$VideoViewabilityLogging14=function(){"use strict";if(this.$VideoViewabilityLogging4.getVideoAPI().isPaused()!==undefined)return!this.$VideoViewabilityLogging4.getVideoAPI().isPaused();return this.$VideoViewabilityLogging4.getState()==="playing"};j.prototype.$VideoViewabilityLogging7=function(k){"use strict";var l=c("VideoViewabilityPercentage").OFFSCREEN;if(k<=0)return l;for(var m=i,n=Array.isArray(m),o=0,m=n?m:m[typeof Symbol==="function"?Symbol.iterator:"@@iterator"]();;){var p;if(n){if(o>=m.length)break;p=m[o++]}else{o=m.next();if(o.done)break;p=o.value}var q=p,r=q[0],s=q[1];if(k>=r)l=s}return l};f.exports=j}),null);
__d("VideoCover",["invariant","Bootloader","CSS","EventListener","SubscriptionsHandler"],(function a(b,c,d,e,f,g,h){function i(j,k,l){var m=arguments.length<=3||arguments[3]===undefined?null:arguments[3];"use strict";this.$VideoCover7=new(c("SubscriptionsHandler"))();this.$VideoCover13=function(){if(this.$VideoCover5)c("CSS").show(this.$VideoCover1)}.bind(this);this.$VideoCover14=function(){if(this.$VideoCover5)c("CSS").hide(this.$VideoCover1)}.bind(this);this.$VideoCover9=function(){if(this.$VideoCover3!=null&&this.$VideoCover3.length>0)c("Bootloader").loadModules(["PhotoSnowlift"],function(n){return n.bootstrap(this.$VideoCover3)}.bind(this),"VideoCover");else if(this.$VideoCover8)this.$VideoCover8.clickVideo()}.bind(this);this.$VideoCover10=function(){c("CSS").hide(this.$VideoCover1)}.bind(this);this.$VideoCover12=function(){if(this.$VideoCover8){var n=this.$VideoCover8.getOption("Looping","isLooping");if(this.$VideoCover4||n)return;c("CSS").show(this.$VideoCover1)}}.bind(this);this.$VideoCover11=function(){if(this.$VideoCover8&&this.$VideoCover8.isState("fallback")&&this.$VideoCover6)c("CSS").show(this.$VideoCover1)}.bind(this);j instanceof Element||h(0);this.$VideoCover1=j;k[0]instanceof Element||h(0);this.$VideoCover2=k[0];this.$VideoCover3=l;if(m){this.$VideoCover4=m.hiddenAfterFinish;this.$VideoCover5=m.showWhileBuffering;this.$VideoCover6=m.showAfterFallback}c("EventListener").listen(this.$VideoCover1,"click",this.$VideoCover9)}i.prototype.disable=function(){"use strict";this.$VideoCover7.release();this.$VideoCover8=null};i.prototype.enable=function(j){"use strict";this.$VideoCover8=j;if(j.getState()==="playing")this.$VideoCover10();this.$VideoCover7.addSubscriptions(j.addListener("stateChange",this.$VideoCover11),j.addListener("beginPlayback",this.$VideoCover10),j.addListener("finishPlayback",this.$VideoCover12),j.addListener("buffering",this.$VideoCover13),j.addListener("buffered",this.$VideoCover14))};i.prototype.getCurrentCover=function(){"use strict";return this.$VideoCover2};i.prototype.setSnowLiftURI=function(j){"use strict";this.$VideoCover3=j};f.exports=i}),null);
__d("VideoNodeStaledScreen",["CSS","EventListener","SubscriptionsHandler","VideoPlayerController"],(function a(b,c,d,e,f,g){function h(i){"use strict";this.$VideoNodeStaledScreen3=new(c("SubscriptionsHandler"))();this.$VideoNodeStaledScreen5=function(){c("CSS").show(this.$VideoNodeStaledScreen1)}.bind(this);this.$VideoNodeStaledScreen4=function(){c("CSS").hide(this.$VideoNodeStaledScreen1)}.bind(this);this.$VideoNodeStaledScreen1=i;this.$VideoNodeStaledScreen2=null;c("EventListener").listen(this.$VideoNodeStaledScreen1,"click",this.$VideoNodeStaledScreen4)}h.prototype.enable=function(i){"use strict";this.$VideoNodeStaledScreen2=i;this.$VideoNodeStaledScreen3.addSubscriptions(this.$VideoNodeStaledScreen2.addListener("videoNodeStaled",this.$VideoNodeStaledScreen5))};h.prototype.disable=function(){"use strict";this.$VideoNodeStaledScreen3.release();this.$VideoNodeStaledScreen2=null};f.exports=h}),null);
__d("concatArrayBuffer",[],(function a(b,c,d,e,f,g){"use strict";var h=function h(i,j){var k=new Uint8Array(i.byteLength+j.byteLength);k.set(new Uint8Array(i),0);k.set(new Uint8Array(j),i.byteLength);return k.buffer};f.exports=h}),null);
__d("extractCEA608",["JSResource"],(function a(b,c,d,e,f,g){var h=null;function i(j,k){if(!h)h=c("JSResource")("CEA608Extractor").__setRef("extractCEA608").load().then(function(l){return new l(k)});return h.then(function(l){return l.extract(j)})}f.exports=i}),null);
__d("BufferReplacementHelper",["TaggedTimeRanges"],(function a(b,c,d,e,f,g){"use strict";function h(k,l,m,n){return k.startTime>l-m&&k.endTime<l+n}function i(k,l,m,n){var o=n.get(k.startTime);return!!o&&m(l,o.id)>0}function j(k,l,m,n,o,p,q,r){var s=[];for(var t=m;t<k.length;t++){if(h(k[t],l,q,r)&&i(k[t],n,o,p))s.push(k[t]);if(k[t].endTime>l+r)break}for(var u=m-1;u>=0;u--){if(h(k[u],l,q,r)&&i(k[u],n,o,p))s.push(k[u]);if(k[u].startTime<l-q)break}return s}f.exports={getSegmentsToReplaceLowerQuality:j}}),null);
__d("MultipleSegmentsProvider",["invariant"],(function a(b,c,d,e,f,g,h){"use strict";function i(j){this.$MultipleSegmentsProvider2=[];this.$MultipleSegmentsProvider1=j}i.prototype.getNumberOfSegments=function(){return this.$MultipleSegmentsProvider1};i.prototype.setFutureSegments=function(j){this.$MultipleSegmentsProvider2=j};i.prototype.getFetchRange=function(j){this.$MultipleSegmentsProvider2.length>0||h(0);var k=this.$MultipleSegmentsProvider2[0],l=this.$MultipleSegmentsProvider2[this.$MultipleSegmentsProvider2.length-1];return{startByte:k.url.startByte||0,endByte:l.url.endByte}};i.prototype.getSegmentsBoundaries=function(j){this.$MultipleSegmentsProvider2.length>0||h(0);return this.$MultipleSegmentsProvider2.map(function(k){var l=k.url,m=l.startByte,n=l.endByte;return{startByte:m||0,endByte:n}})};f.exports=i}),null);
__d("VideoSegmentInfoHelper",["URI","VideoAkamaiRequestHelper","VideoDashPrefetchCache","XHRRequest","getCrossOriginTransport"],(function a(b,c,d,e,f,g){"use strict";function h(m){var n,o=m.requestInfo,p=new(c("XHRRequest"))(j(o)).setMethod("GET").setResponseType("arraybuffer").setTransportBuilder(c("getCrossOriginTransport")),q=/livestream-lookaside\.facebook\.com$/,r=q.test(p.getURI().getDomain());if(r)p.setTransportBuilder(c("getCrossOriginTransport").withCredentials);if(c("VideoAkamaiRequestHelper").isAkamai(o.baseUrl))(function(){var s=c("VideoAkamaiRequestHelper").getRequestHeaders(o);if(s)Object.keys(s).forEach(function(t){p.setRequestHeader(t,s[t])})})();return p}function i(m){var n=m.requestInfo,o=n.startByte,p=n.endByte;if(o&&p)return p-o;return null}function j(m){var n=m.baseUrl,o=m.startByte,p=m.endByte,q=new(c("URI"))(n);if(!c("VideoAkamaiRequestHelper").isAkamai(m.baseUrl)){if(o!==null&&o!==undefined)q=q.addQueryData({bytestart:o});if(p!==null&&p!==undefined)q=q.addQueryData({byteend:p})}return q}function k(m){return c("VideoDashPrefetchCache").hasCacheValue(j(m.requestInfo).toString())}function l(m){return m.baseUrl+","+(m.startByte||0)+(","+(m.endByte||0))}f.exports={createRequest:h,estimateRequestSize:i,getRequestUri:j,isPrefetchedRequest:k,getRequestCacheKey:l}}),null);
__d("SegmentsUpdateHelper",["Map","VideoSegmentInfoHelper"],(function a(b,c,d,e,f,g){"use strict";function h(i,j){this.$SegmentsUpdateHelper1=i;this.$SegmentsUpdateHelper2=j}h.prototype.updateSegments=function(i,j){if(!j.length)return;var k=this.$SegmentsUpdateHelper2.get(i)||[],l=k[k.length-1],m=l?l.startTime:-1,n=j.length;while(n>0){var o=j[n-1];if(o.startTime<=m)break;n--}var p=j.slice(n),q=j.slice(0,n);this.$SegmentsUpdateHelper3(k,q);var r=p.map(function(s){return h.createSegmentInfo(s)});r.forEach(function(s){this.$SegmentsUpdateHelper4(s);k.push(s)}.bind(this));this.$SegmentsUpdateHelper2.set(i,k)};h.createSegmentInfo=function(i){var j=i.startTime,k=i.endTime,l=i.url,m=l.baseUrl,n=l.startByte,o=l.endByte,p={segmentID:0,startTime:j,endTime:k,requestInfo:{baseUrl:m,startByte:n,endByte:o||undefined}};return p};h.prototype.$SegmentsUpdateHelper5=function(i,j){var k=j.startTime,l=j.endTime,m=j.url,n=m.baseUrl,o=m.startByte,p=m.endByte;i.segmentID=0;i.startTime=k;i.endTime=l;var q=i.requestInfo;q.baseUrl=n;q.startByte=o;q.endByte=p||undefined;return i};h.prototype.$SegmentsUpdateHelper3=function(i,j){if(!j.length)return;var k=j.length,l=function l(){var v=j[k-1]||null;k--;return v},m=l(),n=Number.POSITIVE_INFINITY;for(var o=0;o<=i.length&&m!=null;o++){var p=i.length-o,q=i[p-1],r=p>=1?q.startTime:Number.NEGATIVE_INFINITY,s=void 0;if(r<=m.startTime&&m.endTime<=n){if(r===m.startTime){var t=c("VideoSegmentInfoHelper").getRequestCacheKey(q.requestInfo);s=this.$SegmentsUpdateHelper5(q,m);var u=c("VideoSegmentInfoHelper").getRequestCacheKey(s.requestInfo);if(u!==t){this.$SegmentsUpdateHelper1["delete"](t);this.$SegmentsUpdateHelper4(s)}}else{s=h.createSegmentInfo(m);this.$SegmentsUpdateHelper4(s);i.splice(p,0,s)}m=l()}n=r}};h.prototype.$SegmentsUpdateHelper4=function(i){var j=c("VideoSegmentInfoHelper").getRequestCacheKey(i.requestInfo);this.$SegmentsUpdateHelper1.set(j,i)};f.exports=h}),null);
__d("TrackedPromise",["Promise","VideoPlayerShakaExperiments"],(function a(b,c,d,e,f,g){"use strict";var h=window.Promise||c("Promise");c("Promise").resolve();function i(j){this.$TrackedPromise3=false;this.$TrackedPromise1=true;this.$TrackedPromise2=j.then(function(k){this.$TrackedPromise1=false;return k}.bind(this),function(k){this.$TrackedPromise1=false;if(!c("VideoPlayerShakaExperiments").fixUncaughtPromiseErrorMessage||this.$TrackedPromise3)return h.reject(k)}.bind(this))}i.prototype.getPromise=function(){this.$TrackedPromise3=true;return this.$TrackedPromise2};i.prototype.isPending=function(){return this.$TrackedPromise1};f.exports=i}),null);
__d("VideoPriorityCalculator",["VideoPlayerShakaExperiments"],(function a(b,c,d,e,f,g){"use strict";function h(){return 2}function i(k){var l=k.playhead,m=k.bufferEnd,n=k.isPlaying,o=c("VideoPlayerShakaExperiments").globalSchedulerPriorityThreshold,p=m-l<=o?0:1,q=n?0:1;return h()-p-q}function j(k){var l=k.playhead,m=k.bufferEnd;if(!c("VideoPlayerShakaExperiments").liveBufferCriticalThreshold)return i(k);var n=m-l;if(n<=c("VideoPlayerShakaExperiments").liveBufferCriticalThreshold)return h();return i(k)}f.exports={calculate:i,calculateLive:j,getMaxPriority:h}}),null);
__d("VideoSegmentPromiseBuffer",["Map","Set","VideoPlayerShakaExperiments"],(function a(b,c,d,e,f,g){"use strict";function h(){this.$VideoSegmentPromiseBuffer1=new(c("Map"))()}h.prototype.appendSegmentPromise=function(i,j){this.$VideoSegmentPromiseBuffer1.set(i,j);return this};h.prototype.hasSegmentPromise=function(i){return this.$VideoSegmentPromiseBuffer1.has(i)};h.prototype.getSegmentPromise=function(i){return this.$VideoSegmentPromiseBuffer1.get(i)||null};h.prototype.hasOtherPendingSegments=function(i){var j=new(c("Set"))(i);return Array.from(this.$VideoSegmentPromiseBuffer1.entries()).some(function(k){return k[1].isPending()&&!j.has(k[0])})};h.prototype.isFirstPendingSegment=function(i){var j=this.$VideoSegmentPromiseBuffer1.get(i);if(!j||!j.isPending())return false;var k=void 0;for(var l=this.$VideoSegmentPromiseBuffer1.entries(),m=Array.isArray(l),n=0,l=m?l:l[typeof Symbol==="function"?Symbol.iterator:"@@iterator"]();;){var o;if(m){if(n>=l.length)break;o=l[n++]}else{n=l.next();if(n.done)break;o=n.value}var p=o;if(p[1].isPending()){k=p[0];break}}return k===i};h.prototype.clearAllSegmentPromises=function(){this.$VideoSegmentPromiseBuffer1.clear();return this};h.prototype.removeSegmentPromisesOlderThan=function(i){if(!this.hasSegmentPromise(i)){if(c("VideoPlayerShakaExperiments").fixingOldPromiseClearance)this.$VideoSegmentPromiseBuffer1.clear();return}for(var j=this.$VideoSegmentPromiseBuffer1.keys(),k=Array.isArray(j),l=0,j=k?j:j[typeof Symbol==="function"?Symbol.iterator:"@@iterator"]();;){var m;if(k){if(l>=j.length)break;m=j[l++]}else{l=j.next();if(l.done)break;m=l.value}var n=m;if(n===i)return;this.$VideoSegmentPromiseBuffer1["delete"](n)}};h.prototype.removeSegmentPromise=function(i){this.$VideoSegmentPromiseBuffer1["delete"](i)};f.exports=h}),null);
__d("NetworkRequestPipelineStats",["Set"],(function a(b,c,d,e,f,g){"use strict";var h=5,i=.5,j=30;function k(){this.$NetworkRequestPipelineStats1={};this.$NetworkRequestPipelineStats2={};this.$NetworkRequestPipelineStats3=0;this.$NetworkRequestPipelineStats4=0;this.$NetworkRequestPipelineStats5=0;this.$NetworkRequestPipelineStats6=0;this.$NetworkRequestPipelineStats7=new(c("Set"))()}k.prototype.addEntry=function(l,m){this.$NetworkRequestPipelineStats6=Math.max(this.$NetworkRequestPipelineStats6,l);if(!m)return;this.$NetworkRequestPipelineStats1[l]=m;var n=this.$NetworkRequestPipelineStats1[l-1];if(!this.$NetworkRequestPipelineStats7.has(l-1)&&n)this.$NetworkRequestPipelineStats8(n,m,l);var o=this.$NetworkRequestPipelineStats1[l+1];if(!this.$NetworkRequestPipelineStats7.has(l)&&o)this.$NetworkRequestPipelineStats8(m,o,l+1)};k.prototype.setNetworkIdle=function(){this.$NetworkRequestPipelineStats7.add(this.$NetworkRequestPipelineStats6)};k.prototype.$NetworkRequestPipelineStats8=function(l,m,n){this.$NetworkRequestPipelineStats2[n]=m.startTime+m.timeToFirstByte-(l.startTime+l.timeToLastByte)};k.prototype.getBandwidthAlignments=function(){return this.$NetworkRequestPipelineStats2};k.prototype.getBandwidthUtilization=function(){var l=0,m=0;Object.keys(this.$NetworkRequestPipelineStats2).forEach(function(n){var o=Number.parseInt(n,10),p=this.$NetworkRequestPipelineStats2[o],q=this.$NetworkRequestPipelineStats1[o],r=q.timeToLastByte-q.timeToFirstByte;l+=r;m+=Math.max(0,p)+r}.bind(this));return l/Math.max(1,m)};k.prototype.$NetworkRequestPipelineStats9=function(l){var m=[],n=0;while(true){var o=this.$NetworkRequestPipelineStats1[this.$NetworkRequestPipelineStats6-n];if(!o)break;if(o.timeToLastByte-o.timeToFirstByte>=j)m.push(o);n++}return m};k.prototype.getEstimatedDownloadTime=function(l){if(l){var m=this.$NetworkRequestPipelineStats10();if(!m)return 0;return l/m}return this.$NetworkRequestPipelineStats11(function(n){return n.timeToLastByte-n.timeToFirstByte},{lastN:h,defaultValue:0})};k.prototype.$NetworkRequestPipelineStats10=function(){return this.$NetworkRequestPipelineStats11(function(l){return l.transferSize/(l.timeToLastByte-l.timeToFirstByte||1)},{lastN:h,defaultValue:0})};k.prototype.$NetworkRequestPipelineStats11=function(l,m){var n=m.lastN,o=m.defaultValue,p=this.$NetworkRequestPipelineStats9(n);if(!p.length)return o;return p.reverse().reduce(function(q,r){return i*l(r)+(1-i)*q},l(p[0]))};k.prototype.getEstimatedTimeToFirstByte=function(){return this.$NetworkRequestPipelineStats11(function(l){return l.timeToFirstByte},{lastN:h,defaultValue:5e3})};k.prototype.getOptimisticTimeToFirstByte=function(){var l=this.$NetworkRequestPipelineStats9(h);if(!l.length)return 0;var m=Math.min.apply(Math,l.map(function(o){return o.timeToFirstByte})),n=this.$NetworkRequestPipelineStats11(function(o){return o.timeToFirstByte},{lastN:h,defaultValue:5e3});return(m+n)/2};f.exports=k}),null);
__d("getXHRRequestHandlerHelper",[],(function a(b,c,d,e,f,g){"use strict";function h(k,l,m,n){var o=l.call(k);m.call(k,function(){o&&o.apply(undefined,arguments);n.apply(undefined,arguments)})}function i(k){this.$XHRRequestHandlerHelper1=k}i.prototype.addResponseHandler=function(k){h(this.$XHRRequestHandlerHelper1,this.$XHRRequestHandlerHelper1.getResponseHandler,this.$XHRRequestHandlerHelper1.setResponseHandler,k);return this};i.prototype.addAbortHandler=function(k){h(this.$XHRRequestHandlerHelper1,this.$XHRRequestHandlerHelper1.getAbortHandler,this.$XHRRequestHandlerHelper1.setAbortHandler,k);return this};i.prototype.addErrorHandler=function(k){h(this.$XHRRequestHandlerHelper1,this.$XHRRequestHandlerHelper1.getErrorHandler,this.$XHRRequestHandlerHelper1.setErrorHandler,k);return this};i.prototype.addTimeoutHandler=function(k){h(this.$XHRRequestHandlerHelper1,this.$XHRRequestHandlerHelper1.getTimeoutHandler,this.$XHRRequestHandlerHelper1.setTimeoutHandler,k);return this};i.prototype.addNetworkFailureHandler=function(k){h(this.$XHRRequestHandlerHelper1,this.$XHRRequestHandlerHelper1.getNetworkFailureHandler,this.$XHRRequestHandlerHelper1.setNetworkFailureHandler,k);return this};function j(k){return new i(k)}f.exports=j}),null);
__d("NetworkRequestPipeline",["EventEmitter","Map","NetworkRequestPipelineStats","VideoPlayerResourceTimer","VideoPlayerShakaExperiments","getXHRRequestHandlerHelper","performanceNow","setTimeoutAcrossTransitions","setTimeout","clearTimeout"],(function a(b,c,d,e,f,g){"use strict";var h,i,j=c("VideoPlayerShakaExperiments").timeoutsPersistOnPageTransition?c("setTimeoutAcrossTransitions"):c("setTimeout"),k=2,l=1;h=babelHelpers.inherits(m,c("EventEmitter"));i=h&&h.prototype;function m(n,o){i.constructor.call(this);this.$NetworkRequestPipeline1=k;this.$NetworkRequestPipeline2=l;this.$NetworkRequestPipeline3=0;this.$NetworkRequestPipeline4=new(c("NetworkRequestPipelineStats"))();this.$NetworkRequestPipeline5=0;this.$NetworkRequestPipeline6=new(c("Map"))();this.$NetworkRequestPipeline11=null;this.$NetworkRequestPipeline12=null;this.$NetworkRequestPipeline13=0;this.$NetworkRequestPipeline15=function(){if(!this.$NetworkRequestPipeline14){this.$NetworkRequestPipeline14=this.$NetworkRequestPipeline16();this.$NetworkRequestPipeline12=null;this.$NetworkRequestPipeline17()}}.bind(this);this.$NetworkRequestPipeline8=n;var p=o||{},q=p.xhrHandleNetworkFailure,r=p.maxConcurrentRequests,s=p.soothingFactor,t=p.fixFinishRequest,u=p.requestTimeout;this.$NetworkRequestPipeline9=!!q;this.$NetworkRequestPipeline10=!!t;this.$NetworkRequestPipeline8.setOnItemAdded(this.$NetworkRequestPipeline15);if(r!==undefined)this.$NetworkRequestPipeline1=r;if(s!==undefined)this.$NetworkRequestPipeline2=s;if(u!==undefined)this.$NetworkRequestPipeline13=u;this.$NetworkRequestPipeline15()}m.prototype.$NetworkRequestPipeline18=function(){var n=this.$NetworkRequestPipeline3;this.$NetworkRequestPipeline3++;return n};m.prototype.$NetworkRequestPipeline17=function(){if(this.$NetworkRequestPipeline14&&this.$NetworkRequestPipeline5<this.$NetworkRequestPipeline1){var n=this.$NetworkRequestPipeline19(this.$NetworkRequestPipeline14);if(!n)this.$NetworkRequestPipeline14=null}};m.prototype.$NetworkRequestPipeline20=function(n){if(n.hasEnded)return false;c("clearTimeout")(n.timeout);n.hasEnded=true;this.$NetworkRequestPipeline14=this.$NetworkRequestPipeline16();this.$NetworkRequestPipeline17();return true};m.prototype.$NetworkRequestPipeline19=function(n){if(n.xhrRequest)return true;var o=c("performanceNow")(),p=this.$NetworkRequestPipeline8.dequeue();if(!p){this.$NetworkRequestPipeline4.setNetworkIdle();return false}var q=p.xhrRequest,r=p.estimatedSize,s=false,t=function(){if(!this.$NetworkRequestPipeline10)return false;if(s)return true;s=true;return false}.bind(this),u=void 0,v=function(y){if(!t()){var z=c("VideoPlayerResourceTimer").getResourceTimingEntry(q.getURI().toString(),o,c("performanceNow")());this.$NetworkRequestPipeline4.addEntry(n.id,z);this.$NetworkRequestPipeline5--;if(!this.$NetworkRequestPipeline20(n))this.$NetworkRequestPipeline17()}u&&u.remove()}.bind(this),w=function(){if(!t()){this.$NetworkRequestPipeline5--;if(!this.$NetworkRequestPipeline20(n))this.$NetworkRequestPipeline17()}u&&u.remove()}.bind(this);if(!s)u=this.addListener("evict",function(y){if(q===y.xhrRequest)w()});var x=c("getXHRRequestHandlerHelper")(q).addResponseHandler(v).addAbortHandler(w).addErrorHandler(w).addNetworkFailureHandler(function(){if(this.$NetworkRequestPipeline9)w()}.bind(this));if(this.$NetworkRequestPipeline13)x.addTimeoutHandler(w);n.xhrRequest=q;this.$NetworkRequestPipeline5++;n.timeout=j(function(){return this.$NetworkRequestPipeline20(n)}.bind(this),this.$NetworkRequestPipeline21(q,r||undefined));this.$NetworkRequestPipeline11=this.$NetworkRequestPipeline12;this.$NetworkRequestPipeline12=q.getURI().toString();if(this.$NetworkRequestPipeline13)q.setTimeout(this.$NetworkRequestPipeline13);q.send();return true};m.prototype.evictRequest=function(n){this.emit("evict",{xhrRequest:n})};m.prototype.getRecentBlockingRequestUrl=function(){return this.$NetworkRequestPipeline11};m.prototype.$NetworkRequestPipeline16=function(){var n=this.$NetworkRequestPipeline18(),o={id:n,hasEnded:false,xhrRequest:null,timeout:0};return o};m.prototype.$NetworkRequestPipeline21=function(n,o){var p=this.$NetworkRequestPipeline4.getEstimatedDownloadTime(o),q=this.$NetworkRequestPipeline4.getEstimatedTimeToFirstByte(),r=this.$NetworkRequestPipeline4.getOptimisticTimeToFirstByte();return(p+q-r)*this.$NetworkRequestPipeline2};f.exports=m}),null);
__d("PriorityRequestQueue",["invariant","EventEmitter","Map","Set"],(function a(b,c,d,e,f,g,h){"use strict";var i,j;i=babelHelpers.inherits(k,c("EventEmitter"));j=i&&i.prototype;function k(){var l,m;for(var n=arguments.length,o=Array(n),p=0;p<n;p++)o[p]=arguments[p];return m=(l=j.constructor).call.apply(l,[this].concat(o)),this.$PriorityRequestQueue1=new(c("Map"))(),this.$PriorityRequestQueue2=new(c("Map"))(),this.$PriorityRequestQueue3=function(){},m}k.prototype.dequeue=function(){return this.$PriorityRequestQueue4(Infinity)};k.prototype.setOnItemAdded=function(l){this.$PriorityRequestQueue3=l};k.prototype.$PriorityRequestQueue4=function(l){var m=-Infinity;Array.from(this.$PriorityRequestQueue1.keys()).forEach(function(p){if(p<l)m=Math.max(m,p)});if(m===-Infinity)return null;var n=this.$PriorityRequestQueue1.get(m);n||h(0);var o=this.$PriorityRequestQueue5(n);if(o)return o;return this.$PriorityRequestQueue4(m)};k.prototype.$PriorityRequestQueue5=function(l){var m=l.queues,n=l.lastDequeued;if(!m.size)return null;var o=Array.from(m),p=n?o.findIndex(function(u){return u===n}):-1;for(var q=p+1;q<=p+m.size;q++){var r=q%m.size,s=o[r],t=s.dequeue();if(t){l.lastDequeued=s;return t}}return null};k.prototype.setQueue=function(l,m){var n=this.$PriorityRequestQueue2.get(l);if(n===m)return;if(!n)this.$PriorityRequestQueue3("append");this.removeQueue(l);var o=this.$PriorityRequestQueue1.get(m);if(!o)o={lastDequeued:null,queues:new(c("Set"))()};o.queues.add(l);l.setOnItemAdded(function(p){this.$PriorityRequestQueue6(l,p)}.bind(this));this.$PriorityRequestQueue2.set(l,m);this.$PriorityRequestQueue1.set(m,o)};k.prototype.removeQueue=function(l){var m=this.$PriorityRequestQueue7(l);l.setOnItemAdded(function(){});this.$PriorityRequestQueue2["delete"](l);if(m)m.queues["delete"](l)};k.prototype.$PriorityRequestQueue6=function(l,m){this.$PriorityRequestQueue3(m);if(m==="prepend")this.$PriorityRequestQueue7(l)};k.prototype.$PriorityRequestQueue7=function(l){var m=this.$PriorityRequestQueue2.get(l);if(m!==undefined&&m!==null){var n=this.$PriorityRequestQueue1.get(m);n||h(0);var o=n.queues;if(n.lastDequeued===l){var p=Array.from(o),q=p.findIndex(function(r){return r===l});n.lastDequeued=p[q-1]||null}return n}return null};k.prototype.demandReschedule=function(){this.emit("demand_reschedule")};f.exports=k}),null);
__d("VideoPipelineProvider",["Map","NetworkRequestPipeline","PriorityRequestQueue","VideoPlayerShakaExperiments"],(function a(b,c,d,e,f,g){"use strict";var h=new(c("Map"))();function i(j){var k=h.get(j);if(!k){var l=new(c("PriorityRequestQueue"))(),m=c("VideoPlayerShakaExperiments").requestPipelineSoothingFactor,n=c("VideoPlayerShakaExperiments").requestPipelineMaxConcurrentRequests;if(j==="audio"){m=c("VideoPlayerShakaExperiments").audioRequestPipelineSoothingFactor;n=c("VideoPlayerShakaExperiments").audioRequestPipelineMaxConcurrentRequests}var o=new(c("NetworkRequestPipeline"))(l,{xhrHandleNetworkFailure:c("VideoPlayerShakaExperiments").xhrHandleNetworkFailure,maxConcurrentRequests:n,soothingFactor:m,fixFinishRequest:c("VideoPlayerShakaExperiments").skipOldHandlerOnFinishedRequests,requestTimeout:c("VideoPlayerShakaExperiments").requestPipelineTimeout});k={requestQueue:l,pipeline:o};h.set(j,k)}return k}f.exports={getPriorityRequestQueueAndPipeline:i}}),null);
__d("VideoSegmentRequestQueue",["Map"],(function a(b,c,d,e,f,g){"use strict";function h(){this.$VideoSegmentRequestQueue1=function(){};this.$VideoSegmentRequestQueue2=new(c("Map"))();this.$VideoSegmentRequestQueue3=new(c("Map"))()}h.prototype.dequeue=function(){var i=this.$VideoSegmentRequestQueue3.entries().next().value;if(i){this.$VideoSegmentRequestQueue3["delete"](i[0]);return i[1]||null}i=this.$VideoSegmentRequestQueue2.entries().next().value;if(!i)return null;this.$VideoSegmentRequestQueue2["delete"](i[0]);return i[1]||null};h.prototype.setOnItemAdded=function(i){this.$VideoSegmentRequestQueue1=i};h.prototype.append=function(i,j,k){this.$VideoSegmentRequestQueue4(i,j,k,this.$VideoSegmentRequestQueue2,"append");return this};h.prototype.clearNormalQueue=function(){this.$VideoSegmentRequestQueue2.clear()};h.prototype.changeToTopPri=function(i){var j=this.$VideoSegmentRequestQueue2.get(i);if(j){this.$VideoSegmentRequestQueue2["delete"](i);this.$VideoSegmentRequestQueue3.set(i,j)}};h.prototype.removeTopPriSegment=function(i){var j=this.$VideoSegmentRequestQueue3.get(i);this.$VideoSegmentRequestQueue3["delete"](i);return j?j.xhrRequest:null};h.prototype.isEmpty=function(){return this.$VideoSegmentRequestQueue2.size===0&&this.$VideoSegmentRequestQueue3.size===0};h.prototype.prependTopPri=function(i,j,k){var l=this.$VideoSegmentRequestQueue3;this.$VideoSegmentRequestQueue3=new(c("Map"))();this.$VideoSegmentRequestQueue5(i,j,k,l,this.$VideoSegmentRequestQueue3)};h.prototype.prepend=function(i,j,k){var l=this.$VideoSegmentRequestQueue2;this.$VideoSegmentRequestQueue2=new(c("Map"))();this.$VideoSegmentRequestQueue5(i,j,k,l,this.$VideoSegmentRequestQueue2)};h.prototype.$VideoSegmentRequestQueue5=function(i,j,k,l,m){this.$VideoSegmentRequestQueue4(i,j,k,m,"prepend");l.forEach(function(n,o){var j=n.xhrRequest,k=n.estimatedSize;this.$VideoSegmentRequestQueue6(o,j,k,m)}.bind(this))};h.prototype.$VideoSegmentRequestQueue4=function(i,j,k,l,m){this.$VideoSegmentRequestQueue6(i,j,k,l);this.$VideoSegmentRequestQueue1(m)};h.prototype.$VideoSegmentRequestQueue6=function(i,j,k,l){var m={xhrRequest:j,estimatedSize:k};l.set(i,m)};f.exports=h}),null);
__d("createVideoResponsePromise",["Promise","VideoPlayerShakaError","VideoPlayerShakaExperiments","getXHRRequestHandlerHelper","performanceNow"],(function a(b,c,d,e,f,g){"use strict";var h=window.Promise||c("Promise");c("Promise").resolve();function i(j){var k=void 0,l=j.getURI().toString(),m=j.send;j.send=function(){k=c("performanceNow")();m.call(j)};var n=new h(function(o,p){var q=c("getXHRRequestHandlerHelper")(j).addResponseHandler(function(r){o({response:r,responseTime:c("performanceNow")()-k})}).addAbortHandler(function(r){if(r==="reschedule")return;var s=c("VideoPlayerShakaError").translateError({errorMsg:"Request aborted.",errorType:"abort",errorCode:0},l,"aborted");p(s)}).addErrorHandler(function(r){var s=c("VideoPlayerShakaError").translateError(r,l,"net");p(s)}).addNetworkFailureHandler(function(r){if(c("VideoPlayerShakaExperiments").xhrHandleNetworkFailure){var s=c("VideoPlayerShakaError").translateError(r,l,"net");p(s)}});if(c("VideoPlayerShakaExperiments").requestPipelineTimeout)q.addTimeoutHandler(function(){var r=c("VideoPlayerShakaError").createTimeoutError(l);p(r)})});return n}f.exports=i}),null);
__d("VideoSegmentRequestPipeline",["Map","NetworkRequestPipeline","SubscriptionsHandler","VideoPipelineProvider","VideoPlayerResourceTimer","VideoPlayerShakaError","VideoPlayerShakaExperiments","VideoPriorityCalculator","VideoSegmentInfoHelper","VideoSegmentRequestQueue","createVideoResponsePromise","getXHRRequestHandlerHelper","performanceNow"],(function a(b,c,d,e,f,g){"use strict";function h(i,j,k,l){this.$VideoSegmentRequestPipeline1=new(c("Map"))();this.$VideoSegmentRequestPipeline2=new(c("Map"))();this.$VideoSegmentRequestPipeline3=null;this.$VideoSegmentRequestPipeline4=null;this.$VideoSegmentRequestPipeline5=null;this.$VideoSegmentRequestPipeline10=new(c("Map"))();this.$VideoSegmentRequestPipeline11=new(c("Map"))();this.$VideoSegmentRequestPipeline12=null;this.$VideoSegmentRequestPipeline14=0;this.$VideoSegmentRequestPipeline15=new(c("SubscriptionsHandler"))();this.$VideoSegmentRequestPipeline18=function(){if(this.$VideoSegmentRequestPipeline17()===c("VideoPriorityCalculator").getMaxPriority())return;if(c("VideoPlayerShakaExperiments").enableRescheduler&&this.$VideoSegmentRequestPipeline10.size>0)this.$VideoSegmentRequestPipeline22()}.bind(this);this.$VideoSegmentRequestPipeline9=new(c("VideoSegmentRequestQueue"))();if(c("VideoPlayerShakaExperiments").enableGlobalScheduler){var m=c("VideoPipelineProvider").getPriorityRequestQueueAndPipeline(i),n=m.requestQueue,o=m.pipeline;this.$VideoSegmentRequestPipeline12=n;this.$VideoSegmentRequestPipeline13=o}else this.$VideoSegmentRequestPipeline13=new(c("NetworkRequestPipeline"))(this.$VideoSegmentRequestPipeline9,{xhrHandleNetworkFailure:c("VideoPlayerShakaExperiments").xhrHandleNetworkFailure,maxConcurrentRequests:c("VideoPlayerShakaExperiments").requestPipelineMaxConcurrentRequests,soothingFactor:c("VideoPlayerShakaExperiments").requestPipelineSoothingFactor,fixFinishRequest:c("VideoPlayerShakaExperiments").skipOldHandlerOnFinishedRequests,requestTimeout:c("VideoPlayerShakaExperiments").requestPipelineTimeout});var p=this.$VideoSegmentRequestPipeline12;if(p){p.setQueue(this.$VideoSegmentRequestPipeline9,this.$VideoSegmentRequestPipeline17());this.$VideoSegmentRequestPipeline15.addSubscriptions(p.addListener("demand_reschedule",this.$VideoSegmentRequestPipeline18))}this.$VideoSegmentRequestPipeline7=i;this.$VideoSegmentRequestPipeline6=j;this.$VideoSegmentRequestPipeline8=k;this.$VideoSegmentRequestPipeline16=l}h.prototype.enqueue=function(i,j){var k=c("VideoSegmentInfoHelper").createRequest(i),l=c("VideoSegmentInfoHelper").estimateRequestSize(i),m=c("createVideoResponsePromise")(k),n=k.send;k.send=function(){this.$VideoSegmentRequestPipeline10.set(i,k);this.$VideoSegmentRequestPipeline19(i,k,j);n.call(k)}.bind(this);this.$VideoSegmentRequestPipeline9.append(i,k,l);this.$VideoSegmentRequestPipeline20();return m};h.prototype.lockRequest=function(i){this.$VideoSegmentRequestPipeline9.changeToTopPri(i);this.$VideoSegmentRequestPipeline11.set(i,{lockedTime:c("performanceNow")(),rescheduleCount:0})};h.prototype.cancelUnlockedRequests=function(){this.$VideoSegmentRequestPipeline9.clearNormalQueue();this.$VideoSegmentRequestPipeline10.forEach(function(i,j){if(!this.$VideoSegmentRequestPipeline11.has(j)){i.abort();this.$VideoSegmentRequestPipeline10["delete"](j)}}.bind(this))};h.prototype.abortLockedRequest=function(i){var j=this.$VideoSegmentRequestPipeline9.removeTopPriSegment(i);if(j)j.abort();j=this.$VideoSegmentRequestPipeline10.get(i);if(j){j.abort();this.$VideoSegmentRequestPipeline21(i)}};h.prototype.$VideoSegmentRequestPipeline21=function(i){this.$VideoSegmentRequestPipeline10["delete"](i);this.$VideoSegmentRequestPipeline11["delete"](i)};h.prototype.unload=function(){if(this.$VideoSegmentRequestPipeline12)this.$VideoSegmentRequestPipeline12.removeQueue(this.$VideoSegmentRequestPipeline9);this.$VideoSegmentRequestPipeline15.release()};h.prototype.setPriority=function(i){if(this.$VideoSegmentRequestPipeline17()===i)return;this.$VideoSegmentRequestPipeline14=i;var j=this.$VideoSegmentRequestPipeline12;if(j){j.setQueue(this.$VideoSegmentRequestPipeline9,i);this.$VideoSegmentRequestPipeline20()}};h.prototype.getResourceTimingEntry=function(i){return this.$VideoSegmentRequestPipeline2.get(i)||null};h.prototype.$VideoSegmentRequestPipeline20=function(){var i=this.$VideoSegmentRequestPipeline12;if(i&&!this.$VideoSegmentRequestPipeline9.isEmpty()&&this.$VideoSegmentRequestPipeline17()>=c("VideoPriorityCalculator").getMaxPriority())i.demandReschedule()};h.prototype.$VideoSegmentRequestPipeline22=function(){Array.from(this.$VideoSegmentRequestPipeline10.values()).forEach(function(i){this.$VideoSegmentRequestPipeline13.evictRequest(i)}.bind(this))};h.prototype.$VideoSegmentRequestPipeline17=function(){return this.$VideoSegmentRequestPipeline14};h.prototype.$VideoSegmentRequestPipeline23=function(i){var j=this.$VideoSegmentRequestPipeline11.get(i)||{},k=j.lockedTime,l=j.rescheduleCount;l=(l||0)+1;this.$VideoSegmentRequestPipeline21(i);this.$VideoSegmentRequestPipeline11.set(i,{lockedTime:k,rescheduleCount:l})};h.prototype.$VideoSegmentRequestPipeline19=function(i,j,k){var l,m=this,n=j.getURI().toString(),o=this.$VideoSegmentRequestPipeline17(),p=void 0,q=void 0,r=this.$VideoSegmentRequestPipeline13.getRecentBlockingRequestUrl(),s=false;if(r&&r!==this.$VideoSegmentRequestPipeline4)s=true;if(c("VideoPlayerShakaExperiments").fixingSchedulerXhrRequestLeaks){q=this.$VideoSegmentRequestPipeline4;this.$VideoSegmentRequestPipeline4=n}else{p=this.$VideoSegmentRequestPipeline3;this.$VideoSegmentRequestPipeline3=j}if(i)(function(){var t=m.$VideoSegmentRequestPipeline24(n,o,s,k),u=c("performanceNow")(),v=false,w=function w(){if(!c("VideoPlayerShakaExperiments").skipOldHandlerOnFinishedRequests)return false;if(v)return true;v=true;return false},x=c("getXHRRequestHandlerHelper")(j).addResponseHandler(function(y){if(!w()){var z=c("performanceNow")(),A=c("VideoPlayerResourceTimer").getResourceTimingEntry(n,u,z),B=y.byteLength;if(this.$VideoSegmentRequestPipeline8){var C=A?this.$VideoSegmentRequestPipeline25(A,j,p,q):z-u;this.$VideoSegmentRequestPipeline8.sample(C,B,this.$VideoSegmentRequestPipeline7==="video",{timeToLastByte:C},this.$VideoSegmentRequestPipeline16)}if(t)this.$VideoSegmentRequestPipeline26(i,t,y.byteLength,A,u);this.$VideoSegmentRequestPipeline21(i)}}.bind(m)).addAbortHandler(function(k){if(!w()){var y=c("VideoPlayerShakaError").translateError({errorMsg:"Request aborted.",errorType:"abort",errorCode:0},n,"aborted");if(k==="reschedule")this.$VideoSegmentRequestPipeline23(i);else this.$VideoSegmentRequestPipeline21(i);if(t)t.setError(y).log()}}.bind(m)).addErrorHandler(function(y){if(!w()){var z=c("VideoPlayerShakaError").translateError(y,n,"net");if(t)t.setError(z).log();this.$VideoSegmentRequestPipeline21(i)}}.bind(m)).addNetworkFailureHandler(function(y){if(!w())if(c("VideoPlayerShakaExperiments").xhrHandleNetworkFailure){var z=c("VideoPlayerShakaError").translateError(y,n,"net");if(t)t.setError(z).log();this.$VideoSegmentRequestPipeline21(i)}}.bind(m));if(c("VideoPlayerShakaExperiments").requestPipelineTimeout)x.addTimeoutHandler(function(){var y=c("VideoPlayerShakaError").createTimeoutError(n);if(t)t.setError(y).log();this.$VideoSegmentRequestPipeline21(i)}.bind(m))})()};h.prototype.$VideoSegmentRequestPipeline24=function(i,j,k,l){var m=null;if(this.$VideoSegmentRequestPipeline6){m=this.$VideoSegmentRequestPipeline6.getOperationLogger("request").setResource(i).start();m.setReason(l).setPriority(j).setType(this.$VideoSegmentRequestPipeline7||null).setWasDelayed(k).setInitiator("pipeline")}return m};h.prototype.$VideoSegmentRequestPipeline26=function(i,j,k,l,m){var n=this.$VideoSegmentRequestPipeline11.get(i)||{},o=n.lockedTime,p=n.rescheduleCount,q=0;if(o)q=m-o;if(!p)p=0;j.setLength(k);if(l){var r=l.timeToFirstByte,s=l.timeToLastByte,t=l.timeToRequestStart;j.setTimeToFirstByte(Math.round(r)).setTimeToLastByte(Math.round(s)).setTimeToRequestStart(Math.round(t)).setTimeToRequestSent(Math.round(q)).setRescheduleCount(Math.round(p))}j.log()};h.prototype.$VideoSegmentRequestPipeline25=function(i,j,k,l){var m=null;if(k){m=this.$VideoSegmentRequestPipeline1.get(k);if(c("VideoPlayerShakaExperiments").fixingSchedulerXhrRequestLeaks)this.$VideoSegmentRequestPipeline1["delete"](k);else this.$VideoSegmentRequestPipeline1["delete"](m)}if(l){m=this.$VideoSegmentRequestPipeline2.get(l);this.$VideoSegmentRequestPipeline2["delete"](l)}if(c("VideoPlayerShakaExperiments").fixingSchedulerXhrRequestLeaks)this.$VideoSegmentRequestPipeline2.set(j.getURI().toString(),i);else this.$VideoSegmentRequestPipeline1.set(j,i);if(m){var n=m.startTime+m.timeToLastByte,o=i.startTime+i.timeToLastByte,p=Math.min(o-n,i.timeToLastByte);return Math.max(i.timeToLastByte-i.timeToFirstByte,p)}return i.timeToLastByte};f.exports=h}),null);
__d("SegmentRequestManager",["invariant","BinarySearch","Map","SegmentsUpdateHelper","TrackedPromise","VideoPriorityCalculator","VideoSegmentInfoHelper","VideoSegmentPromiseBuffer","VideoSegmentRequestPipeline"],(function a(b,c,d,e,f,g,h){"use strict";var i=.1,j=3;function k(l,m,n,o,p){this.$SegmentRequestManager1=new(c("Map"))();this.$SegmentRequestManager2=new(c("Map"))();this.$SegmentRequestManager3=0;this.$SegmentRequestManager4=null;this.$SegmentRequestManager6=[];this.$SegmentRequestManager7=new(c("VideoSegmentPromiseBuffer"))();this.$SegmentRequestManager8=false;this.$SegmentRequestManager10=0;this.$SegmentRequestManager5=new(c("VideoSegmentRequestPipeline"))(l,n,o,p);this.$SegmentRequestManager11=m||c("VideoPriorityCalculator").calculate}k.prototype.updateSegmentsByShakaReferences=function(l,m){new(c("SegmentsUpdateHelper"))(this.$SegmentRequestManager2,this.$SegmentRequestManager1).updateSegments(l,m)};k.prototype.updateSegments=function(l,m){var n=this.getSegments(l);m.forEach(function(o){var p=c("VideoSegmentInfoHelper").getRequestCacheKey(o.requestInfo);if(!this.$SegmentRequestManager2.has(p)){this.$SegmentRequestManager2.set(p,o);this.$SegmentRequestManager12(n,o)}}.bind(this));this.$SegmentRequestManager1.set(l,n)};k.prototype.getSegments=function(l){var m=this.$SegmentRequestManager1.get(l);return m||[]};k.prototype.hasSegment=function(l){var m=c("VideoSegmentInfoHelper").getRequestCacheKey(l.requestInfo);return this.$SegmentRequestManager2.has(m)};k.prototype.updatePriorityWithNewPlayhead=function(l){if(this.$SegmentRequestManager9)this.$SegmentRequestManager9.playhead=l;this.$SegmentRequestManager13();return this};k.prototype.updatePriorityWithNewPlayingState=function(l){if(this.$SegmentRequestManager9)this.$SegmentRequestManager9.isPlaying=l;this.$SegmentRequestManager13();return this};k.prototype.updatePriorityWithNewAdjustment=function(l){if(l===this.$SegmentRequestManager10)return this;l<=0||h(0);this.$SegmentRequestManager10=l;this.$SegmentRequestManager13();return this};k.prototype.updatePlayerState=function(l,m){var n=this.$SegmentRequestManager1.get(l);this.$SegmentRequestManager9=m;if(!n)return this;var o=this.$SegmentRequestManager4;this.$SegmentRequestManager4=l;if(this.$SegmentRequestManager8)return this;this.$SegmentRequestManager13();var p=this.$SegmentRequestManager14(m,n),q=m.additionalSegmentsRequired,r=[];if(q.length>0){r=this.$SegmentRequestManager15(q);p=p.concat(r).sort(function(t,u){return t.startTime-u.startTime})}if(o!==l){this.$SegmentRequestManager16();this.$SegmentRequestManager17(p,r);return this}var s=[];if(this.$SegmentRequestManager7.hasOtherPendingSegments(p)){this.$SegmentRequestManager16();s=p}else{s=p.filter(function(t){return!this.$SegmentRequestManager7.hasSegmentPromise(t)}.bind(this));this.$SegmentRequestManager7.removeSegmentPromisesOlderThan(p[0])}this.$SegmentRequestManager17(s,r);return this};k.prototype.getPromise=function(l){var m=c("VideoSegmentInfoHelper").getRequestCacheKey(l),n=this.$SegmentRequestManager2.get(m);if(!n)throw new Error("the given request info is not found it segments cache ");var o=this.$SegmentRequestManager7.getSegmentPromise(n),p=void 0;if(o&&(!o.isPending()||this.$SegmentRequestManager7.isFirstPendingSegment(n)))p=o.getPromise();else{this.$SegmentRequestManager16();p=this.$SegmentRequestManager5.enqueue(n);o=new(c("TrackedPromise"))(p);this.$SegmentRequestManager7.appendSegmentPromise(n,o)}this.$SegmentRequestManager5.lockRequest(n);return p};k.prototype.getResourceTimingEntry=function(l){return this.$SegmentRequestManager5.getResourceTimingEntry(l)};k.prototype.$SegmentRequestManager15=function(l){var m=[];l.forEach(function(n){var o=this.$SegmentRequestManager2.get(c("VideoSegmentInfoHelper").getRequestCacheKey(c("SegmentsUpdateHelper").createSegmentInfo(n).requestInfo));if(o)m.push(o)}.bind(this));return m};k.prototype.$SegmentRequestManager12=function(l,m){var n=Number.POSITIVE_INFINITY;for(var o=0;o<=l.length;o++){var p=l.length-o,q=p>=1?l[p-1].startTime:Number.NEGATIVE_INFINITY;if(q<=m.startTime&&m.startTime<n){p===l.length?l.push(m):l.splice(p,0,m);return}n=q}};k.prototype.$SegmentRequestManager13=function(){if(!this.$SegmentRequestManager9)return;var l=this.$SegmentRequestManager11(this.$SegmentRequestManager9);l+=this.$SegmentRequestManager10;this.$SegmentRequestManager5.setPriority(l)};k.prototype.$SegmentRequestManager16=function(){this.$SegmentRequestManager5.cancelUnlockedRequests();this.$SegmentRequestManager7.clearAllSegmentPromises()};k.prototype.$SegmentRequestManager17=function(l,m){for(var n=l,o=Array.isArray(n),p=0,n=o?n:n[typeof Symbol==="function"?Symbol.iterator:"@@iterator"]();;){var q;if(o){if(p>=n.length)break;q=n[p++]}else{p=n.next();if(p.done)break;q=p.value}var r=q;if(c("VideoSegmentInfoHelper").isPrefetchedRequest(r))return;var s=m.includes(r)?"replacing_lower_quality_buffer":null,t=this.$SegmentRequestManager5.enqueue(r,s);this.$SegmentRequestManager7.appendSegmentPromise(r,new(c("TrackedPromise"))(t))}};k.prototype.abortRequest=function(l){var m=c("VideoSegmentInfoHelper").getRequestCacheKey(l),n=this.$SegmentRequestManager2.get(m);if(n){this.$SegmentRequestManager5.abortLockedRequest(n);this.$SegmentRequestManager7.removeSegmentPromise(n)}};k.prototype.disable=function(){if(this.$SegmentRequestManager8)return;this.$SegmentRequestManager5.cancelUnlockedRequests();this.$SegmentRequestManager5.unload();this.$SegmentRequestManager8=true};k.prototype.enable=function(){this.$SegmentRequestManager8=false};k.prototype.isDisabled=function(){return this.$SegmentRequestManager8};k.prototype.$SegmentRequestManager14=function(l,m){var n=l.playhead,o=l.bufferEnd,p=l.bufferingGoal,q=Math.max(o,n),r=[],s=this.$SegmentRequestManager18(q,m);for(var t=Math.max(s,0);t<m.length;t++){var u=m[t];if(u.startTime>n+p)break;r.push(u)}return r};k.prototype.$SegmentRequestManager18=function(l,m){return c("BinarySearch").leastUpperBound(function(n){var o=this.$SegmentRequestManager19(m[n].startTime),p=this.$SegmentRequestManager19(m[n].endTime);l=this.$SegmentRequestManager19(l);if(o<=l&&p>l)return 0;return o-l}.bind(this),0,0,m.length,function(n,o){return n-o})};k.prototype.$SegmentRequestManager19=function(l){return+l.toFixed(j)||0};f.exports=k}),null);
__d("ShakaSegmentReferenceHelper",["JSLog"],(function a(b,c,d,e,f,g){"use strict";var h=.001;function i(l,m){for(var n=l.length-1;n>=0;--n){var o=l[n];if(Math.abs(m-o.startTime)<h)return n}return-1}function j(l,m){var n=i(l,m);if(n>-1)return n;for(var o=l.length-1;o>=0;--o){var p=l[o];if(m>=p.startTime&&m<p.endTime){c("JSLog").warn("Segment reference have no matching start time %s, %d",JSON.stringify(p),m);return o}}return-1}function k(l,m){var n=j(l,m.startTime);if(n>=0){l.splice(n,0,m);return n+1}else{l.push(m);return l.length}}f.exports={findIndexByStartTime:j,insertReference:k}}),null);
__d("VideoPlayerLocalBandwidthEstimator",["guid","Banzai","VideoPlayerAbrEvaluation","VideoPlayerShakaExperiments","SubscriptionsHandler","EventListener","EventEmitter","requireWeak"],(function a(b,c,d,e,f,g){var h,i,j=void 0;c("requireWeak")("Shaka",function(l){if(l&&l.util)j=l.util.EWMACacheBandwidthEstimator});h=babelHelpers.inherits(k,c("EventEmitter"));i=h&&h.prototype;function k(l,m){"use strict";i.constructor.call(this);this.$VideoPlayerLocalBandwidthEstimator3=l;this.$VideoPlayerLocalBandwidthEstimator1=m;this.$VideoPlayerLocalBandwidthEstimator4=[];this.$VideoPlayerLocalBandwidthEstimator5=null;this.$VideoPlayerLocalBandwidthEstimator6=c("guid")();this.$VideoPlayerLocalBandwidthEstimator9=new(c("SubscriptionsHandler"))();this.$VideoPlayerLocalBandwidthEstimator9.addSubscriptions(c("EventListener").listen(this.$VideoPlayerLocalBandwidthEstimator1,"bandwidth",function(n){return this.emit("bandwidth",n)}.bind(this)));if(c("VideoPlayerShakaExperiments").usePerVideoBandwidthEstimator&&j)this.$VideoPlayerLocalBandwidthEstimator2=new j(c("VideoPlayerShakaExperiments").cacheDelay,c("VideoPlayerShakaExperiments").cacheBandwidth)}k.prototype.setRepresentationID=function(l){"use strict";this.$VideoPlayerLocalBandwidthEstimator5=l};k.prototype.sample=function(l,m,n,o,p){var q;"use strict";if(n&&this.$VideoPlayerLocalBandwidthEstimator5)this.$VideoPlayerLocalBandwidthEstimator10(l,m,this.$VideoPlayerLocalBandwidthEstimator5,this.$VideoPlayerLocalBandwidthEstimator3.getVideoTracks());var r=[l,m,n,o,p];(q=this.$VideoPlayerLocalBandwidthEstimator1).sample.apply(q,r);if(this.$VideoPlayerLocalBandwidthEstimator2){var s;(s=this.$VideoPlayerLocalBandwidthEstimator2).sample.apply(s,r)}};k.prototype.supportsCaching=function(){"use strict";return this.$VideoPlayerLocalBandwidthEstimator1.supportsCaching()};k.prototype.getEstimator=function(){"use strict";return this.$VideoPlayerLocalBandwidthEstimator1};k.prototype.getBandwidth=function(l){"use strict";var m=c("VideoPlayerShakaExperiments").minimumWeightToTrustLocalBandwidthEstimate,n=c("VideoPlayerShakaExperiments").useMinimumOfGlobalAndLocalBandwidthEstimates,o=c("VideoPlayerShakaExperiments").usePerVideoBandwidthEstimator;if(o&&this.$VideoPlayerLocalBandwidthEstimator2&&this.$VideoPlayerLocalBandwidthEstimator2.canTrustEstimate(m))if(n){var p=this.$VideoPlayerLocalBandwidthEstimator2?this.$VideoPlayerLocalBandwidthEstimator2.getBandwidth(l):Infinity;return Math.min(this.$VideoPlayerLocalBandwidthEstimator1.getBandwidth(l),p)}else return this.$VideoPlayerLocalBandwidthEstimator2.getBandwidth(l);return this.$VideoPlayerLocalBandwidthEstimator1.getBandwidth(l)};k.prototype.setResolutionConstraint=function(l,m){"use strict";this.$VideoPlayerLocalBandwidthEstimator7=l;this.$VideoPlayerLocalBandwidthEstimator8=m};k.prototype.$VideoPlayerLocalBandwidthEstimator10=function(l,m,n,o){"use strict";var p=8e3*m/l,q=o.filter(function(x){return x.width<=this.$VideoPlayerLocalBandwidthEstimator7||x.height<=this.$VideoPlayerLocalBandwidthEstimator8}.bind(this)),r=this.$VideoPlayerLocalBandwidthEstimator11(p,o),s=this.$VideoPlayerLocalBandwidthEstimator11(p,q),t=o.find(function(x){return x.streamInfoID===n});if(t){if(c("VideoPlayerShakaExperiments").videosAbrDebuggerStorage)c("Banzai").post("video_player_abr",{id:this.$VideoPlayerLocalBandwidthEstimator6,bandwidth:p,chosenBandwidth:t.bandwidth});var u=t.id,v=this.$VideoPlayerLocalBandwidthEstimator12(r,u),w=this.$VideoPlayerLocalBandwidthEstimator12(s,u);if(v!==w)if(v===c("VideoPlayerAbrEvaluation").CONSERVATIVE&&w===c("VideoPlayerAbrEvaluation").IDEAL)v=c("VideoPlayerAbrEvaluation").CONSERVATIVE_RESOLUTION_CONSTRAINED;this.$VideoPlayerLocalBandwidthEstimator4.push(v)}};k.prototype.$VideoPlayerLocalBandwidthEstimator11=function(l,m){"use strict";var n=0;for(var o=0;o<m.length;o++){if(l<=m[o].bandwidth)break;n=m[o].id}return n};k.prototype.$VideoPlayerLocalBandwidthEstimator12=function(l,m){"use strict";return l===m?c("VideoPlayerAbrEvaluation").IDEAL:l>m?c("VideoPlayerAbrEvaluation").CONSERVATIVE:c("VideoPlayerAbrEvaluation").AGGRESSIVE};k.prototype.flushABREvaluationSet=function(){"use strict";var l=this.$VideoPlayerLocalBandwidthEstimator4;this.$VideoPlayerLocalBandwidthEstimator4=[];return l};f.exports=k}),null);
__d("ExtendableVideoPlayerShakaPerformanceTypedLogger",["VideoPlayerShakaPerformanceTypedLogger"],(function a(b,c,d,e,f,g){"use strict";var h,i;h=babelHelpers.inherits(j,c("VideoPlayerShakaPerformanceTypedLogger"));i=h&&h.prototype;j.prototype.setState=function(k){this.$ExtendableVideoPlayerShakaPerformanceTypedLogger1=k;i.setState.call(this,k);return this};j.prototype.getState=function(){return this.$ExtendableVideoPlayerShakaPerformanceTypedLogger1};j.prototype.setSequentialID=function(k){this.$ExtendableVideoPlayerShakaPerformanceTypedLogger2=k;i.setSequentialID.call(this,k);return this};j.prototype.setParentLogger=function(k){this.setParentID(k.$ExtendableVideoPlayerShakaPerformanceTypedLogger2);return this};function j(){h.apply(this,arguments)}f.exports=j}),null);
__d("VideoPlayerArtilleryOperationMarker",[],(function a(b,c,d,e,f,g){"use strict";function h(i,j,k,l){this.$VideoPlayerArtilleryOperationMarker2=i;this.$VideoPlayerArtilleryOperationMarker3=j;this.$VideoPlayerArtilleryOperationMarker4=k;this.$VideoPlayerArtilleryOperationMarker5=l;this.$VideoPlayerArtilleryOperationMarker6=false}h.prototype.markOperationStart=function(){return this.$VideoPlayerArtilleryOperationMarker7("Starting")};h.prototype.markOperationEnd=function(){return this.$VideoPlayerArtilleryOperationMarker7("Ending")};h.prototype.$VideoPlayerArtilleryOperationMarker7=function(i){var j=this.$VideoPlayerArtilleryOperationMarker4();if(j)j.inform(i+" "+this.$VideoPlayerArtilleryOperationMarker2+" #"+this.$VideoPlayerArtilleryOperationMarker3,{pointGroup:this.$VideoPlayerArtilleryOperationMarker5.getGroupName(this.$VideoPlayerArtilleryOperationMarker2,this.$VideoPlayerArtilleryOperationMarker1),isPointOfInterest:true,type:null}).addStringAnnotation("resource",this.$VideoPlayerArtilleryOperationMarker1||"").addStringAnnotation("wasPrefetchCacheHit",this.$VideoPlayerArtilleryOperationMarker6.toString());return this};h.prototype.setResource=function(i){this.$VideoPlayerArtilleryOperationMarker1=i;return this};h.prototype.setWasPrefetchCacheHit=function(i){this.$VideoPlayerArtilleryOperationMarker6=i;return this};f.exports=h}),null);
__d("VideoPlayerArtilleryPointGrouper",["Map"],(function a(b,c,d,e,f,g){function h(){"use strict";this.$VideoPlayerArtilleryPointGrouper1=new(c("Map"))();this.$VideoPlayerArtilleryPointGrouper2=new(c("Map"))()}h.prototype.getGroupName=function(i,j){"use strict";if(!j){switch(i){case"start_streams":i="source_attach";break}return i}var k=this.$VideoPlayerArtilleryPointGrouper1.get(j);if(k)return k;var l=void 0;if(j.indexOf("-init.m4v")!==-1)l="-init.m4v";else if(j.indexOf("-init.m4a")!==-1)l="-init.m4a";else if(j.indexOf(".mpd")!==-1)return"source_load";else if(j.indexOf(".m4v")!==-1)l=".m4v";else if(j.indexOf(".m4a")!==-1)l=".m4a";else l="unknown";var m=this.$VideoPlayerArtilleryPointGrouper2.get(l)+1||1;this.$VideoPlayerArtilleryPointGrouper2.set(l,m);k=l+" #"+m;this.$VideoPlayerArtilleryPointGrouper1.set(j,k);return k};f.exports=h}),null);
__d("VideoPlayerArtilleryTrace",["TimeSliceInteraction","UserAgentData","VideoPlayerArtilleryOperationMarker","VideoPlayerArtilleryPointGrouper"],(function a(b,c,d,e,f,g){"use strict";var h=3e4,i=3e3;function j(k,l){this.$VideoPlayerArtilleryTrace13=function(){var m=this.$VideoPlayerArtilleryTrace2;if(m){var n=m.stallTrace,o=m.hasStalls,p=m.stallTraceTimeout;o?n.finish():n.disable();clearTimeout(p)}this.$VideoPlayerArtilleryTrace2=null}.bind(this);this.$VideoPlayerArtilleryTrace17=function(){return this.$VideoPlayerArtilleryTrace1}.bind(this);this.$VideoPlayerArtilleryTrace18=function(){var m=this.$VideoPlayerArtilleryTrace2;return m?m.stallTrace:null}.bind(this);this.$VideoPlayerArtilleryTrace4=l.videoID;this.$VideoPlayerArtilleryTrace5=l.video;this.$VideoPlayerArtilleryTrace6=k;this.$VideoPlayerArtilleryTrace7=l.isLive;this.$VideoPlayerArtilleryTrace9=l.playerOrigin;this.$VideoPlayerArtilleryTrace10=l.playerSuborigin;this.$VideoPlayerArtilleryTrace8=0;this.$VideoPlayerArtilleryTrace11=new(c("VideoPlayerArtilleryPointGrouper"))()}j.prototype.updateBufferAhead=function(k){var l=this.$VideoPlayerArtilleryTrace2;if(!l&&k<=i)this.$VideoPlayerArtilleryTrace2={stallTrace:this.$VideoPlayerArtilleryTrace12(c("TimeSliceInteraction").create("video_stall")),hasStalls:false,stallTraceTimeout:setTimeout(this.$VideoPlayerArtilleryTrace13,h)};else if(k>i)this.$VideoPlayerArtilleryTrace13()};j.prototype.enterState=function(k){switch(k){case"loading":this.$VideoPlayerArtilleryTrace14();break;case"playing":this.$VideoPlayerArtilleryTrace15();break;default:this.$VideoPlayerArtilleryTrace16(k);break}return this};j.prototype.$VideoPlayerArtilleryTrace16=function(k){var l=this.$VideoPlayerArtilleryTrace1;if(l)l.inform("State: "+k)};j.prototype.getMarkers=function(k){var l=[],m=(++this.$VideoPlayerArtilleryTrace8).toString();if(this.$VideoPlayerArtilleryTrace1)l.push(new(c("VideoPlayerArtilleryOperationMarker"))(k,m,this.$VideoPlayerArtilleryTrace17,this.$VideoPlayerArtilleryTrace11));var n=this.$VideoPlayerArtilleryTrace2;if(n){if(k==="buffering")n.hasStalls=true;l.push(new(c("VideoPlayerArtilleryOperationMarker"))(k,m,this.$VideoPlayerArtilleryTrace18,this.$VideoPlayerArtilleryTrace11))}return l};j.prototype.$VideoPlayerArtilleryTrace14=function(){var k=this.$VideoPlayerArtilleryTrace12(c("TimeSliceInteraction").create("video_psr"));this.$VideoPlayerArtilleryTrace1=k;this.$VideoPlayerArtilleryTrace16("loading")};j.prototype.$VideoPlayerArtilleryTrace15=function(){this.$VideoPlayerArtilleryTrace16("playing");var k=this.$VideoPlayerArtilleryTrace1;if(k){k.finish();this.$VideoPlayerArtilleryTrace1=null}};j.prototype.$VideoPlayerArtilleryTrace12=function(k){k.trace().addStringAnnotation("videoID",this.$VideoPlayerArtilleryTrace4).addStringAnnotation("sessionID",this.$VideoPlayerArtilleryTrace6).addStringAnnotation("browserName",c("UserAgentData").browserName).addStringAnnotation("browserVersion",c("UserAgentData").browserVersion).addStringAnnotation("isLive",this.$VideoPlayerArtilleryTrace7.toString()).addStringAnnotation("playerOrigin",this.$VideoPlayerArtilleryTrace9||"").addStringAnnotation("playerSuborigin",this.$VideoPlayerArtilleryTrace10||"");return k};f.exports=j}),null);
__d("VideoPlayerShakaPerformanceLogger",["ExtendableVideoPlayerShakaPerformanceTypedLogger","ScriptPath","VideoPlayerArtilleryTrace","VideoPlayerShakaPerformanceLoggerConfig"],(function a(b,c,d,e,f,g){"use strict";h.isEnabled=function(){return c("VideoPlayerShakaPerformanceLoggerConfig").isSampled};function h(i){this.$VideoPlayerShakaPerformanceLogger2=i.videoID;this.$VideoPlayerShakaPerformanceLogger4=i.video;this.$VideoPlayerShakaPerformanceLogger1=i.uniqueID;this.$VideoPlayerShakaPerformanceLogger3=0;this.$VideoPlayerShakaPerformanceLogger5=i.representationId;this.$VideoPlayerShakaPerformanceLogger9=i.isLive;this.$VideoPlayerShakaPerformanceLogger8=null;this.$VideoPlayerShakaPerformanceLogger10=i.accessToken;this.$VideoPlayerShakaPerformanceLogger12=i.playerOrigin;this.$VideoPlayerShakaPerformanceLogger13=i.playerSuborigin;this.$VideoPlayerShakaPerformanceLogger11=new(c("VideoPlayerArtilleryTrace"))(this.$VideoPlayerShakaPerformanceLogger1,i)}h.prototype.$VideoPlayerShakaPerformanceLogger14=function(i){var j=this.$VideoPlayerShakaPerformanceLogger4.buffered;if(j.length>0){var k=j.length-1;i=i.setLastBufferedStart(Math.round(j.start(k)*1e3)).setLastBufferedEnd(Math.round(j.end(k)*1e3));this.$VideoPlayerShakaPerformanceLogger11.updateBufferAhead((j.end(k)-this.$VideoPlayerShakaPerformanceLogger4.currentTime)*1e3)}var l=[];for(var m=0;m<j.length-1;m++){var n=Math.round(this.$VideoPlayerShakaPerformanceLogger4.buffered.start(m)*1e3),o=Math.round(this.$VideoPlayerShakaPerformanceLogger4.buffered.end(m)*1e3);l.push([n,o])}if(l&&l.length)i=i.setAdditionalBufferedRanges(JSON.stringify(l));return i};h.prototype.getLiveheadDelta=function(){return this.$VideoPlayerShakaPerformanceLogger8?Math.round((this.$VideoPlayerShakaPerformanceLogger8-this.$VideoPlayerShakaPerformanceLogger4.currentTime)*1e3):null};h.prototype.getVideoID=function(){return this.$VideoPlayerShakaPerformanceLogger2};h.prototype.getEventLogger=function(event){var i=Date.now(),j=new(c("ExtendableVideoPlayerShakaPerformanceTypedLogger"))(),k=this.$VideoPlayerShakaPerformanceLogger4.currentTime,l=this.$VideoPlayerShakaPerformanceLogger4.duration;this.$VideoPlayerShakaPerformanceLogger14(j).setEvent(event).setVideoID(this.$VideoPlayerShakaPerformanceLogger2).setPlayerOriginCallerSpecified(this.$VideoPlayerShakaPerformanceLogger12).setScriptPath(c("ScriptPath").getScriptPath()).setPlayerSuborigin(this.$VideoPlayerShakaPerformanceLogger13).setRepresentationID(this.$VideoPlayerShakaPerformanceLogger5).setPlayhead(Math.round(k*1e3)).setVideoDuration(Math.round(l*1e3)).setIsLive(this.$VideoPlayerShakaPerformanceLogger9).setSession(this.$VideoPlayerShakaPerformanceLogger1).setSequentialID(this.$VideoPlayerShakaPerformanceLogger3++).setState(this.$VideoPlayerShakaPerformanceLogger6).setLastPlayingEventTime(this.$VideoPlayerShakaPerformanceLogger7).setLiveheadDelta(this.getLiveheadDelta()).setPushed(0).setResult("success").setAccessToken(this.$VideoPlayerShakaPerformanceLogger10).setClientTimeBegin(i).setClientTimeEnd(i);var m=j.setState;j.setState=function(o){if(o!==this.$VideoPlayerShakaPerformanceLogger6&&o==="playing")this.$VideoPlayerShakaPerformanceLogger7=Date.now();else if(o!=="playing")this.$VideoPlayerShakaPerformanceLogger7=null;this.$VideoPlayerShakaPerformanceLogger6=o;this.$VideoPlayerShakaPerformanceLogger11.enterState(o);return m.call(j,o)}.bind(this);j.updateState=function(o){if(j.getState()==this.$VideoPlayerShakaPerformanceLogger6){this.$VideoPlayerShakaPerformanceLogger11.enterState(o);return j.setState(o)}return j}.bind(this);var n=j.setError;j.setError=function(o){if(typeof o==="object"){if(o.type==="aborted"||o.type==="delay")this.setResult("aborted");else{this.setResult("failed");n.call(this,o.type)}this.setCode(o.status)}else n.call(this,o);return this};return j};h.prototype.getArtilleryMarkers=function(i){return this.$VideoPlayerShakaPerformanceLogger11.getMarkers(i)};h.prototype.getOperationLogger=function(i){var j=this.getEventLogger(i),k=this.getArtilleryMarkers(i),l=j.setResource;j.setResource=function(n){k.forEach(function(o){return o.setResource(n)});return l.call(j,n)};var m=j.log;j.log=function(){this.setClientTimeEnd(Date.now());k.forEach(function(n){return n.markOperationEnd()});return m.call(this)};j.start=function(){k.forEach(function(n){return n.markOperationStart()});return j};j.setWasPrefetchCacheHit=function(n){k.forEach(function(o){return o.setWasPrefetchCacheHit(n)});return j};j.setLiveheadPosition=function(n){this.$VideoPlayerShakaPerformanceLogger8=n;j.setLiveheadDelta(this.getLiveheadDelta());return j}.bind(this);return j};h.prototype.setRepresentationID=function(i){this.$VideoPlayerShakaPerformanceLogger5=i};f.exports=h}),null);
__d("FetchStreamStateTracker",["invariant"],(function a(b,c,d,e,f,g,h){"use strict";i.prototype.setNextRequestInfo=function(j){this.$FetchStreamStateTracker1=this.$FetchStreamStateTracker2;this.$FetchStreamStateTracker2=j};i.prototype.setFetchRange=function(j){this.$FetchStreamStateTracker3=j};i.prototype.isNextRequestContinuous=function(){this.$FetchStreamStateTracker2||h(0);if(!this.$FetchStreamStateTracker1)return false;if(this.$FetchStreamStateTracker1.baseUrl!==this.$FetchStreamStateTracker2.baseUrl||(this.$FetchStreamStateTracker1.endByte||0)+1!==(this.$FetchStreamStateTracker2.startByte||0))return false;return true};i.prototype.isNextRequestInRange=function(){this.$FetchStreamStateTracker2||h(0);if(!this.$FetchStreamStateTracker3)return false;var j=Infinity,k=this.$FetchStreamStateTracker3.endByte;if(k!==null&&k!==undefined)j=k;return(this.$FetchStreamStateTracker2.endByte||0)<=j};function i(){}f.exports=i}),null);
__d("MaybeNativePromise",["Promise"],(function a(b,c,d,e,f,g){"use strict";var h=b.Promise||c("Promise");c("Promise").resolve();f.exports=h}),null);
__d("ProducerInterruptedError",[],(function a(b,c,d,e,f,g){"use strict";var h,i;h=babelHelpers.inherits(j,Error);i=h&&h.prototype;function j(k){i.constructor.call(this,k)}f.exports=j}),null);
__d("DeferredBuffer",["invariant","Deferred","ProducerInterruptedError","MaybeNativePromise"],(function a(b,c,d,e,f,g,h){"use strict";function i(){this.$DeferredBuffer1=[];this.$DeferredBuffer2=false}i.prototype.produce=function(j){this.$DeferredBuffer4(j)};i.prototype.signalProducerInterruption=function(){this.$DeferredBuffer4(new(c("ProducerInterruptedError"))("producer interrupted"))};i.prototype.consume=function(j){if(this.$DeferredBuffer2)throw new Error("A buffer can only be consumed by one client at a time");this.$DeferredBuffer2=true;var k=c("MaybeNativePromise").resolve();if(!this.$DeferredBuffer1.length){this.$DeferredBuffer3=new(c("Deferred"))();k=this.$DeferredBuffer3.getPromise()}return k.then(function(){this.$DeferredBuffer1.length>0||h(0);this.$DeferredBuffer3=null;this.$DeferredBuffer2=false;var l=this.$DeferredBuffer5(j);if(l instanceof Uint8Array)return l;throw l}.bind(this))};i.prototype.$DeferredBuffer4=function(j){this.$DeferredBuffer1.push(j);if(this.$DeferredBuffer3)this.$DeferredBuffer3.resolve()};i.prototype.$DeferredBuffer5=function(j){if(this.$DeferredBuffer1.length===0)return new Uint8Array([]);var k=this.$DeferredBuffer1[0];if(k instanceof Error){this.$DeferredBuffer1.shift();return k}if(j!==undefined&&k.length>j){var l=k.slice(j);k=k.slice(0,j);this.$DeferredBuffer1[0]=l}else this.$DeferredBuffer1.shift();return k};i.prototype.isEmpty=function(){return this.$DeferredBuffer1.length===0};f.exports=i}),null);
__d("ReadableStream",[],(function a(b,c,d,e,f,g){f.exports=self.ReadableStream}),null);
__d("WritableStream",[],(function a(b,c,d,e,f,g){f.exports=self.WritableStream}),null);
__d("pipeErrorTo",[],(function a(b,c,d,e,f,g){"use strict";function h(i,j){try{i.error(j)}catch(k){}}f.exports=h}),null);
__d("FixedSizeTransform",["invariant","Deferred","DeferredBuffer","MaybeNativePromise","ReadableStream","WritableStream","ProducerInterruptedError","pipeErrorTo"],(function a(b,c,d,e,f,g,h){"use strict";function i(){this.$FixedSizeTransform2=new(c("DeferredBuffer"))();this.$FixedSizeTransform3=0;this.$FixedSizeTransform4=c("MaybeNativePromise").resolve();this.$FixedSizeTransform7=[]}i.prototype.cancel=function(j){this.$FixedSizeTransform9(j);if(this.$FixedSizeTransform6)c("pipeErrorTo")(this.$FixedSizeTransform6,j)};i.prototype.$FixedSizeTransform9=function(j){this.$FixedSizeTransform8=j;if(this.$FixedSizeTransform5)this.$FixedSizeTransform5.reject(this.$FixedSizeTransform8)};i.prototype.getSink=function(){if(!this.$FixedSizeTransform1)this.$FixedSizeTransform1=new(c("WritableStream"))({start:function(j){this.$FixedSizeTransform6=j}.bind(this),write:function(j){j instanceof Uint8Array||h(0);this.$FixedSizeTransform2.produce(j)}.bind(this),close:function(){this.$FixedSizeTransform2.signalProducerInterruption();this.$FixedSizeTransform1=null}.bind(this),abort:function(j){this.$FixedSizeTransform9(j);this.$FixedSizeTransform7.forEach(function(k){var l=j;c("pipeErrorTo")(k,l)})}.bind(this)});return this.$FixedSizeTransform1};i.prototype.getNextFixedSizeStream=function(j){var k=j===undefined;if(this.$FixedSizeTransform8)return c("MaybeNativePromise").reject(this.$FixedSizeTransform8);this.$FixedSizeTransform5=new(c("Deferred"))(c("MaybeNativePromise"));var l=this.$FixedSizeTransform5.getPromise(),m=this.$FixedSizeTransform4;this.$FixedSizeTransform4=l;return m.then(function(){return new(c("ReadableStream"))({start:function(n){this.$FixedSizeTransform7.push(n)}.bind(this),pull:function(n){if(!k&&this.$FixedSizeTransform3===j)return this.$FixedSizeTransform10(n);var o=k?undefined:(j||0)-this.$FixedSizeTransform3;return this.$FixedSizeTransform2.consume(o).then(function(p){n.enqueue(p);this.$FixedSizeTransform3+=p.length}.bind(this))["catch"](function(p){if(p instanceof c("ProducerInterruptedError"))return k?this.$FixedSizeTransform10(n):c("MaybeNativePromise").resolve();throw p}.bind(this))}.bind(this),cancel:function(n){this.$FixedSizeTransform9(n);c("pipeErrorTo")(this.$FixedSizeTransform6,n)}.bind(this)})}.bind(this))};i.prototype.$FixedSizeTransform10=function(j){j.close();this.$FixedSizeTransform3=0;this.$FixedSizeTransform5.resolve();return c("MaybeNativePromise").resolve()};f.exports=i}),null);
__d("NetworkErrorTransformStream",["ReadableStream","WritableStream","pipeErrorTo"],(function a(b,c,d,e,f,g){"use strict";h.prototype.$NetworkErrorTransformStream3=function(i){this.$NetworkErrorTransformStream1.enqueue(i)};function h(){this.writable=new(c("WritableStream"))({start:function(i){this.$NetworkErrorTransformStream2=i}.bind(this),write:function(i){this.$NetworkErrorTransformStream3(i)}.bind(this),close:function(){this.$NetworkErrorTransformStream1.close()}.bind(this),abort:function(i){var j=i;if(i instanceof TypeError)j={type:"net",status:0,message:"Network failure."};c("pipeErrorTo")(this.$NetworkErrorTransformStream1,j)}.bind(this)});this.readable=new(c("ReadableStream"))({start:function(i){this.$NetworkErrorTransformStream1=i}.bind(this),cancel:function(i){c("pipeErrorTo")(this.$NetworkErrorTransformStream2,i)}.bind(this)})}f.exports=h}),null);
__d("PausableRangeStream",["MaybeNativePromise","DeferredBuffer","ReadableStream","WritableStream","pipeErrorTo"],(function a(b,c,d,e,f,g){"use strict";function h(){return new Error("Upstream has an inconsistent range")}function i(j,k,l){this.$PausableRangeStream3=new(c("DeferredBuffer"))();this.$PausableRangeStream7=0;this.$PausableRangeStream8=0;this.$PausableRangeStream1=j;this.$PausableRangeStream2=k;var m=l||{},n=m.fixStreamingUndefinedEndByte;this.$PausableRangeStream12=!!n;this.$PausableRangeStream6=new(c("ReadableStream"))({start:function(o){this.$PausableRangeStream11=o}.bind(this),pull:function(o){var p=this.$PausableRangeStream1,q=p.startByte,r=p.endByte,s=r!=null?r-q+1:null;if(this.$PausableRangeStream7===s&&this.$PausableRangeStream3.isEmpty()){o.close();return c("MaybeNativePromise").resolve()}return this.$PausableRangeStream3.consume().then(function(t){this.$PausableRangeStream7+=t.length;if((!this.$PausableRangeStream12||s!==null)&&this.$PausableRangeStream7>(s||0))c("pipeErrorTo")(this.$PausableRangeStream11,h());o.enqueue(t)}.bind(this))}.bind(this),cancel:function(o){c("pipeErrorTo")(this.$PausableRangeStream10,o)}.bind(this)});this.$PausableRangeStream13()}i.prototype.$PausableRangeStream13=function(){this.$PausableRangeStream4=new(c("WritableStream"))({start:function(j){this.$PausableRangeStream10=j}.bind(this),write:function(j){this.$PausableRangeStream3.produce(j);this.$PausableRangeStream8+=j.length}.bind(this),close:function(){var j=this.$PausableRangeStream1,k=j.endByte,l=j.startByte;if(k!==null&&this.$PausableRangeStream8!==(k||0)-l+1)c("pipeErrorTo")(this.$PausableRangeStream11,h())}.bind(this),abort:function(j){c("pipeErrorTo")(this.$PausableRangeStream11,j)}.bind(this)})};i.prototype.getStream=function(){return this.$PausableRangeStream6};i.prototype.startStream=function(){var j=this.$PausableRangeStream1;j.startByte+=this.$PausableRangeStream8;return this.$PausableRangeStream2.startStream(j).then(function(k){this.$PausableRangeStream5=k;this.$PausableRangeStream9=k.pipeTo(this.$PausableRangeStream4)}.bind(this))};i.prototype.pauseStream=function(){c("pipeErrorTo")(this.$PausableRangeStream10,"streamPaused");this.$PausableRangeStream13();return c("MaybeNativePromise").resolve()};f.exports=i}),null);
__d("StreamBandwidthReporter",["EventEmitter","ReadableStream","VideoPlayerShakaExperiments","WritableStream","performanceNow","pipeErrorTo"],(function a(b,c,d,e,f,g){"use strict";var h,i;h=babelHelpers.inherits(j,c("EventEmitter"));i=h&&h.prototype;j.prototype.$StreamBandwidthReporter9=function(k){this.$StreamBandwidthReporter7.enqueue(k)};function j(k,l){i.constructor.call(this);this.$StreamBandwidthReporter1=0;this.$StreamBandwidthReporter2=0;this.$StreamBandwidthReporter6=Infinity;this.$StreamBandwidthReporter5=l;this.$StreamBandwidthReporter6=k;this.writable=new(c("WritableStream"))({start:function(m){this.$StreamBandwidthReporter3=this.$StreamBandwidthReporter4=c("performanceNow")();this.$StreamBandwidthReporter8=m}.bind(this),write:function(m){if(m.length!=undefined)this.$StreamBandwidthReporter1+=m.length;this.$StreamBandwidthReporter10();this.$StreamBandwidthReporter9(m)}.bind(this),close:function(){this.$StreamBandwidthReporter7.close()}.bind(this),abort:function(m){c("pipeErrorTo")(this.$StreamBandwidthReporter7,m)}.bind(this)});this.readable=new(c("ReadableStream"))({start:function(m){this.$StreamBandwidthReporter7=m}.bind(this),cancel:function(m){c("pipeErrorTo")(this.$StreamBandwidthReporter8,m)}.bind(this)})}j.prototype.$StreamBandwidthReporter10=function(){var k=this.$StreamBandwidthReporter6+this.$StreamBandwidthReporter1,l=this.$StreamBandwidthReporter5[0];if(!c("VideoPlayerShakaExperiments").enableSegmentBasedBandwidthUpdate||l!==undefined&&k>l){this.$StreamBandwidthReporter5.shift();var m=c("performanceNow")();this.emit("bandwidthUpdate",{bytesRead:this.$StreamBandwidthReporter1-this.$StreamBandwidthReporter2,timeTaken:m-this.$StreamBandwidthReporter3});this.$StreamBandwidthReporter3=m;this.$StreamBandwidthReporter2=this.$StreamBandwidthReporter1}};f.exports=j}),null);
__d("StreamFetchRequestLogger",["ReadableStream","VideoPlayerResourceTimer","WritableStream","performanceNow","pipeErrorTo"],(function a(b,c,d,e,f,g){"use strict";function h(i,j,k,l,m){this.$StreamFetchRequestLogger6=0;this.$StreamFetchRequestLogger3=k;this.$StreamFetchRequestLogger2=m;this.$StreamFetchRequestLogger1=i;this.$StreamFetchRequestLogger4=j;this.$StreamFetchRequestLogger5=l;this.writable=new(c("WritableStream"))({start:function(n){this.$StreamFetchRequestLogger10();this.$StreamFetchRequestLogger9=n}.bind(this),write:function(n){this.$StreamFetchRequestLogger6+=n.byteLength;this.$StreamFetchRequestLogger11(n)}.bind(this),close:function(){this.$StreamFetchRequestLogger8.close();this.$StreamFetchRequestLogger12()}.bind(this),abort:function(n){c("pipeErrorTo")(this.$StreamFetchRequestLogger8,n);this.$StreamFetchRequestLogger13(n)}.bind(this)});this.readable=new(c("ReadableStream"))({start:function(n){this.$StreamFetchRequestLogger8=n}.bind(this),cancel:function(n){c("pipeErrorTo")(this.$StreamFetchRequestLogger9,n);this.$StreamFetchRequestLogger13({name:"abort",type:"aborted",status:0,message:"Request aborted.",url:this.$StreamFetchRequestLogger3})}.bind(this)})}h.prototype.$StreamFetchRequestLogger10=function(){this.$StreamFetchRequestLogger7=this.$StreamFetchRequestLogger1.getOperationLogger("fetch_stream").setResource(this.$StreamFetchRequestLogger3).start();var i=this.$StreamFetchRequestLogger5,j=i.startByte,k=i.endByte,l=k===null?null:(k||0)+1-j;this.$StreamFetchRequestLogger7.setType(this.$StreamFetchRequestLogger4).setExpectedLength(l)};h.prototype.$StreamFetchRequestLogger13=function(i){this.$StreamFetchRequestLogger7.setError(i).setLength(this.$StreamFetchRequestLogger6).log()};h.prototype.$StreamFetchRequestLogger12=function(){var i=c("VideoPlayerResourceTimer").getResourceTimingEntry(this.$StreamFetchRequestLogger3,this.$StreamFetchRequestLogger2,c("performanceNow")());if(i){var j=i.timeToFirstByte,k=i.timeToLastByte,l=i.timeToRequestStart;this.$StreamFetchRequestLogger7.setTimeToFirstByte(Math.round(j)).setTimeToLastByte(Math.round(k)).setTimeToRequestStart(Math.round(l)).setLength(this.$StreamFetchRequestLogger6)}this.$StreamFetchRequestLogger7.log()};h.prototype.$StreamFetchRequestLogger11=function(i){this.$StreamFetchRequestLogger8.enqueue(i)};f.exports=h}),null);
__d("createErrorStream",["ReadableStream"],(function a(b,c,d,e,f,g){"use strict";function h(i){return new(c("ReadableStream"))({pull:function j(k){k.error(i)}})}f.exports=h}),null);
__d("VideoSegmentStreamByFetch",["invariant","ReadableStream","VideoAkamaiRequestHelper","VideoSegmentInfoHelper","createErrorStream"],(function a(b,c,d,e,f,g,h){"use strict";var i=window.fetch;function j(k){this.$VideoSegmentStreamByFetch1=k}j.prototype.getResourceUrl=function(k){var l=this.$VideoSegmentStreamByFetch2(k),m=c("VideoSegmentInfoHelper").getRequestUri(l),n=m.toString();return n};j.prototype.startStream=function(k){i||h(0);var l=this.getResourceUrl(k),m={};if(c("VideoAkamaiRequestHelper").isAkamai(l)){var n=this.$VideoSegmentStreamByFetch2(k);m=c("VideoAkamaiRequestHelper").getRequestHeaders(n)||{}}return i(l,{headers:m}).then(function(o){var p=o.body,q=o.status,r=o.ok;if(!r)return c("createErrorStream")({type:"net",status:q,url:l,message:"HTTP error."});p.getReader||h(0);return p})["catch"](function(o){if(o instanceof TypeError)return c("createErrorStream")({type:"net",status:0,url:l,message:"Network failure."});return c("createErrorStream")({type:"stream_processing",status:0,url:l,message:"Stream processing error."+o})})};j.prototype.$VideoSegmentStreamByFetch2=function(k){return{baseUrl:this.$VideoSegmentStreamByFetch1,startByte:k.startByte,endByte:k.endByte===null?undefined:k.endByte}};f.exports=j}),null);
__d("VideoStreamingManager",["EventEmitter","FetchStreamStateTracker","FixedSizeTransform","MaybeNativePromise","NetworkErrorTransformStream","PausableRangeStream","StreamBandwidthReporter","StreamFetchRequestLogger","VideoSegmentStreamByFetch","VideoPlayerShakaExperiments","performanceNow"],(function a(b,c,d,e,f,g){"use strict";var h,i;h=babelHelpers.inherits(j,c("EventEmitter"));i=h&&h.prototype;function j(k){var l=arguments.length<=1||arguments[1]===undefined?"video":arguments[1],m=arguments.length<=2||arguments[2]===undefined?null:arguments[2];i.constructor.call(this);this.$VideoStreamingManager4=new(c("FetchStreamStateTracker"))();this.$VideoStreamingManager2=k;this.$VideoStreamingManager5=m;this.$VideoStreamingManager6=l}j.prototype.getStream=function(k){var l=k.startByte,m=k.endByte;if(l===undefined)return c("MaybeNativePromise").reject("request range does not exist");var n=function(){this.$VideoStreamingManager4.setNextRequestInfo(k);if(!this.$VideoStreamingManager4.isNextRequestContinuous()||!this.$VideoStreamingManager4.isNextRequestInRange()||!this.$VideoStreamingManager1){if(this.$VideoStreamingManager1)this.$VideoStreamingManager1.cancel("reset stream");this.$VideoStreamingManager1=this.$VideoStreamingManager7(k)}var o=void 0;if(m==null)o=undefined;else o=m-l+1;return this.$VideoStreamingManager1.getNextFixedSizeStream(o)}.bind(this);return n()["catch"](function(){this.$VideoStreamingManager8();return n()}.bind(this))};j.prototype.$VideoStreamingManager7=function(k){var l=this.$VideoStreamingManager2.getSegmentsBoundaries(k),m=this.$VideoStreamingManager9(k.baseUrl,l),n=this.$VideoStreamingManager2.getFetchRange(k);this.$VideoStreamingManager4.setFetchRange(n);var o=new(c("PausableRangeStream"))(n,m,{fixStreamingUndefinedEndByte:c("VideoPlayerShakaExperiments").fixStreamingUndefinedEndByte}),p=new(c("FixedSizeTransform"))();o.startStream();o.getStream().pipeTo(p.getSink());return p};j.prototype.$VideoStreamingManager9=function(k,l){var m=new(c("VideoSegmentStreamByFetch"))(k),n=function n(p){return m.getResourceUrl(p)},o=m;o=this.$VideoStreamingManager10(o);o=this.$VideoStreamingManager11(o,n);if(this.$VideoStreamingManager6==="video")o=this.$VideoStreamingManager12(o,l);return o};j.prototype.$VideoStreamingManager10=function(k){var l={startStream:function m(n){var o=new(c("NetworkErrorTransformStream"))();return k.startStream(n).then(function(p){return p.pipeThrough(o)})}};return l};j.prototype.$VideoStreamingManager12=function(k,l){var m={startStream:function(n){var o=l[0].startByte,p=new(c("StreamBandwidthReporter"))(o,l.filter(function(q){return q!==null}).map(function(q){return q.endByte||0}));p.addListener("bandwidthUpdate",function(q){return this.emit("bandwidthUpdate",q)}.bind(this));return k.startStream(n).then(function(q){return q.pipeThrough(p)})}.bind(this)};return m};j.prototype.$VideoStreamingManager11=function(k,l){var m=this.$VideoStreamingManager5;if(!m)return k;var n={startStream:function(o){var p=new(c("StreamFetchRequestLogger"))(m,this.$VideoStreamingManager6,l(o),o,c("performanceNow")());return k.startStream(o).then(function(q){return q.pipeThrough(p)})}.bind(this)};return n};j.prototype.$VideoStreamingManager8=function(){this.$VideoStreamingManager4=new(c("FetchStreamStateTracker"))()};f.exports=j}),null);
__d("ViewportPriorityAdjuster",["Event","SubscriptionsHandler","getElementPosition","getViewportDimensions","throttle"],(function a(b,c,d,e,f,g){"use strict";var h=500,i=800;function j(k){this.$ViewportPriorityAdjuster1=function(){};this.$ViewportPriorityAdjuster2=new(c("SubscriptionsHandler"))();this.$ViewportPriorityAdjuster3=k;this.$ViewportPriorityAdjuster2.addSubscriptions(c("Event").listen(window,"scroll",c("throttle")(function(){return this.$ViewportPriorityAdjuster4(k)}.bind(this),h)))}j.prototype.$ViewportPriorityAdjuster5=function(k){if(!k.paused)return 0;var l=c("getViewportDimensions")(),m=c("getElementPosition")(k),n=m.y,o=m.height,p=l.height;if(!n&&!o)return-2;if(n+o<0)return-2;if(n>=0&&n+o<=p+i||n<=0&&n+o>=0)return 0;return-1};j.prototype.$ViewportPriorityAdjuster4=function(k){this.$ViewportPriorityAdjuster1(this.$ViewportPriorityAdjuster5(k))};j.prototype.setOnPriorityChanged=function(k){this.$ViewportPriorityAdjuster1=k};j.prototype.getPriorityAdjustment=function(){return this.$ViewportPriorityAdjuster5(this.$ViewportPriorityAdjuster3)};j.prototype.cleanup=function(){this.$ViewportPriorityAdjuster1=function(){};this.$ViewportPriorityAdjuster2.release()};f.exports=j}),null);
__d("canUseFetchStream",[],(function a(b,c,d,e,f,g){"use strict";function h(){var i=!!window.fetch,j=!!(window.ReadableStream&&window.WritableStream),k=!!(window.ReadableStream&&window.ReadableStream.prototype.pipeTo);return i&&j&&k}f.exports=h}),null);
__d("logLongAkamaiRequest",["CurrentUser","JSLog"],(function a(b,c,d,e,f,g){var h=false,i=2,j=[];function k(l){if(c("CurrentUser").isEmployee()&&!h){j=j.filter(function(m){var n=m.time;return Date.now()-n<1e3*60*2});j.push({data:l,time:Date.now()});if(j.length>=i){h=true;c("JSLog").warn("Long latency video request to akamai: %s",j.map(function(m){var l=m.data;return l}).join(" ; "))}}}f.exports=k}),null);
__d("VideoPlayerStreamSwitchReasons",[],(function a(b,c,d,e,f,g){f.exports=Object.freeze({BANDWIDTH:"bandwidth",FORCED:"forced",LOW_BUFFER_AVAILABILITY:"low_buffer_availability",PREFER_QUALITY_CLASS:"prefer_quality_class",USER:"user"})}),null);
__d("CustomAbrManager",["invariant","EventListener","SubscriptionsHandler","Shaka","VideoPlayerLoggerSource","VideoPlayerStreamSwitchReasons","VideoPlayerUtils","VideoQualityClasses","VideoPlayerLocalBandwidthEstimator","VideoPlayerShakaExperiments"],(function a(b,c,d,e,f,g,h){var i=c("Shaka").player.VideoTrack;function j(k){"use strict";this.$CustomAbrManager1=null;this.$CustomAbrManager2=null;this.$CustomAbrManager3=new(c("SubscriptionsHandler"))();this.$CustomAbrManager4=Number.POSITIVE_INFINITY;this.$CustomAbrManager5=-1;this.$CustomAbrManager6=true;this.$CustomAbrManager7=false;this.$CustomAbrManager8=k.maxWidth;this.$CustomAbrManager9=k.maxHeight;this.$CustomAbrManager10=k.minPlayQuality?k.minPlayQuality:null;this.$CustomAbrManager11=k.maxPlayQuality?k.maxPlayQuality:null;this.$CustomAbrManager12=k.initiallyForcedRepresentations;this.$CustomAbrManager13=k.video;this.$CustomAbrManager25=null;this.$CustomAbrManager22=null;this.$CustomAbrManager24=null;this.$CustomAbrManager23=k.abrLogger;this.$CustomAbrManager26=k.getSource;this.$CustomAbrManager27=null;if(k.enableAdaptation){this.$CustomAbrManager14=k.bandwidthModel;this.$CustomAbrManager15=k.bandwidthDowngradeTarget;this.$CustomAbrManager16=k.bandwidthUpgradeTarget;this.$CustomAbrManager17=k.useNewBandwidthBandLogic;this.$CustomAbrManager18=k.hvqUpgradeAggressiveness;this.$CustomAbrManager19=k.hvqInlineUpgradeAggressiveness;this.$CustomAbrManager20=k.preHvqUpgradeAggressiveness;this.$CustomAbrManager21=k.preHvqInlineUpgradeAggressiveness}}j.prototype.destroy=function(){"use strict";this.$CustomAbrManager3.release();this.$CustomAbrManager3.engage();this.$CustomAbrManager1=null;this.$CustomAbrManager2=null;this.$CustomAbrManager6=false};j.prototype.setResolutionConstraint=function(k,l){"use strict";this.$CustomAbrManager8=k;this.$CustomAbrManager9=l;var m=this.$CustomAbrManager13.paused?c("VideoPlayerShakaExperiments").clearBufferOnConstraintChangePausedOffset:c("VideoPlayerShakaExperiments").clearBufferOnConstraintChangeOffset;this.$CustomAbrManager28({clearBufferIfUpgrading:c("VideoPlayerShakaExperiments").clearBufferOnConstraintChange,clearBufferOffset:m})};j.prototype.initialize=function(k,l){"use strict";if(this.$CustomAbrManager1||this.$CustomAbrManager2)return;this.$CustomAbrManager1=k;this.$CustomAbrManager2=l};j.prototype.start=function(){var k;"use strict";if(!this.$CustomAbrManager1||!this.$CustomAbrManager2||this.$CustomAbrManager7)return;this.$CustomAbrManager4=Date.now()+j.FIRST_SWITCH_INTERVAL;if(j.FIRST_SWITCH_INTERVAL===0)this.$CustomAbrManager5=j.FIRST_SWITCH_SEGMENT_INTERVAL;var l=[c("EventListener").listen(this.$CustomAbrManager2,"adaptation",this.$CustomAbrManager29.bind(this)),c("EventListener").listen(this.$CustomAbrManager2,"trackschanged",this.$CustomAbrManager30.bind(this))];if(this.$CustomAbrManager1&&!c("VideoPlayerShakaExperiments").triggerAbrWithTimer)l.push(c("EventListener").listen(this.$CustomAbrManager1.getEstimator(),"bandwidth",this.$CustomAbrManager31.bind(this)));(k=this.$CustomAbrManager3).addSubscriptions.apply(k,l);this.$CustomAbrManager7=true;if(c("VideoPlayerShakaExperiments").makeEarlyTrackSelection)this.$CustomAbrManager28()};j.prototype.$CustomAbrManager30=function(){"use strict";this.$CustomAbrManager28()};j.prototype.setPreferredVideoTrack=function(k){"use strict";this.$CustomAbrManager25=k;this.$CustomAbrManager28({clearBufferIfUpgrading:true,clearBufferOffset:0})};j.prototype.unsetPreferredVideoTrack=function(){"use strict";this.$CustomAbrManager25=null;this.$CustomAbrManager28()};j.prototype.enable=function(k){"use strict";this.$CustomAbrManager6=k};j.prototype.getInitialVideoTrackId=function(){"use strict";if(!this.$CustomAbrManager1||!this.$CustomAbrManager2)return null;var k=this.$CustomAbrManager32();return k?k.id:null};j.prototype.getInitialSwitchReason=function(){"use strict";return this.$CustomAbrManager24};j.prototype.getInitialAudioTrackId=function(){"use strict";if(!this.$CustomAbrManager1||!this.$CustomAbrManager2)return null;var k=this.$CustomAbrManager33();return k?k.id:null};j.prototype.selectVideoTrack=function(k,l,m,n){"use strict";if(!this.$CustomAbrManager7)return;this.$CustomAbrManager2.selectVideoTrack(k.id,l,m,n)};j.$CustomAbrManager34=function(k){"use strict";for(var l=0;l<k.length;++l)if(k[l].active)return k[l];return null};j.prototype.$CustomAbrManager35=function(k){"use strict";if(!this.$CustomAbrManager6)return;if(this.$CustomAbrManager27)clearTimeout(this.$CustomAbrManager27);if(k>0)this.$CustomAbrManager27=setTimeout(function(){return this.$CustomAbrManager28()}.bind(this),k);else this.$CustomAbrManager28()};j.prototype.$CustomAbrManager31=function(){"use strict";if(this.$CustomAbrManager5<0){if(Date.now()<this.$CustomAbrManager4)return}else{var k=this.$CustomAbrManager2?this.$CustomAbrManager2.getFetchedVideoSegmentsCount():0;if(this.$CustomAbrManager5>k)return;this.$CustomAbrManager5=-1}this.$CustomAbrManager28()};j.prototype.$CustomAbrManager28=function(){var k=arguments.length<=0||arguments[0]===undefined?{clearBufferIfUpgrading:false,clearBufferOffset:0}:arguments[0];"use strict";if(!this.$CustomAbrManager6)return;var l=k.clearBufferIfUpgrading,m=k.clearBufferOffset,n=this.$CustomAbrManager32();if(n){if(n.active){if(c("VideoPlayerShakaExperiments").triggerAbrWithTimer)this.$CustomAbrManager35(j.MIN_EVAL_INTERVAL);else this.$CustomAbrManager4=Date.now()+j.MIN_EVAL_INTERVAL;return}var o=false;if(l){var p=j.$CustomAbrManager34(this.$CustomAbrManager2.getVideoTracks());o=p?i.compare(p,n)<0:false}this.selectVideoTrack(n,o,m,this.$CustomAbrManager22)}if(!c("VideoPlayerShakaExperiments").triggerAbrWithTimer)this.$CustomAbrManager4=Number.POSITIVE_INFINITY};j.prototype.$CustomAbrManager29=function(event){"use strict";if(c("VideoPlayerShakaExperiments").triggerAbrWithTimer)this.$CustomAbrManager35(event.reason===this.getInitialSwitchReason()?j.FIRST_SWITCH_INTERVAL:j.MIN_SWITCH_INTERVAL);else if(this.$CustomAbrManager4==Number.POSITIVE_INFINITY)this.$CustomAbrManager4=Date.now()+j.MIN_SWITCH_INTERVAL};j.prototype.$CustomAbrManager36=function(k,l){"use strict";if(this.$CustomAbrManager23)this.$CustomAbrManager23.setEvent("track_selection").setReason(k).setRepresentationID(l.streamInfoID).log()};j.prototype.$CustomAbrManager32=function(){var k,l=this,m;"use strict";var n=this.$CustomAbrManager2.getVideoTracks();if(n.length==0)return null;if(!this.$CustomAbrManager7)for(var o=0;o<n.length;o++)if(this.$CustomAbrManager12&&this.$CustomAbrManager12.includes(n[o].streamInfoID)){this.$CustomAbrManager22=c("VideoPlayerStreamSwitchReasons").FORCED;this.$CustomAbrManager24=c("VideoPlayerStreamSwitchReasons").FORCED;this.$CustomAbrManager36(this.$CustomAbrManager22,n[o]);return n[o]}if(this.$CustomAbrManager25){var k=function(){var J=l.$CustomAbrManager25.id,K=n.find(function(C){return C.id===J});if(K){l.$CustomAbrManager22=c("VideoPlayerStreamSwitchReasons").USER;l.$CustomAbrManager36(l.$CustomAbrManager22,K);return{v:K}}}();if(typeof k==="object")return k.v}n.sort(i.compare);if(this.$CustomAbrManager10!==null||this.$CustomAbrManager11!==null){var m=function(){var J=l.$CustomAbrManager10!==null?c("VideoQualityClasses").indexOf(l.$CustomAbrManager10):0,K=l.$CustomAbrManager11!==null?c("VideoQualityClasses").indexOf(l.$CustomAbrManager11):c("VideoQualityClasses").length-1;if(J<=K){var L=n.filter(function(N){return c("VideoQualityClasses").indexOf(N.fbQualityClass)>=J&&c("VideoQualityClasses").indexOf(N.fbQualityClass)<=K});l.$CustomAbrManager22=c("VideoPlayerStreamSwitchReasons").PREFER_QUALITY_CLASS;if(!L.length){l.$CustomAbrManager36(l.$CustomAbrManager22,n[n.length-1]);return{v:n[n.length-1]}}var M=c("VideoQualityClasses").indexOf("sd");if(n.length==2&&L.length==2&&K<=M){l.$CustomAbrManager36(l.$CustomAbrManager22,n[0]);return{v:n[0]}}n=L}}();if(typeof m==="object")return m.v}var p=n[0],q=this.$CustomAbrManager9,r=this.$CustomAbrManager8,s=n;n=n.filter(function(J){return J.width<=r||J.height<=q});var t=j.$CustomAbrManager34(this.$CustomAbrManager2.getAudioTracks()),u=t?t.bandwidth:0,v=j.$CustomAbrManager34(s),w=s.indexOf(v),x=c("VideoPlayerUtils").getBufferedAheadOf(this.$CustomAbrManager13);if(x<c("VideoPlayerShakaExperiments").forceLowestRepresentationThreshold){var y=0;if(w>-1)y=Math.floor(w*c("VideoPlayerShakaExperiments").forceLowerRepresentationStepRatio);if(y>=n.length)y=n.length-1;this.$CustomAbrManager22=c("VideoPlayerStreamSwitchReasons").LOW_BUFFER_AVAILABILITY;p=n[y]||p;this.$CustomAbrManager36(this.$CustomAbrManager22,p);return p}else{var z=this.$CustomAbrManager37(),A=0;for(var B=0;B<n.length;B++){var C=n[B],D=B+1<n.length?n[B+1]:{bandwidth:Number.POSITIVE_INFINITY};if(!C.bandwidth)continue;var E=this.$CustomAbrManager38(C,D,x,this.$CustomAbrManager26&&this.$CustomAbrManager26()),F=this.$CustomAbrManager17?A:(C.bandwidth+u)/this.$CustomAbrManager15,G=(D.bandwidth+u)/E;A=G;var H=c("VideoPlayerShakaExperiments").useBufferDowngradeThreshold,I=c("VideoPlayerShakaExperiments").bufferDowngradeThreshold;if(H&&x>I&&B<=w){p=v?v:C;continue}if(z>=F&&z<=G){p=C;if(p.active)break}}this.$CustomAbrManager22=c("VideoPlayerStreamSwitchReasons").BANDWIDTH}this.$CustomAbrManager36(this.$CustomAbrManager22,p);return p};j.prototype.$CustomAbrManager37=function(){"use strict";this.$CustomAbrManager1 instanceof c("VideoPlayerLocalBandwidthEstimator")||h(0);return this.$CustomAbrManager1.getBandwidth(this.$CustomAbrManager14)};j.prototype.$CustomAbrManager38=function(k,l,m,n){"use strict";var o=1;if(!k.isInlineHVQ&&l.isInlineHVQ)o=this.$CustomAbrManager21;else if(k.isInlineHVQ&&n===c("VideoPlayerLoggerSource").INLINE)o=this.$CustomAbrManager19;else if(k.isHVQ)o=this.$CustomAbrManager18;var p=c("VideoPlayerShakaExperiments").bufferTarget,q=p>-1;if(q){var r=m>p,s=r?c("VideoPlayerShakaExperiments").bufferTargetOverflowUpgradeAggressiveness:c("VideoPlayerShakaExperiments").bufferTargetUnderflowUpgradeAggressiveness;o*=s}return this.$CustomAbrManager16*o};j.prototype.$CustomAbrManager33=function(){"use strict";var k=this.$CustomAbrManager2.getAudioTracks();if(k.length==0)return null;if(!this.$CustomAbrManager7)for(var l=0;l<k.length;l++)if(this.$CustomAbrManager12&&this.$CustomAbrManager12.includes(k[l].streamInfoID))return k[l];return null};j.FIRST_SWITCH_INTERVAL=c("VideoPlayerShakaExperiments").firstSwitchInterval;j.FIRST_SWITCH_SEGMENT_INTERVAL=c("VideoPlayerShakaExperiments").firstSwitchSegmentInterval;j.MIN_SWITCH_INTERVAL=c("VideoPlayerShakaExperiments").minSwitchInterval;j.MIN_EVAL_INTERVAL=c("VideoPlayerShakaExperiments").minEvalInterval;f.exports=j}),null);
__d("VideoPlayerAbrLogger",["VideoPlayerAbrTypedLogger","VideoPlayerShakaBandwidthEstimator","VideoPlayerUtils","VideoPlayerShakaExperiments","VideoPlayerAbrLoggerConfig"],(function a(b,c,d,e,f,g){"use strict";var h,i;h=babelHelpers.inherits(j,c("VideoPlayerAbrTypedLogger"));i=h&&h.prototype;function j(k){i.constructor.call(this);i.setSession.call(this,k.uniqueID);i.setVideoID.call(this,k.videoID);this.$VideoPlayerAbrLogger4()}j.prototype.setVideoElement=function(k){this.$VideoPlayerAbrLogger3=k;return this};j.prototype.setBytes=function(k){this.$VideoPlayerAbrLogger1.bytes=k;return this};j.prototype.setDelayMs=function(k){this.$VideoPlayerAbrLogger1.delayMs=k;return this};j.prototype.setEvent=function(event){this.$VideoPlayerAbrLogger1.event=event;return this};j.prototype.setUnsampledReason=function(k){this.$VideoPlayerAbrLogger1.unsampledReason=k;return this};j.prototype.setReason=function(k){this.$VideoPlayerAbrLogger1.reason=k;return this};j.prototype.setRepresentationID=function(k){this.$VideoPlayerAbrLogger2=k;return this};j.prototype.setClientTimeBegin=function(k){this.$VideoPlayerAbrLogger1.clientTimeBegin=k;return this};j.prototype.setClientTimeEnd=function(k){this.$VideoPlayerAbrLogger1.clientTimeEnd=k;return this};j.prototype.$VideoPlayerAbrLogger4=function(){this.$VideoPlayerAbrLogger1={bytes:null,delayMs:null,event:null,unsampledReason:null,reason:null,clientTimeBegin:null,clientTimeEnd:null}};j.prototype.$VideoPlayerAbrLogger5=function(){if(this.$VideoPlayerAbrLogger1.event==null)return;i.setBytes.call(this,this.$VideoPlayerAbrLogger1.bytes);i.setDelayMs.call(this,this.$VideoPlayerAbrLogger1.delayMs);i.setEvent.call(this,this.$VideoPlayerAbrLogger1.event);i.setUnsampledReason.call(this,this.$VideoPlayerAbrLogger1.unsampledReason);i.setReason.call(this,this.$VideoPlayerAbrLogger1.reason);var k=this.$VideoPlayerAbrLogger1.clientTimeBegin,l=this.$VideoPlayerAbrLogger1.clientTimeEnd;if(k==null){k=Date.now();l=k}else if(l==null)l=k;i.setClientTimeBegin.call(this,k);i.setClientTimeEnd.call(this,l)};j.prototype.log=function(){if(c("VideoPlayerShakaExperiments").enableClientSideAbrLoggerSampling&&!c("VideoPlayerAbrLoggerConfig").isSampled)return;this.$VideoPlayerAbrLogger5();i.setBandwidthEstimate.call(this,parseInt(c("VideoPlayerShakaBandwidthEstimator").getBandwidth(),10));i.setRepresentationID.call(this,this.$VideoPlayerAbrLogger2);if(this.$VideoPlayerAbrLogger3){i.setPlayhead.call(this,Math.round(this.$VideoPlayerAbrLogger3.currentTime*1e3));i.setBufferedAhead.call(this,Math.round(c("VideoPlayerUtils").getBufferedAheadOf(this.$VideoPlayerAbrLogger3)))}i.log.call(this);this.$VideoPlayerAbrLogger4()};f.exports=j}),null);
__d("PerformanceResourceBuffer",["BanzaiODS","EventEmitter"],(function a(b,c,d,e,f,g){"use strict";var h,i,j=b.__isResourceTimingBufferFull;delete b.__isResourceTimingBufferFull;performance.onresourcetimingbufferfull=function(){j=true;if(k)k.emit("full")};var k=void 0;h=babelHelpers.inherits(l,c("EventEmitter"));i=h&&h.prototype;function l(){i.constructor.call(this)}l.prototype.isBufferFull=function(){return j};k=new l();if(k.isBufferFull())c("BanzaiODS").bumpEntityKey("performance","resourcetimingbufferfull");else k.addListener("full",function(){return c("BanzaiODS").bumpEntityKey("performance","resourcetimingbufferfull")});f.exports=k}),null);
__d("VideoPlayerLiveStreamState",["RTISubscriptionManager","EventEmitter"],(function a(b,c,d,e,f,g){"use strict";var h,i,j={interrupt:"streamInterruptAt",ended:"endedAt"};h=babelHelpers.inherits(k,c("EventEmitter"));i=h&&h.prototype;function k(l){i.constructor.call(this);this.$VideoPlayerLiveStreamState2=l;this.$VideoPlayerLiveStreamState1=[]}k.prototype.subscribe=function(){this.$VideoPlayerLiveStreamState1=[];for(var l in j)this.$VideoPlayerLiveStreamState1.push(c("RTISubscriptionManager").subscribe("video_broadcast/"+l+"_"+this.$VideoPlayerLiveStreamState2,this.$VideoPlayerLiveStreamState3.bind(this,j[l])))};k.prototype.unsubscribe=function(){for(var l=this.$VideoPlayerLiveStreamState1,m=Array.isArray(l),n=0,l=m?l:l[typeof Symbol==="function"?Symbol.iterator:"@@iterator"]();;){var o;if(m){if(n>=l.length)break;o=l[n++]}else{n=l.next();if(n.done)break;o=n.value}var p=o;p.unsubscribe()}this.$VideoPlayerLiveStreamState1=[]};k.prototype.$VideoPlayerLiveStreamState3=function(l,m){var n=JSON.parse(m.payload||"{}")||{},o=n.time_position;if(typeof o==="number"){o/=1e3;this.emit(l,o)}};f.exports=k}),null);
__d("VideoPlayerHTML5Shaka",["invariant","Promise","CustomAbrManager","EventEmitter","EventListener","Event","TaggedTimeRanges","VideoDashPrefetchCache","VideoPlayerAbrLogger","VideoPlayerLiveStreamState","VideoPlayerMetaData","VideoPlayerShakaBandwidthEstimator","VideoPlayerShakaExperiments","VideoPlayerExperiments","VideoPlayerShakaPerformanceLogger","clearInterval","dispatchEvent","dispatchCustomEvent","dangerouslyOverrideMediaElementEndedProperty","guid","setInterval","Shaka","PerformanceResourceBuffer"],(function a(b,c,d,e,f,g,h){var i,j,k=c("Shaka").player,l=k.Player,m=k.DashVideoSource,n=k.VideoTrack,o=c("Shaka").dash.mpd.parseMpd,p=c("Shaka").util.FailoverUri,q=window.devicePixelRatio||1,r=c("VideoPlayerShakaBandwidthEstimator").getEstimator();c("PerformanceResourceBuffer");p.setPrefetchCacheValueGetter(c("VideoDashPrefetchCache").getCacheValue);function s(u,event){var v=c("EventListener").capture(u.parentNode,event,function(w){if(w.target!=u)return;v.remove();c("Event").kill(w)})}i=babelHelpers.inherits(t,c("EventEmitter"));j=i&&i.prototype;function t(u,v,w){var x=w.videoID,y=w.width,z=w.height,A=w.manifest,B=w.manifestUrl,C=w.isLive,D=w.minPlayQuality,E=w.maxPlayQuality,F=w.accessToken,G=w.startTimestamp,H=w.playerOrigin,I=w.playerSuborigin,J=w.isSpherical,K=w.getSource,L=w.vpcPlayingStateEmitter;"use strict";j.constructor.call(this);this.$VideoPlayerHTML5Shaka4=D;this.$VideoPlayerHTML5Shaka5=E;this.$VideoPlayerHTML5Shaka6=false;this.$VideoPlayerHTML5Shaka7=null;this.$VideoPlayerHTML5Shaka8=1;this.$VideoPlayerHTML5Shaka9=false;this.$VideoPlayerHTML5Shaka10=C;this.$VideoPlayerHTML5Shaka11=C;this.$VideoPlayerHTML5Shaka12=false;this.$VideoPlayerHTML5Shaka13=J;this.$VideoPlayerHTML5Shaka14=y;this.$VideoPlayerHTML5Shaka15=z;this.$VideoPlayerHTML5Shaka16=false;this.$VideoPlayerHTML5Shaka2=v;this.$VideoPlayerHTML5Shaka35=null;this.$VideoPlayerHTML5Shaka18=K;var M=this.$VideoPlayerHTML5Shaka35;this.$VideoPlayerHTML5Shaka3=x;var N=c("guid")();this.$VideoPlayerHTML5Shaka24=c("VideoPlayerShakaPerformanceLogger").isEnabled()?new(c("VideoPlayerShakaPerformanceLogger"))({videoID:x,video:u,representationId:M,isLive:C,accessToken:F,playerOrigin:H,playerSuborigin:I,uniqueID:N}):null;this.$VideoPlayerHTML5Shaka28=new(c("VideoPlayerAbrLogger"))({videoID:x,uniqueID:N}).setRepresentationID(M).setVideoElement(u);if(!c("VideoPlayerShakaExperiments").improveRebufferLogging)this.$VideoPlayerHTML5Shaka31=true;c("EventListener").listen(u,"playing",this.$VideoPlayerHTML5Shaka41.bind(this));c("EventListener").listen(u,"timeupdate",function(T){this.$VideoPlayerHTML5Shaka42(T.target.currentTime)}.bind(this));c("EventListener").listen(u,"pause",this.$VideoPlayerHTML5Shaka43.bind(this));c("EventListener").listen(u,"play",function(){this.$VideoPlayerHTML5Shaka12=true}.bind(this));this.$VideoPlayerHTML5Shaka32=Date.now();if(c("VideoPlayerShakaExperiments").refreshVODManifest)this.$VideoPlayerHTML5Shaka44();this.$VideoPlayerHTML5Shaka20=[];this.$VideoPlayerHTML5Shaka21=null;this.$VideoPlayerHTML5Shaka22=null;this.$VideoPlayerHTML5Shaka37=L;this.$VideoPlayerHTML5Shaka17=new l(u,this.$VideoPlayerHTML5Shaka24,this.$VideoPlayerHTML5Shaka28,this.$VideoPlayerHTML5Shaka37);this.$VideoPlayerHTML5Shaka17.addEventListener("bufferingStart",function(){return this.$VideoPlayerHTML5Shaka45()}.bind(this));this.$VideoPlayerHTML5Shaka17.addEventListener("bufferingEnd",function(){return this.$VideoPlayerHTML5Shaka46()}.bind(this));this.$VideoPlayerHTML5Shaka17.addEventListener("error",function(T){return this.$VideoPlayerHTML5Shaka47(T)}.bind(this));this.$VideoPlayerHTML5Shaka17.addEventListener("adaptation",this.$VideoPlayerHTML5Shaka48.bind(this));this.$VideoPlayerHTML5Shaka17.addEventListener("trackschanged",this.$VideoPlayerHTML5Shaka49.bind(this));this.$VideoPlayerHTML5Shaka17.addEventListener("debug/shakaEvent",function(T){return this.emit("debug/shakaEvent",T.detail)}.bind(this));this.$VideoPlayerHTML5Shaka17.addEventListener("manifestwrapped",this.$VideoPlayerHTML5Shaka50.bind(this));this.$VideoPlayerHTML5Shaka17.addEventListener("cea608-captions",function(T){this.emit("cea608CaptionsParsed",T.detail.captions)}.bind(this));this.$VideoPlayerHTML5Shaka17.addEventListener("manifestIsUpdating",this.$VideoPlayerHTML5Shaka51.bind(this));var O=false,P=null,Q=null;this.$VideoPlayerHTML5Shaka39=c("VideoPlayerShakaExperiments").liveSendPushHeaders;this.$VideoPlayerHTML5Shaka40=B;if(A)this.$VideoPlayerHTML5Shaka34=o(A,B);else{this.$VideoPlayerHTML5Shaka34=B;O=B&&B.indexOf("dash-abr")!==-1}if(O){this.$VideoPlayerHTML5Shaka39=c("VideoPlayerShakaExperiments").liveAbrSendPushHeaders;if(this.$VideoPlayerHTML5Shaka39){P=c("VideoPlayerShakaExperiments").liveAbrInitialPushRepresentation;Q=c("VideoPlayerShakaExperiments").liveAbrAudioPushRepresentation;this.$VideoPlayerHTML5Shaka2=[c("VideoPlayerShakaExperiments").liveAbrInitialPushRepresentation]}if(c("VideoPlayerShakaExperiments").liveAbrAlwaysForceRepresentation)this.$VideoPlayerHTML5Shaka2=[c("VideoPlayerShakaExperiments").liveAbrInitialPushRepresentation]}this.$VideoPlayerHTML5Shaka1=u;this.$VideoPlayerHTML5Shaka38=this.$VideoPlayerHTML5Shaka52();this.$VideoPlayerHTML5Shaka23=this.$VideoPlayerHTML5Shaka53();var R=this.getLocalEstimator();if(R)R.setResolutionConstraint(this.$VideoPlayerHTML5Shaka54(),this.$VideoPlayerHTML5Shaka55());this.$VideoPlayerHTML5Shaka17.configure({enableAdaptation:this.getIsAbrEnabled(),appendPlayingQueryParam:c("VideoPlayerShakaExperiments").addCdnDebugQueryParameters,endBufferingOnPlaying:c("VideoPlayerShakaExperiments").endBufferingOnPlaying,usePlaybackRateForBuffering:c("VideoPlayerShakaExperiments").improveRebufferLogging,streamBufferSize:c("VideoPlayerShakaExperiments").useStreamBufferSizeOverride?0:this.$VideoPlayerHTML5Shaka56(),initialStreamBufferSize:t.isAutoplayBandwidthRestrained(C)||c("VideoPlayerShakaExperiments").useStreamBufferSizeOverride?0:this.$VideoPlayerHTML5Shaka57(),smartBufferAdjustmentParams:c("VideoPlayerShakaExperiments").smartBufferAdjustmentParams,dynamicStreamBufferSize:C?c("VideoPlayerShakaExperiments").liveDynamicStreamBufferSize:null,includeStreamBufferSizeInStartOffset:true,minMpdRefreshInterval:c("VideoPlayerShakaExperiments").minMpdRefreshInterval,disableCacheBustingEvenThoughItMayAffectBandwidthEstimation:true,liveStreamEndTimeout:c("VideoPlayerShakaExperiments").liveStreamEndTimeout/1e3,enableLiveInterruptionDetection:true,liveInterruptionConsecutiveUpdatesWithoutChange:c("VideoPlayerShakaExperiments").liveInterruptionConsecutiveUpdatesWithoutChange,liveInterruptionConsecutiveUpdatesWithChange:c("VideoPlayerShakaExperiments").liveInterruptionConsecutiveUpdatesWithChange,liveMaxSegmentsToPush:c("VideoPlayerShakaExperiments").liveMaxSegmentsToPush,liveSendPushHeaders:t.isAutoplayBandwidthRestrained(C)?false:this.$VideoPlayerHTML5Shaka58(),liveMaxManifestFetchesWithPush:c("VideoPlayerShakaExperiments").liveMaxManifestFetchesWithPush,resolveVideoTimeUpdateOnFragmentedTimeRanges:c("VideoPlayerShakaExperiments").resolveVideoTimeUpdateOnFragmentedTimeRanges,enableManifestDebug:c("VideoPlayerShakaExperiments").enableVideoDebug,reappendInitSegmentAfterAbort:c("VideoPlayerShakaExperiments").reappendInitSegmentAfterAbort,useInlineInitSegment:c("VideoPlayerShakaExperiments").useInlineInitSegment,currentTimeDuringReadyStateZeroThrows:c("VideoPlayerShakaExperiments").currentTimeDuringReadyStateZeroThrows,liveInitialPushRepresentation:P,liveAudioPushRepresentation:Q,jumpToLiveThreshold:c("VideoPlayerShakaExperiments").jumpToLiveThreshold,liveDataFetchMaxRetries:c("VideoPlayerShakaExperiments").liveDataFetchMaxRetries,liveSourceBufferClearMaxRetries:c("VideoPlayerShakaExperiments").liveSourceBufferClearMaxRetries,useLongCacheForManifest:c("VideoPlayerShakaExperiments").useLongCacheForManifest,jumpToEarliestPositionInCurrentBlock:c("VideoPlayerShakaExperiments").jumpToEarliestPositionInCurrentBlock,ignoreMinBufferTime:c("VideoPlayerShakaExperiments").ignoreMinBufferTime,playheadFragmentedGapDiffAllowance:c("VideoPlayerShakaExperiments").playheadFragmentedGapDiffAllowance,fixBufferingGoalDetermination:c("VideoPlayerShakaExperiments").fixBufferingGoalDetermination,skipEmptySegments:c("VideoPlayerShakaExperiments").skipEmptySegments,useMicroTaskTimeouts:true,enableRequestPipelining:this.$VideoPlayerHTML5Shaka11?c("VideoPlayerShakaExperiments").enableRequestPipeliningForLive:c("VideoPlayerShakaExperiments").enableRequestPipeliningForVod,enableStreaming:this.$VideoPlayerHTML5Shaka11?false:c("VideoPlayerShakaExperiments").enableStreamingForVod});if(C){var S=new(c("VideoPlayerLiveStreamState"))(x);this.$VideoPlayerHTML5Shaka36=S;this.$VideoPlayerHTML5Shaka17.addEventListener("liveheadIdleAt",function(event){var T=event.seconds;if(T>(this.$VideoPlayerHTML5Shaka7||0)){this.$VideoPlayerHTML5Shaka59(T);if(this.$VideoPlayerHTML5Shaka25&&this.$VideoPlayerHTML5Shaka60()){this.$VideoPlayerHTML5Shaka61();this.emit("bufferingEnd")}}}.bind(this));this.addListenersToLiveStreamState(S)}if(G)this.$VideoPlayerHTML5Shaka17.setPlaybackStartTime(G);this.$VideoPlayerHTML5Shaka17.load(this.$VideoPlayerHTML5Shaka23)["catch"](function(T){if(this.$VideoPlayerHTML5Shaka6&&c("VideoPlayerShakaExperiments").ignoreErrorsAfterUnload)return;throw T}.bind(this))}t.prototype.addListenersToLiveStreamState=function(u){"use strict";u.addListener("streamInterruptAt",this.$VideoPlayerHTML5Shaka59.bind(this));["streamInterruptAt","commercialBreakAt","endedAt"].forEach(function(v){u.addListener(v,function(event){this.emit("debug/shakaEvent",{type:v,event:event})}.bind(this))}.bind(this))};t.prototype.hasSubtitles=function(){"use strict";return this.$VideoPlayerHTML5Shaka23.hasInlinedCea608Subtitles()&&c("VideoPlayerShakaExperiments").enableCea608Parsing};t.prototype.enableSubtitles=function(u){"use strict";this.$VideoPlayerHTML5Shaka23.setEnableCea608Parsing(u&&c("VideoPlayerShakaExperiments").enableCea608Parsing)};t.prototype.getDebug=function(){"use strict";return{AbrManager:this.$VideoPlayerHTML5Shaka38,VideoSource:this.$VideoPlayerHTML5Shaka23,ShakaPlayer:this.$VideoPlayerHTML5Shaka17}};t.getEstimatedBandwidth=function(){"use strict";return r.getBandwidth()};t.isAutoplayBandwidthRestrained=function(u){"use strict";var v=c("VideoPlayerShakaBandwidthEstimator").isAutoplayBandwidthRestrained(u);return v};t.prototype.$VideoPlayerHTML5Shaka42=function(u){"use strict";var v=this.$VideoPlayerHTML5Shaka19.get(u);if(!v)return;var w=v.id,x=v.reason,y=v.performanceLogger;if(this.$VideoPlayerHTML5Shaka35!==w){var z=this.$VideoPlayerHTML5Shaka35;this.$VideoPlayerHTML5Shaka35=w;if(y)y.setStreamSwitchReason(x).log();this.emit("representation_ended",{representationID:z,nextRepresentationID:w,streamSwitchReason:x})}};t.prototype.getStreamInfoIDForTimePosition=function(u){"use strict";var v=this.$VideoPlayerHTML5Shaka19.get(u),w=null;if(v)w=v.id;return w};t.prototype.$VideoPlayerHTML5Shaka62=function(u,v){"use strict";if(u.fbQualityLabel)return u.fbQualityLabel;else if(n.compare(u,v[0])==0)return"SD";else if(n.compare(u,v[v.length-1])==0)return"HD";else return null};t.prototype.getAvailableVideoQualities=function(){"use strict";if(this.$VideoPlayerHTML5Shaka6)return this.$VideoPlayerHTML5Shaka20;var u=this.$VideoPlayerHTML5Shaka23.getVideoTracks();u.sort(n.compare);return u.every(function(v){return v.fbQualityLabel!==null})?u.map(function(v){return v.fbQualityLabel}):u.length>1?["SD","HD"]:["SD"]};t.prototype.getVideoProjection=function(){"use strict";return this.$VideoPlayerHTML5Shaka23.getVideoProjection()};t.prototype.getIsAbrEnabled=function(){"use strict";return true};t.prototype.getSelectedVideoQuality=function(){"use strict";if(this.$VideoPlayerHTML5Shaka6)return this.$VideoPlayerHTML5Shaka21;var u=this.$VideoPlayerHTML5Shaka23.getVideoTracks();u.sort(n.compare);var v=u.find(function(w){return w.active});return v?this.$VideoPlayerHTML5Shaka62(v,u):null};t.prototype.canAutoSelectVideoQuality=function(){"use strict";return true};t.prototype.setPreloadDisabled=function(u){"use strict";if(c("VideoPlayerShakaExperiments").blockAutoplayAllowPreloadSettingsChange)this.$VideoPlayerHTML5Shaka17.configure({initialStreamBufferSize:u?0:this.$VideoPlayerHTML5Shaka57(),liveSendPushHeaders:u?false:this.$VideoPlayerHTML5Shaka58()})};t.prototype.restoreStreamBufferSize=function(){"use strict";if(!c("VideoPlayerShakaExperiments").useStreamBufferSizeOverride)return;this.$VideoPlayerHTML5Shaka17.configure({initialStreamBufferSize:this.$VideoPlayerHTML5Shaka57(),streamBufferSize:this.$VideoPlayerHTML5Shaka56()})};t.prototype.$VideoPlayerHTML5Shaka57=function(){"use strict";return this.$VideoPlayerHTML5Shaka10?c("VideoPlayerShakaExperiments").liveInitialStreamBufferSize:c("VideoPlayerShakaExperiments").initialStreamBufferSize};t.prototype.$VideoPlayerHTML5Shaka56=function(){"use strict";return this.$VideoPlayerHTML5Shaka10?c("VideoPlayerShakaExperiments").liveStreamBufferSize:c("VideoPlayerShakaExperiments").streamBufferSize};t.prototype.$VideoPlayerHTML5Shaka58=function(){"use strict";return this.$VideoPlayerHTML5Shaka39};t.prototype.setPreferredVideoQuality=function(u){"use strict";var v=this.$VideoPlayerHTML5Shaka23.getVideoTracks();v.sort(n.compare);var w=v.find(function(x){return u==this.$VideoPlayerHTML5Shaka62(x,v)}.bind(this));if(w){this.$VideoPlayerHTML5Shaka22=u;this.$VideoPlayerHTML5Shaka38.setPreferredVideoTrack(w)}};t.prototype.unsetPreferredVideoQuality=function(){"use strict";this.$VideoPlayerHTML5Shaka22=null;this.$VideoPlayerHTML5Shaka38.unsetPreferredVideoTrack()};t.prototype.pause=function(){"use strict";if(this.$VideoPlayerHTML5Shaka25&&!c("VideoPlayerShakaExperiments").improveRebufferLogging){this.$VideoPlayerHTML5Shaka29=true;this.$VideoPlayerHTML5Shaka30=true;c("dispatchEvent")(this.$VideoPlayerHTML5Shaka1,"pause");this.$VideoPlayerHTML5Shaka17.setResumeAfterBuffering(false)}else this.$VideoPlayerHTML5Shaka1.pause()};t.prototype.play=function(){"use strict";this.$VideoPlayerHTML5Shaka12=true;if(this.$VideoPlayerHTML5Shaka24&&(this.$VideoPlayerHTML5Shaka1.paused||this.$VideoPlayerHTML5Shaka1.ended))this.$VideoPlayerHTML5Shaka26=this.$VideoPlayerHTML5Shaka24.getOperationLogger("play").setState("pending_play").start();if(this.$VideoPlayerHTML5Shaka25&&!c("VideoPlayerShakaExperiments").improveRebufferLogging){this.$VideoPlayerHTML5Shaka29=false;this.$VideoPlayerHTML5Shaka30=true;c("dispatchEvent")(this.$VideoPlayerHTML5Shaka1,"play");c("dispatchEvent")(this.$VideoPlayerHTML5Shaka1,"waiting");this.$VideoPlayerHTML5Shaka17.setResumeAfterBuffering(true);return c("Promise").resolve()}else return this.$VideoPlayerHTML5Shaka1.play()};t.prototype.$VideoPlayerHTML5Shaka60=function(){"use strict";var u=this.$VideoPlayerHTML5Shaka7;if(u){var v=this.$VideoPlayerHTML5Shaka1.currentTime,w=4,x=v>u-w,y=v>u;if(y){this.emit("debug/shakaEvent",{type:"streamResumedAt",event:this.$VideoPlayerHTML5Shaka7});this.$VideoPlayerHTML5Shaka7=null}else if(this.$VideoPlayerHTML5Shaka25)this.$VideoPlayerHTML5Shaka9=x}return this.$VideoPlayerHTML5Shaka9};t.prototype.$VideoPlayerHTML5Shaka45=function(){"use strict";if(!c("VideoPlayerShakaExperiments").improveRebufferLogging){s(this.$VideoPlayerHTML5Shaka1,"pause");this.$VideoPlayerHTML5Shaka29=false;this.$VideoPlayerHTML5Shaka30=false}this.$VideoPlayerHTML5Shaka25=true;if(this.$VideoPlayerHTML5Shaka60())this.$VideoPlayerHTML5Shaka61();else{this.$VideoPlayerHTML5Shaka17.setResumeAfterBuffering(true);this.emit("bufferingStart")}};t.prototype.$VideoPlayerHTML5Shaka61=function(){"use strict";if(!c("VideoPlayerShakaExperiments").fixIsLiveInterruptedBacktest){if(this.$VideoPlayerHTML5Shaka24&&!this.$VideoPlayerHTML5Shaka27)this.$VideoPlayerHTML5Shaka27=this.$VideoPlayerHTML5Shaka24.getOperationLogger("stream_interrupted").start();this.$VideoPlayerHTML5Shaka23.setIsLiveInterrupted(true)}this.emit("streamInterrupted")};t.prototype.$VideoPlayerHTML5Shaka46=function(){var u,v=this;"use strict";if(!c("VideoPlayerShakaExperiments").improveRebufferLogging){if(!this.$VideoPlayerHTML5Shaka29)s(this.$VideoPlayerHTML5Shaka1,"play");if(!this.$VideoPlayerHTML5Shaka30)(function(){var w=c("EventListener").capture(v.$VideoPlayerHTML5Shaka1.parentNode,"playing",function(x){if(x.target!=this.$VideoPlayerHTML5Shaka1)return;w.remove();if(this.$VideoPlayerHTML5Shaka31){this.$VideoPlayerHTML5Shaka31=false;return}c("Event").kill(x)}.bind(v))})()}this.$VideoPlayerHTML5Shaka25=false;if(this.$VideoPlayerHTML5Shaka27){this.$VideoPlayerHTML5Shaka27.log();this.$VideoPlayerHTML5Shaka27=null}this.$VideoPlayerHTML5Shaka23.setIsLiveInterrupted(false);if(this.$VideoPlayerHTML5Shaka9)this.$VideoPlayerHTML5Shaka63();else this.emit("bufferingEnd")};t.prototype.$VideoPlayerHTML5Shaka47=function(u){"use strict";var v=u.detail||{},w=v.type||"undefined",x=v.status||null,y=v.url||null;this.$VideoPlayerHTML5Shaka64();if(this.$VideoPlayerHTML5Shaka10&&Object.values(c("VideoPlayerShakaExperiments").blockPlayRequestHTTPStatusList).indexOf(x)!=-1){if(this.$VideoPlayerHTML5Shaka12){c("dispatchEvent")(this.$VideoPlayerHTML5Shaka1,"playing");this.$VideoPlayerHTML5Shaka12=false}return this.$VideoPlayerHTML5Shaka65()}this.emit("error",{error:"SHAKA_"+w.toUpperCase(),message:v.message,httpStatus:x,url:y});return undefined};t.prototype.unload=function(){"use strict";this.$VideoPlayerHTML5Shaka21=this.getSelectedVideoQuality();this.$VideoPlayerHTML5Shaka20=this.getAvailableVideoQualities();if(!this.$VideoPlayerHTML5Shaka23)this.$VideoPlayerHTML5Shaka10=false;else if(this.$VideoPlayerHTML5Shaka23.isLive()!==null)this.$VideoPlayerHTML5Shaka10=this.$VideoPlayerHTML5Shaka23.isLive();this.$VideoPlayerHTML5Shaka6=true;c("clearInterval")(this.$VideoPlayerHTML5Shaka33);var u=this.$VideoPlayerHTML5Shaka36;if(u){u.unsubscribe();u.removeAllListeners()}this.$VideoPlayerHTML5Shaka17.unload()["catch"](function(v){if(c("VideoPlayerShakaExperiments").ignoreErrorsAfterUnload)return;throw v})};t.prototype.$VideoPlayerHTML5Shaka52=function(){"use strict";var u={enableAdaptation:this.getIsAbrEnabled(),minPlayQuality:this.$VideoPlayerHTML5Shaka4,maxPlayQuality:this.$VideoPlayerHTML5Shaka5,maxWidth:this.$VideoPlayerHTML5Shaka54(),maxHeight:this.$VideoPlayerHTML5Shaka55(),initiallyForcedRepresentations:this.$VideoPlayerHTML5Shaka2,bandwidthModel:this.$VideoPlayerHTML5Shaka10?"aggressive":"conservative",bandwidthDowngradeTarget:this.$VideoPlayerHTML5Shaka10?c("VideoPlayerShakaExperiments").liveBandwidthDowngradeTarget:c("VideoPlayerShakaExperiments").bandwidthDowngradeTarget,bandwidthUpgradeTarget:this.$VideoPlayerHTML5Shaka10?c("VideoPlayerShakaExperiments").liveBandwidthUpgradeTarget:c("VideoPlayerShakaExperiments").bandwidthUpgradeTarget,useNewBandwidthBandLogic:c("VideoPlayerShakaExperiments").useNewBandwidthBandLogic,hvqUpgradeAggressiveness:this.$VideoPlayerHTML5Shaka10?c("VideoPlayerShakaExperiments").liveHvqUpgradeAggressiveness:c("VideoPlayerShakaExperiments").hvqUpgradeAggressiveness,hvqInlineUpgradeAggressiveness:this.$VideoPlayerHTML5Shaka10?c("VideoPlayerShakaExperiments").liveHvqInlineUpgradeAggressiveness:c("VideoPlayerShakaExperiments").hvqInlineUpgradeAggressiveness,preHvqUpgradeAggressiveness:this.$VideoPlayerHTML5Shaka10?c("VideoPlayerShakaExperiments").livePreHvqUpgradeAggressiveness:c("VideoPlayerShakaExperiments").preHvqUpgradeAggressiveness,preHvqInlineUpgradeAggressiveness:this.$VideoPlayerHTML5Shaka10?c("VideoPlayerShakaExperiments").livePreHvqInlineUpgradeAggressiveness:c("VideoPlayerShakaExperiments").preHvqInlineUpgradeAggressiveness,video:this.$VideoPlayerHTML5Shaka1,abrLogger:this.$VideoPlayerHTML5Shaka28,getSource:this.$VideoPlayerHTML5Shaka18};return new(c("CustomAbrManager"))(u)};t.prototype.$VideoPlayerHTML5Shaka53=function(){"use strict";this.$VideoPlayerHTML5Shaka38||h(0);this.$VideoPlayerHTML5Shaka34||h(0);var u=new m(this.$VideoPlayerHTML5Shaka34,null,r,this.$VideoPlayerHTML5Shaka38);this.$VideoPlayerHTML5Shaka19=new(c("TaggedTimeRanges"))(function(v,w){return v.id===w.id&&v.reason===w.reason});u.setTaggedTimeRanges(this.$VideoPlayerHTML5Shaka19);return u};t.prototype.$VideoPlayerHTML5Shaka66=function(u){"use strict";this.$VideoPlayerHTML5Shaka38=this.$VideoPlayerHTML5Shaka52();this.$VideoPlayerHTML5Shaka23=this.$VideoPlayerHTML5Shaka53();if(this.$VideoPlayerHTML5Shaka60()){this.$VideoPlayerHTML5Shaka8=this.$VideoPlayerHTML5Shaka17.getPlaybackRate();this.$VideoPlayerHTML5Shaka1.playbackRate=0;this.emit("streamInterrupted")}this.$VideoPlayerHTML5Shaka17.setPlaybackStartTime(u);this.$VideoPlayerHTML5Shaka6=false;return this.$VideoPlayerHTML5Shaka17.load(this.$VideoPlayerHTML5Shaka23).then(function(){if(this.$VideoPlayerHTML5Shaka10!=this.$VideoPlayerHTML5Shaka23.isLive())return this.$VideoPlayerHTML5Shaka65();if(this.$VideoPlayerHTML5Shaka22)this.setPreferredVideoQuality(this.$VideoPlayerHTML5Shaka22);this.$VideoPlayerHTML5Shaka21=null;this.$VideoPlayerHTML5Shaka20=[];return undefined}.bind(this))};t.prototype.$VideoPlayerHTML5Shaka67=function(u){"use strict";if(this.$VideoPlayerHTML5Shaka6&&c("VideoPlayerShakaExperiments").ignoreErrorsAfterUnload)return;throw u};t.prototype.reload=function(u){"use strict";if(!this.$VideoPlayerHTML5Shaka6)return c("VideoPlayerShakaExperiments").fixReloadPromise?c("Promise").resolve():undefined;var v=this.$VideoPlayerHTML5Shaka36;if(v){v.subscribe();this.addListenersToLiveStreamState(v)}var w=void 0;if(c("VideoPlayerShakaExperiments").refreshVODManifest)w=this.$VideoPlayerHTML5Shaka44().then(function(){return this.$VideoPlayerHTML5Shaka66(u)}.bind(this))["catch"](function(x){return this.$VideoPlayerHTML5Shaka67(x)}.bind(this));else w=this.$VideoPlayerHTML5Shaka66(u)["catch"](function(x){return this.$VideoPlayerHTML5Shaka67()}.bind(this));return c("VideoPlayerShakaExperiments").fixReloadPromise?w:undefined};t.prototype.setPlaybackRate=function(u){"use strict";this.$VideoPlayerHTML5Shaka8=u;if(!this.$VideoPlayerHTML5Shaka60())this.$VideoPlayerHTML5Shaka17.setPlaybackRate(u)};t.prototype.setSmartBufferAdjustmentEnabled=function(u){"use strict";this.$VideoPlayerHTML5Shaka17.configure({smartBufferAdjustmentEnabled:u})};t.prototype.setVideoStreamOffset=function(u){"use strict";this.$VideoPlayerHTML5Shaka17.setVideoStreamOffset(u)};t.prototype.$VideoPlayerHTML5Shaka65=function(){"use strict";c("dispatchEvent")(this.$VideoPlayerHTML5Shaka1,"seeked");c("dispatchEvent")(this.$VideoPlayerHTML5Shaka1,"playing");if(c("VideoPlayerExperiments").abortLoadingDecisioningLogic){c("dispatchCustomEvent")(this.$VideoPlayerHTML5Shaka1,"pause",c("dangerouslyOverrideMediaElementEndedProperty")());c("dispatchEvent")(this.$VideoPlayerHTML5Shaka1,"ended")}else if(c("VideoPlayerShakaExperiments").endLivePlaybackWithPause)c("dispatchEvent")(this.$VideoPlayerHTML5Shaka1,"pause");else c("dispatchEvent")(this.$VideoPlayerHTML5Shaka1,"ended");this.emit("streamResumed");this.unload()};t.prototype.getLongestInitResponseTime=function(){"use strict";return this.$VideoPlayerHTML5Shaka23.getLongestInitResponseTime()};t.prototype.getLocalEstimator=function(){"use strict";return this.$VideoPlayerHTML5Shaka23.getLocalEstimator()};t.$VideoPlayerHTML5Shaka68=function(){"use strict";return c("VideoPlayerShakaExperiments").resolutionConstraintFactor*q};t.prototype.$VideoPlayerHTML5Shaka54=function(){"use strict";if(this.$VideoPlayerHTML5Shaka13||!c("VideoPlayerShakaExperiments").useResolutionConstraints)return Infinity;return this.$VideoPlayerHTML5Shaka14*t.$VideoPlayerHTML5Shaka68()};t.prototype.$VideoPlayerHTML5Shaka55=function(){"use strict";if(this.$VideoPlayerHTML5Shaka13||!c("VideoPlayerShakaExperiments").useResolutionConstraints)return Infinity;return this.$VideoPlayerHTML5Shaka15*t.$VideoPlayerHTML5Shaka68()};t.prototype.setDimensions=function(u,v){"use strict";this.$VideoPlayerHTML5Shaka14=u;this.$VideoPlayerHTML5Shaka15=v;var w=this.$VideoPlayerHTML5Shaka54(),x=this.$VideoPlayerHTML5Shaka55();this.$VideoPlayerHTML5Shaka38.setResolutionConstraint(w,x);var y=this.getLocalEstimator();if(y)y.setResolutionConstraint(w,x)};t.isSupported=function(){"use strict";return l.isBrowserSupported()};t.prototype.$VideoPlayerHTML5Shaka49=function(){"use strict";this.emit("tracksChanged")};t.prototype.$VideoPlayerHTML5Shaka48=function(event){"use strict";if(event.contentType==="video"){if(this.$VideoPlayerHTML5Shaka24)this.$VideoPlayerHTML5Shaka24.setRepresentationID(event.id);this.$VideoPlayerHTML5Shaka28.setRepresentationID(event.id);this.emit("adaptation",{reason:event.reason})}};t.prototype.$VideoPlayerHTML5Shaka59=function(u){"use strict";if(c("VideoPlayerShakaExperiments").fixIsLiveInterruptedBacktest){if(this.$VideoPlayerHTML5Shaka24&&!this.$VideoPlayerHTML5Shaka27)this.$VideoPlayerHTML5Shaka27=this.$VideoPlayerHTML5Shaka24.getOperationLogger("stream_interrupted").start();this.$VideoPlayerHTML5Shaka23.setIsLiveInterrupted(true)}this.$VideoPlayerHTML5Shaka7=u};t.prototype.$VideoPlayerHTML5Shaka51=function(){"use strict";if(this.$VideoPlayerHTML5Shaka60())this.$VideoPlayerHTML5Shaka63()};t.prototype.$VideoPlayerHTML5Shaka63=function(){"use strict";this.$VideoPlayerHTML5Shaka7=null;this.$VideoPlayerHTML5Shaka9=false;this.$VideoPlayerHTML5Shaka23.forceResyncVideoBuffer();this.$VideoPlayerHTML5Shaka17.setPlaybackRate(this.$VideoPlayerHTML5Shaka8);this.emit("streamResumed")};t.prototype.$VideoPlayerHTML5Shaka50=function(){"use strict";var u=this.$VideoPlayerHTML5Shaka24?this.$VideoPlayerHTML5Shaka24.getOperationLogger("manifest_wrapped").setResource(this.$VideoPlayerHTML5Shaka40).start():null,v=!this.$VideoPlayerHTML5Shaka1.paused;this.unload();this.reload().then(function(){if(this.$VideoPlayerHTML5Shaka9)this.$VideoPlayerHTML5Shaka63();if(v)this.play();if(u)u.log()}.bind(this))["catch"](function(w){if(u)u.setError(w).log()})};t.prototype.$VideoPlayerHTML5Shaka41=function(){"use strict";this.$VideoPlayerHTML5Shaka12=false;if(this.$VideoPlayerHTML5Shaka31)this.$VideoPlayerHTML5Shaka31=false;if(this.$VideoPlayerHTML5Shaka26){this.$VideoPlayerHTML5Shaka26.log();this.$VideoPlayerHTML5Shaka26=null}};t.prototype.$VideoPlayerHTML5Shaka43=function(){"use strict";if(this.$VideoPlayerHTML5Shaka12)this.$VideoPlayerHTML5Shaka12=false;if(this.$VideoPlayerHTML5Shaka26){this.$VideoPlayerHTML5Shaka26.setResult("aborted").log();this.$VideoPlayerHTML5Shaka26=null}};t.prototype.$VideoPlayerHTML5Shaka69=function(){"use strict";if(this.$VideoPlayerHTML5Shaka11)return c("Promise").resolve();if(this.$VideoPlayerHTML5Shaka32+1e3*60*60<Date.now())return c("VideoPlayerMetaData").genVideoData(this.$VideoPlayerHTML5Shaka3).then(function(u){return this.$VideoPlayerHTML5Shaka70(this.$VideoPlayerHTML5Shaka16?u.getHighlightsManifest():u.getDashManifest())}.bind(this));return c("Promise").resolve()};t.prototype.$VideoPlayerHTML5Shaka70=function(u){"use strict";if(!this.$VideoPlayerHTML5Shaka23)return;this.$VideoPlayerHTML5Shaka34=o(u);if(!this.$VideoPlayerHTML5Shaka6){this.$VideoPlayerHTML5Shaka32=Date.now();this.$VideoPlayerHTML5Shaka23.updateManifest(this.$VideoPlayerHTML5Shaka34)}};t.prototype.$VideoPlayerHTML5Shaka44=function(){"use strict";this.$VideoPlayerHTML5Shaka64();this.$VideoPlayerHTML5Shaka33=c("setInterval")(function(){return this.$VideoPlayerHTML5Shaka69()}.bind(this),1e3*60);return this.$VideoPlayerHTML5Shaka69()["catch"](function(){return c("Promise").resolve()})};t.prototype.refreshDashManifest=function(){"use strict";this.unload();var u=c("VideoPlayerMetaData").genVideoData(this.$VideoPlayerHTML5Shaka3);return u.then(function(v){this.$VideoPlayerHTML5Shaka70(v.getDashManifest());this.$VideoPlayerHTML5Shaka16=false}.bind(this))};t.prototype.refreshLiveVODHighlightsManifest=function(){"use strict";this.unload();var u=c("VideoPlayerMetaData").genVideoData(this.$VideoPlayerHTML5Shaka3);return u.then(function(v){this.$VideoPlayerHTML5Shaka70(v.getHighlightsManifest());this.$VideoPlayerHTML5Shaka16=true}.bind(this))};t.prototype.$VideoPlayerHTML5Shaka64=function(){"use strict";c("clearInterval")(this.$VideoPlayerHTML5Shaka33)};t.prototype.isPlayingLiveVODHighlights=function(){"use strict";return this.$VideoPlayerHTML5Shaka16};f.exports=t}),null);